=== tiMidPoint.adoc

dev1.testbed...alias i2dev1  ssh -i ~/.ssh/kh_rsa -l khazelton dev1.testbed.tier.internet2.edu +
~/mid101.tar.gz  sudo docker exec -u midpoint -it 50494ba2f930 /bin/bash +
https://spaces.at.internet2.edu/display/MID/Experiments+with+different+integration+approaches +
https://wiki.evolveum.com/display/midPoint/Installing+midPoint+4.2 +

See also: ~/opt/midPoint... for local copies

- - -
_2020-12-05 22:15 midPoint 4.2 on NbP_

See INSTALL file after downloading http://www.evolveum.com/downloads/midpoint/4.2/midpoint-4.2-dist.tar.gz

./bin/start.sh

browse to http://localhost:8080  for admin UI

- - -
_2019-10-22 21:32 change localhost to co-op.tech in SAML endpoint config_

edit IdP and SP metadata to change endpoints from localhost to co-op.tech

```
cd opt/midPoint_container/demo/complex/configs-and-secrets/grouper/shibboleth
vim idp-metadata.xml
:%s/localhost/co-op.tech/g

cd opt/midPoint_container/demo/complex/configs-and-secrets/midpoint/shibboleth
vim idp-metadata.xml

cd opt/midPoint_container/demo/complex/idp/shibboleth-idp/metadata
vim idp-metadata.xml
vim grouper-sp.xml
vim midpoint-sp.xml

```

- - -
_2019-10-22 21:29 mP complex2s demo running on co-op.tech_


next steps

* change localhost to co-op.tech in SAML metadata
* log into grouper & make changes that will propagte back to mP

.

- - -
_2019-10-21 18:39 evolveum midPoint demos Where to start?_

https://spaces.at.internet2.edu/display/MID/Experiments+with+different+integration+approaches <= mP demo starting point

git clone -b laboratory https://github.internet2.edu/docker/midPoint_container.git



- - -
_2019-10-14 14:36 midPoint on AWS_

ssh khazelton@34.217.114.34 <= bare centos 7.7
 Docker host for RabbitMQ (KeithH)	i-01577bcdd2e3d8fb1	t2.small	us-west-2b; see https://docs.google.com/spreadsheets/d/10PJk-LkJHILsPyoeQnZEXV1KzIFsjGNrvLDeyPMpLgs/edit#gid=0

- - -
_2019-08-16 16:59 midPoint Schools_

. Co School of Mines +
. UW-Madison +
. UC Merced +
. Colorado State +
. Oregon State +
. UNC Chapel Hill csp19 +
. UMBC +
. Illinois +
. N Dakota +
. Case Western Reserve +
. Washington U +
. W Ontario U +

.

- - -
_2019-08-07 10:08 setup mP demo on xps for BaseCAMP_

per https://spaces.at.internet2.edu/display/MID/Experiments+with+different+integration+approaches

Downloading and building

```
$ cd ~/opt
$ git clone -b laboratory https://github.internet2.edu/TIER/midPoint_container.git
$ cd midPoint_container
$ ./build.sh

https://spaces.at.internet2.edu/display/MID/Design+option+2%3A+SoR+groups+to+Grouper

$ sudo netstat -tulpn | grep tcp

  kill processes on 15672, 25672 (rabbitmq)
                    5432, 5433 (postgres)
                    3306 (mysqld)

$ cd demo/complex
$ docker-compose up
...

midpoint_server_1  | midpoint;midpoint.log;demo;;2019-08-08 01:24:12,819 [REPOSITORY] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Started MidPointSpringApplication in 64.645 seconds (JVM running for 65.843)

...
./after-installation.sh
...
./upload-import-sis-persons.sh
...
./get-import-sis-persons-status.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21678    0 21450  100   228   246k   2682 --:--:-- --:--:-- --:--:--  249k
Task execution status: closed
...
./create-ref-loaders.sh
```

Grouper / misc / loader jobs

SELECT concat('ref:affiliation:',affiliation,'_systemOfRecord') as GROUP_NAME, uid as SUBJECT_ID, 'ldap' as SUBJECT_SOURCE_ID from SIS_AFFILIATIONS

```
./add-ref-groups.sh
...
./upload-async-update-task.sh
...
./show-queue-size.sh
Timeout: 60.0 seconds ...
Listing queues for vhost / ...
name	messages
sampleQueue	433
...
./show-queue-size.sh
Timeout: 60.0 seconds ...
Listing queues for vhost / ...
name	messages
sampleQueue	0

NEXT: ./update-bgasper-in-grouper.sh
```

- - -
_2019-07-16 20:11 wasabi: mP relying on external services_

```
git clone -b laboratory https://github.internet2.edu/docker/midPoint_container.git
alias mp='cd ~/opt/midPoint_container/demo

khazelton@wasabi:~/opt/midPoint_container/demo/complex2s$ ls -la
total 152
drwxrwxr-x 16 khazelton khazelton 4096 Jul 16 20:36 .
drwxrwxr-x 10 khazelton khazelton 4096 Jul 16 20:36 ..
-rw-rw-r--  1 khazelton khazelton  958 Jul 16 20:36 add-ref-groups.gsh
-rwxrwxr-x  1 khazelton khazelton   85 Jul 16 20:36 add-ref-groups.sh
-rwxrwxr-x  1 khazelton khazelton  520 Jul 16 20:36 after-installation.sh
drwxrwxr-x  4 khazelton khazelton 4096 Jul 16 20:36 configs-and-secrets
-rw-rw-r--  1 khazelton khazelton 2025 Jul 16 20:36 create-ref-loaders.gsh
-rwxrwxr-x  1 khazelton khazelton   89 Jul 16 20:36 create-ref-loaders.sh
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 directory
-rw-rw-r--  1 khazelton khazelton 9345 Jul 16 20:36 docker-compose.yml
-rw-rw-r--  1 khazelton khazelton  304 Jul 16 20:36 .env
-rwxrwxr-x  1 khazelton khazelton   92 Jul 16 20:36 get-import-sis-persons-status.sh
drwxrwxr-x  2 khazelton khazelton 4096 Jul 16 20:36 grouper_daemon
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 grouper_data
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 grouper_ui
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 grouper_ws
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 idp
drwxrwxr-x  9 khazelton khazelton 4096 Jul 16 20:36 midpoint-objects
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 midpoint-objects-manual
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 midpoint_server
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 mq
-rw-rw-r--  1 khazelton khazelton  326 Jul 16 20:36 README.md
-rwxrwxr-x  1 khazelton khazelton  162 Jul 16 20:36 recompute.sh
-rwxrwxr-x  1 khazelton khazelton   51 Jul 16 20:36 show-queue-size.sh
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 sources
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 targets
-rwxrwxr-x  1 khazelton khazelton  107 Jul 16 20:36 test-resource-grouper.sh
-rwxrwxr-x  1 khazelton khazelton  311 Jul 16 20:36 test-resources-1.sh
drwxrwxr-x  3 khazelton khazelton 4096 Jul 16 20:36 tests
-rw-rw-r--  1 khazelton khazelton  437 Jul 16 20:36 update-bgasper-in-grouper.gsh
-rwxrwxr-x  1 khazelton khazelton  109 Jul 16 20:36 update-bgasper-in-grouper.sh
-rwxrwxr-x  1 khazelton khazelton  117 Jul 16 20:36 upload-async-update-task.sh
-rwxrwxr-x  1 khazelton khazelton  115 Jul 16 20:36 upload-import-sis-persons.sh
-rwxrwxr-x  1 khazelton khazelton  618 Jul 16 20:36 upload-objects.sh
-rwxrwxr-x  1 khazelton khazelton  126 Jul 16 20:36 upload-reconcile-grouper-groups.sh
-rwxrwxr-x  1 khazelton khazelton  125 Jul 16 20:36 upload-reconcile-grouper-users.sh
```

for mP build, see mPcmplxBuildWasabi-2019-07-16.adoc

```
khazelton@wasabi:~/opt/midPoint_container/demo/complex2s$ cat docker-compose.yml

version: "3.3"

services:
  grouper_daemon:
    build: ./grouper_daemon/
    command: bash -c "while ! curl -s grouper_data:3306 > /dev/null; do echo waiting for mysql on grouper_data to start; sleep 3; done; while ! curl -s ldap://directory:389 > /dev/null; do echo waiting for ldap on directory to start; sleep 3; done; exec daemon"
    depends_on:
     - grouper_data
     - directory
    environment:
     - ENV
     - USERTOKEN
     - GROUPER_CLIENT_WEBSERVICE_PASSWORD_FILE=password
     - GROUPER_DATABASE_PASSWORD_FILE=/run/secrets/g_database_password.txt
     - RABBITMQ_PASSWORD_FILE=/run/secrets/rabbitmq_password.txt
     - SUBJECT_SOURCE_LDAP_PASSWORD=password
    networks:
      net:
        aliases:
         - grouper-daemon
    secrets:
     - g_database_password.txt
     - rabbitmq_password.txt
     - source: grouper.hibernate.properties
       target: grouper_grouper.hibernate.properties
     - source: grouper-loader.properties
       target: grouper_grouper-loader.properties
     - source: subject.properties
       target: grouper_subject.properties
    volumes:
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.properties
       target: /opt/grouper/conf/grouper.properties
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.client.properties
       target: /opt/grouper/conf/grouper.client.properties

  grouper_ui:
    build: ./grouper_ui/
    command: bash -c "while ! curl -s grouper_data:3306 > /dev/null; do echo waiting for mysql on grouper_data to start; sleep 3; done; while ! curl -s ldap://directory:389 > /dev/null; do echo waiting for ldap on directory to start; sleep 3; done; exec ui"
    depends_on:
     - grouper_data
     - directory
    environment:
     - ENV
     - USERTOKEN
     - GROUPER_DATABASE_PASSWORD_FILE=/run/secrets/g_database_password.txt
     - SUBJECT_SOURCE_LDAP_PASSWORD=password
    networks:
      net:
        aliases:
         - grouper-ui
    ports:
     - 4443:443
    secrets:
     - g_database_password.txt
     - source: grouper.hibernate.properties
       target: grouper_grouper.hibernate.properties
     - source: grouper-loader.properties
       target: grouper_grouper-loader.properties
     - source: subject.properties
       target: grouper_subject.properties
     - source: g_sp-key.pem
       target: shib_sp-key.pem
     - source: g_host-key.pem
       target: host-key.pem
    volumes:
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.properties
       target: /opt/grouper/conf/grouper.properties
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.client.properties
       target: /opt/grouper/conf/grouper.client.properties
     - type: bind
       source: ./configs-and-secrets/grouper/shibboleth/sp-cert.pem
       target: /etc/shibboleth/sp-cert.pem
     - type: bind
       source: ./configs-and-secrets/grouper/shibboleth/shibboleth2.xml
       target: /etc/shibboleth/shibboleth2.xml
     - type: bind
       source: ./configs-and-secrets/grouper/shibboleth/idp-metadata.xml
       target: /etc/shibboleth/idp-metadata.xml
     - type: bind
       source: ./configs-and-secrets/grouper/httpd/host-cert.pem
       target: /etc/pki/tls/certs/host-cert.pem
     - type: bind
       source: ./configs-and-secrets/grouper/httpd/host-cert.pem
       target: /etc/pki/tls/certs/cachain.pem

  grouper_ws:
    build: ./grouper_ws/
    command: bash -c "while ! curl -s grouper_data:3306 > /dev/null; do echo waiting for mysql to start; sleep 3; done; while ! curl -s ldap://directory:389 > /dev/null; do echo waiting for ldap to start; sleep 3; done; exec ws"
    depends_on:
     - grouper_data
     - directory
    environment:change localhost to co-op.tech in SAML endpoint config_


edit IdP and SP metadata to change endpoints from localhost to co-op.tech

```
cd opt/midPoint_container/demo/complex/configs-and-secrets/grouper/shibboleth
vim idp-metadata.xml
:%s/localhost/co-op.tech/g

cd opt/midPoint_container/demo/complex/configs-and-secrets/midpoint/shibboleth
vim idp-metadata.xml

cd opt/midPoint_container/demo/complex/idp/shibboleth-idp/metadata
vim idp-metadata.xml
vim grouper-sp.xml
vim midpoint-sp.xml

```
     - ENV
     - GROUPER_DATABASE_PASSWORD_FILE=/run/secrets/g_database_password.txt
     - SUBJECT_SOURCE_LDAP_PASSWORD=password
     - USERTOKEN
    networks:
      net:
        aliases:
         - grouper-ws
    ports:
     - 9443:443
    secrets:
     - g_database_password.txt
     - source: grouper.hibernate.properties
       target: grouper_grouper.hibernate.properties
     - source: grouper-loader.properties
       target: grouper_grouper-loader.properties
     - source: subject.properties
       target: grouper_subject.properties
     - source: g_sp-key.pem
       target: shib_sp-key.pem
     - source: g_host-key.pem
       target: host-key.pem
    volumes:
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.properties
       target: /opt/grouper/conf/grouper.properties
     - type: bind
       source: ./configs-and-secrets/grouper/application/grouper.client.properties
       target: /opt/grouper/conf/grouper.client.properties
     - type: bind
       source: ./configs-and-secrets/grouper/httpd/host-cert.pem
       target: /etc/pki/tls/certs/host-cert.pem
     - type: bind
       source: ./configs-and-secrets/grouper/httpd/host-cert.pem
       target: /etc/pki/tls/certs/cachain.pem

  grouper_data:
    build: ./grouper_data/
    networks:
      net:
        aliases:
         - grouper-data
    ports:
     - 3306:3306
    volumes:
     - grouper_data:/var/lib/mysql

  directory:
    build: ./directory/
    ports:
     - 389:389
    networks:
     - net
    volumes:
     - ldap:/var/lib/dirsrv

  sources:
    build: ./sources/
    ports:
     - 13306:3306
    networks:
     - net
    volumes:
     - source_data:/var/lib/mysql

  targets:
    build: ./targets/
    ports:
     - 23306:389
    networks:
     - net
    volumes:
     - target_data:/var/lib/mysql

  midpoint_data:
    image: tier/mariadb:mariadb10
    ports:
     - 33306:3306
    networks:
      net:
        aliases:
         - midpoint-data
    volumes:
     - midpoint_mysql:/var/lib/mysql
     - midpoint_data:/var/lib/mysqlmounted
    environment:
     - CREATE_NEW_DATABASE=if_needed

  midpoint_server:
    build: ./midpoint_server/
    depends_on:
     - midpoint_data
    ports:
     - 8443:443
    environment:
     - AUTHENTICATION
     - ENV
     - USERTOKEN
     - REPO_DATABASE_TYPE
     - REPO_JDBC_URL
     - REPO_HOST
     - REPO_PORT
     - REPO_DATABASE
     - REPO_USER
     - REPO_MISSING_SCHEMA_ACTION
     - REPO_UPGRADEABLE_SCHEMA_ACTION
     - REPO_SCHEMA_VERSION_IF_MISSING
     - REPO_SCHEMA_VARIANT
     - MP_MEM_MAX
     - MP_MEM_INIT
     - MP_JAVA_OPTS
     - SSO_HEADER
     - TIER_BEACON_OPT_OUT
     - TIMEZONE
    networks:
      net:
        aliases:
         - midpoint-server
    secrets:
     - mp_database_password.txt
     - mp_keystore_password.txt
     - mp_sp-encrypt-key.pem
     - mp_sp-signing-key.pem
     - mp_host-key.pem
    volumes:
     - midpoint_home:/opt/midpoint/var
     - type: bind
       source: ./configs-and-secrets/midpoint/shibboleth/shibboleth2.xml
       target: /etc/shibboleth/shibboleth2.xml
     - type: bind
       source: ./configs-and-secrets/midpoint/shibboleth/idp-metadata.xml
       target: /etc/shibboleth/idp-metadata.xml
     - type: bind
       source: ./configs-and-secrets/midpoint/shibboleth/sp-signing-cert.pem
       target: /etc/shibboleth/sp-signing-cert.pem
     - type: bind
       source: ./configs-and-secrets/midpoint/shibboleth/sp-encrypt-cert.pem
       target: /etc/shibboleth/sp-encrypt-cert.pem
     - type: bind
       source: ./configs-and-secrets/midpoint/httpd/host-cert.pem
       target: /etc/pki/tls/certs/host-cert.pem
     - type: bind
       source: ./configs-and-secrets/midpoint/httpd/host-cert.pem
       target: /etc/pki/tls/certs/cachain.pem

  idp:
    build: ./idp/
    depends_on:
     - directory
    environment:
     - JETTY_MAX_HEAP=64m
     - JETTY_BROWSER_SSL_KEYSTORE_PASSWORD=password
     - JETTY_BACKCHANNEL_SSL_KEYSTORE_PASSWORD=password
    networks:
     - net
    ports:
     - 443:443

  mq:
    build: ./mq/
    environment:
     - RABBITMQ_NODENAME=docker-rabbit
    hostname: rabbitmq
    networks:
     - net
    ports:
     - 15672:15672
    volumes:
     - mq:/var/lib/rabbitmq

networks:
  net:
    driver: bridge

secrets:
# grouper
  g_host-key.pem:
    file: ./configs-and-secrets/grouper/httpd/host-key.pem
  g_sp-key.pem:
    file: ./configs-and-secrets/grouper/shibboleth/sp-key.pem
  g_database_password.txt:
    file: ./configs-and-secrets/grouper/application/database_password.txt
  rabbitmq_password.txt:
    file: ./configs-and-secrets/grouper/application/rabbitmq_password.txt
  grouper.hibernate.properties:
    file: ./configs-and-secrets/grouper/application/grouper.hibernate.properties
  grouper-loader.properties:
    file: ./configs-and-secrets/grouper/application/grouper-loader.properties
  subject.properties:
    file: ./configs-and-secrets/grouper/application/subject.properties
# midPoint
  mp_host-key.pem:
    file: ./configs-and-secrets/midpoint/httpd/host-key.pem
  mp_sp-signing-key.pem:
    file: ./configs-and-secrets/midpoint/shibboleth/sp-signing-key.pem
  mp_sp-encrypt-key.pem:
    file: ./configs-and-secrets/midpoint/shibboleth/sp-encrypt-key.pem
  mp_database_password.txt:
    file: ./configs-and-secrets/midpoint/application/database_password.txt
  mp_keystore_password.txt:
    file: ./configs-and-secrets/midpoint/application/keystore_password.txt

volumes:
  grouper_data:
  source_data:
  target_data:
  ldap:
  midpoint_data:
  midpoint_mysql:
  midpoint_home:
  mq:
khazelton@wasabi:~/opt/midPoint_container/demo/complex2s$
```

docker-compose

see dock-comp-upWasabi-2019-07-16.adoc; review errors that lead to unhealthy midPoint server

```
Installed:
  389-admin.x86_64 0:1.1.46-1.el7         389-adminutil.x86_64 0:1.1.21-2.el7
  389-ds-base.x86_64 0:1.3.8.4-23.el7_6

  Successfully built 5d8bf677441a
  Successfully tagged complex2s_directory:latest

  Building grouper_ws

  Successfully built c10463c01a08
  Successfully tagged complex2s_grouper_ws:latest

  Building grouper_ui

  Successfully built 3b28b9d7228d
  Successfully tagged complex2s_grouper_ui:latest

  Building grouper_daemon

  Successfully built a4ca46bce609
  Successfully tagged complex2s_grouper_daemon:latest

  Successfully built eb89fc4cac02
  Successfully tagged complex2s_sources:latest

  Building targets

  Successfully built 604977409c4e
  Successfully tagged complex2s_targets:latest

  Building midpoint_server

  Successfully built 86a1312a4059
  Successfully tagged complex2s_midpoint_server:latest

  Building idp

  Successfully built fd14e33afe1e
  Successfully tagged complex2s_idp:latest

  Building mq

  ...
  midpoint_server_1  | midpoint;midpoint.log;demo;;2019-07-17 02:26:12,987 [] [main] WARN (org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext):
    Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException:
    Unable to start web server;
nested exception is org.springframework.beans.factory.BeanCreationException:
    Error creating bean with name 'tomcatEmbeddedServletContainerFactory' defined in class path resource [com/evolveum/midpoint/web/boot/EmbeddedTomcatAutoConfiguration$EmbeddedTomcat.class]:
    Initialization of bean failed;
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'com.evolveum.midpoint.web.boot.MidPointSpringApplication$ServerCustomization':
  Unsatisfied dependency expressed through constructor parameter 0;
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'midPointSpringApplication':
  Unsatisfied dependency expressed through field 'nodeAuthenticator';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'nodeAuthenticationEvaluatorImpl':
  Unsatisfied dependency expressed through field 'repositoryService';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'cacheRepositoryService':
  Unsatisfied dependency expressed through field 'repositoryService';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'repositoryService':
  Unsatisfied dependency expressed through field 'sequenceHelper';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'sequenceHelper': Unsatisfied dependency expressed through field 'objectRetriever';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'objectRetriever': Unsatisfied dependency expressed through field 'caseHelper';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'certificationCaseHelper': Unsatisfied dependency expressed through field 'extItemDictionary';
nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:
  Error creating bean with name 'extItemDictionary': Unsatisfied dependency expressed through field 'baseHelper';
nested exception is org.springframework.beans.factory.BeanCreationException:
  Error creating bean with name 'baseHelper' defined in URL [jar:file:/opt/midpoint/lib/midpoint.war!/WEB-INF/lib/repo-sql-impl-4.0-SNAPSHOT.jar!/com/evolveum/midpoint/repo/sql/helpers/BaseHelper.class]: Initialization of bean failed;
nested exception is org.springframework.beans.factory.BeanCreationException:
  Error creating bean with name 'sessionFactory' defined in com.evolveum.midpoint.repo.sql.SqlRepositoryBeanConfig:
  Bean instantiation via factory method failed;

nested exception is org.springframework.beans.BeanInstantiationException:
  Failed to instantiate [org.springframework.orm.hibernate5.LocalSessionFactoryBean]:
  Factory method 'sessionFactory' threw exception;
nested exception is com.evolveum.midpoint.repo.api.RepositoryServiceFactoryException:
  Couldn't initialize datasource,
  reason: Failed to initialize pool:
  Could not connect to address=(host=midpoint_data)(port=3306)(type=master) :
  Connection refused (Connection refused)


- - -
_2019-06-27 21:46 async ops source in mP_

```
khazelton@xps:~/opt/midpoint-project-2019-06-27/provisioning/ucf-impl-builtin$ ls -la src/main/java/com/evolveum/midpoint/provisioning/ucf/impl/builtin
total 48
drwxr-xr-x 3 khazelton khazelton  4096 Jun 27 20:35 .
drwxr-xr-x 3 khazelton khazelton  4096 Jun 27 20:35 ..
drwxr-xr-x 2 khazelton khazelton  4096 Jun 27 20:35 async
-rw-r--r-- 1 khazelton khazelton 12912 Jun 27 20:35 ConnectorFactoryBuiltinImpl.java
-rw-r--r-- 1 khazelton khazelton  1041 Jun 27 20:35 ManualConnectorConfiguration.java
-rw-r--r-- 1 khazelton khazelton 14856 Jun 27 20:35 ManualConnectorInstance.java


khazelton@xps:~/opt/midpoint-project-2019-06-27/provisioning/ucf-impl-builtin$ ls -la src/main/java/com/evolveum/midpoint/provisioning/ucf/impl/builtin/async

total 56
drwxr-xr-x 2 khazelton khazelton  4096 Jun 27 20:35 .
drwxr-xr-x 3 khazelton khazelton  4096 Jun 27 20:35 ..
-rw-r--r-- 1 khazelton khazelton 12066 Jun 27 20:35 Amqp091AsyncUpdateSource.java
-rw-r--r-- 1 khazelton khazelton  2769 Jun 27 20:35 AsyncUpdateConnectorConfiguration.java
-rw-r--r-- 1 khazelton khazelton 14643 Jun 27 20:35 AsyncUpdateConnectorInstance.java
-rw-r--r-- 1 khazelton khazelton  3554 Jun 27 20:35 SourceManager.java
-rw-r--r-- 1 khazelton khazelton 10379 Jun 27 20:35 TransformationalAsyncUpdateMessageListener.java
```

- - -
_2019-06-25 18:17 complex2s demo  run-through_

making banderson a grouper sysadmin:


```
[khazelton@ip-172-31-32-222 complex2s]$ cat upload-objects.sh

#!/bin/bash

function upload () {
  local filename=$1
  local regex="midpoint-objects/(.*)/(.*)"
  if [[ $filename =~ $regex ]]
  then
    type="${BASH_REMATCH[1]}"
    oid=`cat $filename | sed -n 's:.*oid=\"\([A-Za-z0-9\-]*\)\".*:\1:p' | sed -n '1 p'`
    echo "Uploading $filename ($type, $oid)"
    curl -k --user administrator:5ecr3t -H "Content-Type: application/xml" -X PUT "https://localhost:8443/midpoint/ws/rest/$type/$oid?options=overwrite&options=raw" --data-binary @$filename
  else
    echo "Skipping $filename"
  fi
}

find midpoint-objects -name "*.xml" | while read filename; do upload $filename; done


'role-grouper-sysadmin' raw details:

<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
      xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
      xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
      xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
      xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
      oid="d48ec05b-fffd-4262-acd3-d9ff63365b62" version="3">

    <name>role-grouper-sysadmin</name>
    <subtype>midpoint-group</subtype>
    <metadata>
        <modifyTimestamp>2019-06-20T17:21:12.778Z</modifyTimestamp>
        <modifierRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType">
            <!-- administrator -->
        </modifierRef>
        <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/model/channels-3#rest</modifyChannel>
        <lastProvisioningTimestamp>2019-06-20T17:21:12.778Z</lastProvisioningTimestamp>
    </metadata>
    <operationExecution id="2">
        <timestamp>2019-06-20T17:21:13.047Z</timestamp>
        <operation>
            <objectDelta>
                <t:changeType>modify</t:changeType>
                <t:objectType>c:RoleType</t:objectType>
            </objectDelta>
            <executionResult>
                <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                <status>success</status>
                <token>1000000000000000836</token>
            </executionResult>
            <objectName>role-grouper-sysadmin</objectName>
        </operation>
        <operation>
            <objectDelta>
                <t:changeType>modify</t:changeType>
                <t:objectType>c:RoleType</t:objectType>
            </objectDelta>
            <executionResult>
                <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.linkShadow</operation>
                <status>success</status>
                <token>1000000000000000837</token>
            </executionResult>
            <objectName>role-grouper-sysadmin</objectName>
            <resourceOid>0a37121f-d515-4a23-9b6d-554c5ef61272</resourceOid>
            <resourceName>OpenLDAP (directory)</resourceName>
        </operation>
        <status>success</status>
        <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType">
            <!-- administrator -->
        </initiatorRef>
        <channel>http://midpoint.evolveum.com/xml/ns/public/model/channels-3#rest</channel>
    </operationExecution>
    <assignment id="1">
        <metadata>
            <modifyTimestamp>2019-06-20T17:21:12.778Z</modifyTimestamp>
            <modifierRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType">
                <!-- administrator -->
            </modifierRef>
            <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/model/channels-3#rest</modifyChannel>
        </metadata>
        <targetRef oid="c691e15a-f30b-4e15-8445-532db07ceeeb" relation="org:default" type="c:RoleType">
            <!-- metarole-midpoint-group -->
        </targetRef>
        <activation>
            <effectiveStatus>enabled</effectiveStatus>
        </activation>
    </assignment>
    <iteration>0</iteration>
    <iterationToken/>
    <roleMembershipRef oid="c691e15a-f30b-4e15-8445-532db07ceeeb" relation="org:default" type="c:RoleType">
        <!-- metarole-midpoint-group -->
    </roleMembershipRef>
    <linkRef oid="9ced646f-5a0b-4893-9ab8-67d75d619913" relation="org:default" type="c:ShadowType">
        <!-- cn=sysadmingroup,ou=midpoint,ou=Groups,dc=internet2,dc=edu -->
    </linkRef>
    <activation>
        <effectiveStatus>enabled</effectiveStatus>
        <enableTimestamp>2019-06-20T17:21:12.509Z</enableTimestamp>
    </activation>
    <identifier>sysadmingroup</identifier>
</role>
```

user banderson upload

$ ./after-installation.sh +
 * Uploading objects... +
Uploading midpoint-objects/users/user-banderson.xml (users, e897468f-20bd-419c-8fc5-1fe60e2600de)

```
[khazelton@ip-172-31-32-222 complex2s]$ cat midpoint-objects/users/user-banderson.xml

<user xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
      oid="e897468f-20bd-419c-8fc5-1fe60e2600de">
    <name>banderson</name>
    <assignment id="1">
        <targetRef oid="d48ec05b-fffd-4262-acd3-d9ff63365b62" relation="org:default" type="c:RoleType">
            <!-- role-grouper-sysadmin -->
        </targetRef>
    </assignment>
    <fullName>Bob Anderson</fullName>
    <givenName>Bob</givenName>
    <familyName>Anderson</familyName>
    <credentials>
        <password>
            <value>password</value>
        </password>
    </credentials>
</user>
```

banderson's roles (view user)

```
Name                    Activation

role-grouper-sysadmin   enabled
role-ldap-basic         enabled
midpoint:test           enabled
```
- - -
_2019-05-23 10:00 use complex(2) to learn about mP operations in IAM context_

Old contents of carryover databases were causing troubles with mP startup. So, answer is delete the old volumes, forcing a rebuild.

```
khazelton@localhost:~/opt/midPoint_container/demo/complex2$ docker-compose down -v

Removing network complex2_net
WARNING: Network complex2_net not found.
Removing volume complex2_grouper_data
Removing volume complex2_source_data
Removing volume complex2_target_data
Removing volume complex2_ldap
Removing volume complex2_midpoint_data
Removing volume complex2_midpoint_mysql
Removing volume complex2_midpoint_home
Removing volume complex2_mq

docker-compose up <= complex2 demo started flawlessly
```



- - -
_2019-05-22 06:47 use complex(2) to learn about mP operations in IAM context_

```
docker rmi -f $(docker images -q) <= gets rid of ALL images, leaving a clean slate

tier/rabbitmq             latest              6f1a0c986a9f        19 hours ago        194MB
tier/midpoint             laboratory          8260270f4aa8        7 days ago          1.36GB
tier/shibboleth_sp        3.0.4_03122019      2a733ba9c55b        3 weeks ago         443MB
tier/shib-idp             latest              c4bca9581b20        5 weeks ago         750MB
centos                    centos7             9f38484d220f        2 months ago        202MB
tier/grouper              2.4.0-a2-u1-w0-p0   e9b60c1f8d95        7 months ago        1.3GB
tier/mariadb              mariadb10           f1a4fd6034f5        7 months ago        1.18GB

some images have to be removed by repository tag, then prune image and container, then rerun docker rmi -f $(docker images -q)

e.g. docker rmi tier/midpoint

cd ~/opt
=> git clone -b laboratory https://github.internet2.edu/TIER/midPoint_container.git <=

Resolving deltas: 100% (1347/1347), done.
khazelton@localhost:~/opt$ cd midPoint_container

khazelton@localhost:~/opt/midPoint_container$ ./build.sh

Downloading midPoint 4.0-SNAPSHOT from https://download.evolveum.com/downloads/midpoint-tier/
--------------------------------------change localhost to co-op.tech in SAML endpoint config_


edit IdP and SP metadata to change endpoints from localhost to co-op.tech

```
cd opt/midPoint_container/demo/complex/configs-and-secrets/grouper/shibboleth
vim idp-metadata.xml
:%s/localhost/co-op.tech/g

cd opt/midPoint_container/demo/complex/configs-and-secrets/midpoint/shibboleth
vim idp-metadata.xml

cd opt/midPoint_container/demo/complex/idp/shibboleth-idp/metadata
vim idp-metadata.xml
vim grouper-sp.xml
vim midpoint-sp.xml

```---
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  227M  100  227M    0     0  9454k      0  0:00:24  0:00:24 --:--:-- 9873k
-----------------------------------------
Checking the download...
OK
Sending build context to Docker daemon  238.2MB
Step 1/46 : FROM tier/shibboleth_sp:3.0.4_03122019
3.0.4_03122019: Pulling from tier/shibboleth_sp
8ba884070f61: Pull complete


---------------------------------------------------------------------------------------
The midPoint containers were successfully built. To start them, execute the following:

(for simple demo)

$ cd /home/khazelton/opt/midPoint_container/demo/simple
$ docker-compose up

(for complex demo)

$ cd /home/khazelton/opt/midPoint_container/demo/complex
$ docker-compose up --build

midPoint build and launch failed:

khazelton@localhost:~$ docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS                     PORTS                                                                     NAMES
5513147888fd        complex_grouper_daemon    "/usr/local/bin/entr…"   4 minutes ago       Up 4 minutes               80/tcp, 443/tcp                                                           complex_grouper_daemon_1
9a4439b66dc0        complex_grouper_ws        "/usr/local/bin/entr…"   4 minutes ago       Up 4 minutes               80/tcp, 0.0.0.0:9443->443/tcp                                             complex_grouper_ws_1
e108ac505f5c        complex_idp               "/usr/bin/startup.sh"    4 minutes ago       Up 4 minutes (healthy)     0.0.0.0:443->443/tcp                                                      complex_idp_1
21ad923a1282        complex_grouper_ui        "/usr/local/bin/entr…"   4 minutes ago       Up 4 minutes               80/tcp, 0.0.0.0:4443->443/tcp                                             complex_grouper_ui_1
7fe7c0b778bc        complex_midpoint_server   "/usr/local/bin/star…"   4 minutes ago       Up 4 minutes (unhealthy)   80/tcp, 0.0.0.0:8443->443/tcp                                             complex_midpoint_server_1
a720d0894e0c        complex_sources           "/opt/bin/start.sh"      4 minutes ago       Up 4 minutes               0.0.0.0:13306->3306/tcp                                                   complex_sources_1
3c0d835cf713        complex_directory         "/bin/sh -c 'rm -rf …"   4 minutes ago       Up 4 minutes               0.0.0.0:389->389/tcp                                                      complex_directory_1
135076c5c453        complex_grouper_data      "/usr/local/bin/entr…"   4 minutes ago       Up 4 minutes               80/tcp, 443/tcp, 0.0.0.0:3306->3306/tcp                                   complex_grouper_data_1
447c8c0ccb21        complex_mq                "/usr/local/bin/demo…"   4 minutes ago       Up 4 minutes               4369/tcp, 5671-5672/tcp, 15671/tcp, 25672/tcp, 0.0.0.0:15672->15672/tcp   complex_mq_1
06063d6fd0ce        tier/mariadb:mariadb10    "/opt/bin/start.sh"      4 minutes ago       Up 4 minutes               0.0.0.0:33306->3306/tcp                                                   complex_midpoint_data_1
3140efd95f2c        complex_targets           "/opt/bin/start.sh"      4 minutes ago       Up 4 minutes               3306/tcp, 0.0.0.0:23306->389/tcp                                          complex_targets_1


grouper_daemon_1   | grouper-api;grouper_error.log;demo;;2019-05-22 12:16:50,012: [DefaultQuartzScheduler_Worker-10] INFO  EventLog.info(156) -  - [c039565f3f1e4935a0ae5ed0b4e12dbc,'GrouperSystem','application'] session: start (2ms)
midpoint_server_1  |  [proxy:error] [pid 86:tid (111)Connection refused: AH00957: AJP: attempt to connect to 127.0.0.1:9090 (localhost) failed
midpoint_server_1  |  [proxy:error] [pid 86:tid AH00959: ap_proxy_connect_backend disabling worker for (localhost) for 0s
midpoint_server_1  |  [proxy_ajp:error] [pid 86:tid [client 127.0.0.1:48076] AH00896: failed to make connection to backend: localhost
midpoint_server_1  | httpd;access_log;demo;;httpd;access_log;demo;;127.0.0.1 - - [22/May/2019:12:16:54 +0000] "GET /midpoint/actuator/health HTTP/1.1" 503 299 "-" "curl/7.29.0"

midpoint_server_1  | midpoint;midpoint.log;demo;;Caused by: com.evolveum.midpoint.util.exception.SystemException: Database schema problem: Database schema is not compatible with the executing code.;;Current version is: 4.0;Required version is: 4.0;;Please resolve this situation immediately.;;Although the declared schema version matches the required version, the validation of the schema did not pass. This may indicate corrupted or inaccessible (parts of) the database schema.;Validation result: Schema-validation: missing column [requestIdentifier] in table [m_audit_event]

grouper_daemon_1   | grouper-api;grouper_error.log;demo;;2019-05-22 12:47:04,018: [DefaultQuartzScheduler_Worker-6] INFO  EventLog.info(156) -  - [9ce66ff4f07448ef81f014c30f02fa66,'GrouperSystem','application'] session: start (0ms)
midpoint_server_1  |  [proxy:error] [pid 85:tid (111)Connection refused: AH00957: AJP: attempt to connect to 127.0.0.1:9090 (localhost) failed
midpoint_server_1  |  [proxy:error] [pid 85:tid AH00959: ap_proxy_connect_backend disabling worker for (localhost) for 0s
midpoint_server_1  |  [proxy_ajp:error] [pid 85:tid [client 127.0.0.1:49658] AH00896: failed to make connection to backend: localhost
midpoint_server_1  | httpd;access_log;demo;;httpd;access_log;demo;;127.0.0.1 - - [22/May/2019:12:47:35 +0000] "GET /midpoint/actuator/health HTTP/1.1" 503 299 "-" "curl/7.29.0"

https://spaces.at.internet2.edu/display/MID/Experiments+with+different+integration+approaches
```

- - -
_2019-05-21 20:13 experiments with complex2 demo_

to see loader jobs, click 'quick links' and choose loader

- - -
_2019-05-21 17:45 further trials with the complex and complex2 demos_

BE SURE TO FOLLOW https://spaces.at.internet2.edu/x/j4LKC <= Experiments with different integration approaches

cd ~/opt
=> git clone -b laboratory https://github.internet2.edu/TIER/midPoint_container.git <=
             ^ ^ ^ ^ ^ ^ ^

cd midPoint_container
./build.sh

cd demo/complex
docker-compose up --build

- - -
_2019-05-21 08:03 change localhost to co-op.tech in SAML endpoint config_


edit IdP and SP metadata to change endpoints from localhost to co-op.tech

```
cd opt/midPoint_container/demo/complex/configs-and-secrets/grouper/shibboleth
vim idp-metadata.xml
:%s/localhost/co-op.tech/g

cd opt/midPoint_container/demo/complex/configs-and-secrets/midpoint/shibboleth
vim idp-metadata.xml

cd opt/midPoint_container/demo/complex/idp/shibboleth-idp/metadata
vim idp-metadata.xml
vim grouper-sp.xml
vim midpoint-sp.xml

```
- - -
_2019-04-04 08:37 building new images for laboratory branch of midPoint_

```
Last login: Wed Apr  3 17:49:14 2019 from 71-82-235-167.dhcp.stpt.wi.charter.com
[khazelton@ip-172-31-32-222 ~]$ docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS                  PORTS                                                                     NAMES
b23b9c40faa0        complex_midpoint_server   "/usr/local/bin/star…"   22 hours ago        Up 22 hours (healthy)   80/tcp, 0.0.0.0:8443->443/tcp                                             complex_midpoint_server_1
53f7415170eb        complex_idp               "/usr/bin/startup.sh"    22 hours ago        Up 22 hours (healthy)   0.0.0.0:443->443/tcp                                                      complex_idp_1
f946c3a6c6cb        complex_grouper_daemon    "/usr/local/bin/entr…"   22 hours ago        Up 22 hours             80/tcp, 443/tcp                                                           complex_grouper_daemon_1
afa5ae8db4d1        complex_grouper_ui        "/usr/local/bin/entr…"   22 hours ago        Up 22 hours             80/tcp, 0.0.0.0:4443->443/tcp                                             complex_grouper_ui_1
c6206387ce2a        complex_grouper_ws        "/usr/local/bin/entr…"   22 hours ago        Up 22 hours             80/tcp, 0.0.0.0:9443->443/tcp                                             complex_grouper_ws_1
7d6e6b723a70        complex_mq                "/usr/local/bin/demo…"   22 hours ago        Up 22 hours             4369/tcp, 5671-5672/tcp, 15671/tcp, 25672/tcp, 0.0.0.0:15672->15672/tcp   complex_mq_1
9eb4b419048a        complex_directory         "/bin/sh -c 'rm -rf …"   22 hours ago        Up 22 hours             0.0.0.0:389->389/tcp                                                      complex_directory_1
a63c331803b0        complex_sources           "/opt/bin/start.sh"      22 hours ago        Up 22 hours             0.0.0.0:13306->3306/tcp                                                   complex_sources_1
e6e692e65ba7        tier/mariadb:mariadb10    "/opt/bin/start.sh"      22 hours ago        Up 22 hours             0.0.0.0:33306->3306/tcp                                                   complex_midpoint_data_1
3417fb147c72        complex_targets           "/opt/bin/start.sh"      22 hours ago        Up 22 hours             3306/tcp, 0.0.0.0:23306->389/tcp                                          complex_targets_1
898d004cd5c6        complex_grouper_data      "/usr/local/bin/entr…"   22 hours ago        Up 22 hours             80/tcp, 443/tcp, 0.0.0.0:3306->3306/tcp                                   complex_grouper_data_1

[khazelton@ip-172-31-32-222 complex2]$ docker images
REPOSITORY                  TAG                      IMAGE ID            CREATED             SIZE
complex_midpoint_server     latest                   63a1cf0108e5        15 minutes ago      1.33GB
complex_idp                 latest                   0ef6a5dd4afc        15 minutes ago      748MB
complex_sources             latest                   c934e46b19fa        15 minutes ago      1.18GB
complex_grouper_ws          latest                   3e206915bf7b        16 minutes ago      1.3GB
complex_directory           latest                   d1148d0f92b4        16 minutes ago      516MB
complex_grouper_data        latest                   80f1ae6d4c00        16 minutes ago      1.73GB
tier/midpoint               latest                   d1be3992441e        17 minutes ago      1.33GB
complex2_midpoint_server    latest                   86dff2f0c90a        29 minutes ago      1.33GB
complex2_grouper_data       latest                   e7a7f1ea3ea1        29 minutes ago      1.73GB
complex2_idp                latest                   0282e6214ca0        13 hours ago        748MB
complex2_sources            latest                   fdcdca167045        13 hours ago        1.18GB
complex2_grouper_ws         latest                   0d7d8e7e4d61        13 hours ago        1.3GB
complex2_directory          latest                   a53fe7035ddd        13 hours ago        516MB
complex2_mq                 latest                   5996925f58ed        13 hours ago        149MB
tier/shibboleth_sp          latest                   9ecf8f6f579d        8 days ago          390MB
tier/shibboleth_sp          3.0.4_03122019           24f764d5a43d        3 weeks ago         448MB
tier/shib-idp               latest                   a3818856d782        7 weeks ago         748MB
complex_mq                  latest                   29824d58bd4b        2 months ago        149MB
complex_targets             latest                   cc963dec8b9c        2 months ago        1.18GB
complex2_targets            latest                   cc963dec8b9c        2 months ago        1.18GB
complex_grouper_ui          latest                   984c6d4ec174        2 months ago        1.3GB
complex2_grouper_ui         latest                   984c6d4ec174        2 months ago        1.3GB
complex2_grouper_daemon     latest                   bca3524c8e3d        2 months ago        1.3GB
complex_grouper_daemon      latest                   bca3524c8e3d        2 months ago        1.3GB
tier/grouper-training-env   ex401.4.end              dff1bfeeab9d        5 months ago        4.16GB
tier/grouper-training-env   ex401.4.1                ae310aadd1eb        5 months ago        4.08GB
tier/grouper-training-env   ex401.3.end              11e2d9ff9bc4        5 months ago        3.99GB
tier/grouper-training-env   ex401.3.7                9e94f37c13ad        5 months ago        3.91GB
tier/grouper-training-env   ex401.3.6                07e6f23f8fb3        5 months ago        3.82GB
tier/grouper-training-env   ex401.3.5                69f9a0385799        5 months ago        3.74GB
tier/grouper-training-env   ex401.3.4                e7edeabf4639        5 months ago        3.65GB
tier/grouper-training-env   ex401.3.3                947ce207a1cd        5 months ago        3.57GB
tier/grouper-training-env   ex401.3.2                36c7c9fa5512        5 months ago        3.48GB
tier/grouper-training-env   ex401.3.1                07c9f93431d7        5 months ago        3.4GB
tier/grouper-training-env   ex401.2.end              e41718a1bad8        5 months ago        3.31GB
tier/grouper-training-env   ex401.2.9                5895cd40e77c        5 months ago        3.23GB
tier/grouper-training-env   ex401.2.8                aa8b7d840c51        5 months ago        3.14GB
tier/grouper-training-env   ex401.2.7                50c01c53d413        5 months ago        3.06GB
tier/grouper-training-env   ex401.2.6                b1c77209c047        5 months ago        2.97GB
tier/grouper-training-env   ex401.2.5                c1a7b48c7fc8        5 months ago        2.89GB
tier/grouper-training-env   ex401.2.4                dd1e93625600        5 months ago        2.8GB
tier/grouper-training-env   ex401.2.3                992b9f05975c        5 months ago        2.72GB
tier/grouper-training-env   ex401.2.2                f3f5dc6c4784        5 months ago        2.63GB
tier/grouper-training-env   ex401.2.1                9edbbbf1ecd6        5 months ago        2.55GB
tier/grouper-training-env   ex401.1.end              f119ab8b9a0b        5 months ago        2.46GB
tier/grouper-training-env   ex401.1.6                83516249ac06        5 months ago        2.38GB
tier/grouper-training-env   ex401.1.5                fd80113d033c        5 months ago        2.38GB
tier/grouper-training-env   ex401.1.4                b6e694fe1628        5 months ago        2.29GB
tier/grouper-training-env   ex401.1.3                7c95f5a29dba        5 months ago        2.21GB
tier/grouper-training-env   ex401.1.2                916ae5f12bc8        5 months ago        2.13GB
tier/grouper-training-env   ex401.1.1                64c859ee44a6        5 months ago        2.05GB
tier/grouper-training-env   ex301.4.1                67c2fbc03b65        5 months ago        1.97GB
tier/grouper-training-env   ex211.1.1                5206d84c31fa        5 months ago        1.97GB
tier/grouper-training-env   ex201.5.end              2fbbeeaca1fe        5 months ago        2.82GB
tier/grouper-training-env   ex201.5.1                46a5df631bf7        5 months ago        2.74GB
tier/grouper-training-env   ex201.4.end              452bb52a39fa        5 months ago        2.65GB
tier/grouper-training-env   ex201.4.1                59cbc4ea4829        5 months ago        2.57GB
tier/grouper-training-env   ex201.3.end              f72189dc47db        5 months ago        2.48GB
tier/grouper-training-env   ex201.3.1                9ba34e41d10c        5 months ago        2.4GB
tier/grouper-training-env   ex201.2.end              7be24fbacb80        5 months ago        2.31GB
tier/grouper-training-env   ex201.2.1                22f4115ed9b0        5 months ago        2.23GB
tier/grouper-training-env   ex201.1.end              06150890465f        5 months ago        2.14GB
tier/grouper-training-env   ex201.1.1                d05191e3d04b        5 months ago        2.06GB
tier/grouper-training-env   ex101.1.1                553b0b18e88c        5 months ago        1.97GB
tier/grouper-training-env   full_demo                2602b6a9a127        5 months ago        2.05GB
tier/grouper-training-env   base                     40fca5af1aef        5 months ago        1.97GB
tier/grouper                2.4.0-a2-u1-w0-p0        e9b60c1f8d95        5 months ago        1.3GB
tier/mariadb                mariadb10                f1a4fd6034f5        5 months ago        1.18GB
tier/shib-idp               181001                   d989885b99e7        5 months ago        731MB
centos                      centos7                  75835a67d134        5 months ago        200MB
tier/grouper                2.4.0-a2-u0-w0-p0-test   12a4ecea0f20        6 months ago        1.3GB
tier/rabbitmq               latest                   ff35f09905a8        6 months ago        149MB
unicon/shibboleth-idp       3.3.3                    cc35e909ae18        10 months ago       622MB
ubuntu-mid101               2018.A.docker            3d6142234d4f        11 months ago       487MB
postgres-mid101             2018.A.docker            59466b56fd0f        11 months ago       37.2MB
openldap-mid101             2018.A.docker            2cc45a8ade87        11 months ago       223MB
osixia/openldap             latest                   6fedb3135d7d        12 months ago       223MB
osixia/openldap             latest                   6fedb3135d7d        12 months ago       223MB
ubuntu                      latest                   f975c5035748        13 months ago       112MB
ubuntu                      xenial                   f975c5035748        13 months ago       112MB
ubuntu                      xenial                   f975c5035748        13 months ago       112MB
postgres                    9.5-alpine               e61724866da9        13 months ago       37.1MB
postgres                    9.5-alpine               e61724866da9        13 months ago       37.1MB
hello-world                 latest                   f2a91732366c        16 months ago       1.85kB
```

- - -
_2019-04-03 19:18 building laboratory branch for grouper-midPoint integration Tests_

during ./build.sh:

```
midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:29,740 [] [main] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Loading datasource.
midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:29,740 [] [main] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Constructing default datasource with connection pooling; JDBC URL: jdbc:mariadb://midpoint_data:3306/registry?characterEncoding=utf8

==> midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:40,642 [] [main] WARN (com.evolveum.midpoint.repo.sql.schemacheck.SchemaChecker): Found a problem with DB schema: Schema-validation: missing table [m_archetype]

midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:41,519 [] [main] INFO (com.evolveum.midpoint.repo.sql.schemacheck.SchemaChecker): The following midPoint tables are present (not necessarily well-defined): [m_acc_cert_campaign, m_acc_cert_case, m_acc_cert_definition, m_acc_cert_wi, m_acc_cert_wi_reference, m_assignment, m_assignment_ext_boolean, m_assignment_ext_date, m_assignment_ext_long, m_assignment_ext_poly, m_assignment_ext_reference, m_assignment_ext_string, m_assignment_extension, m_assignment_policy_situation, m_assignment_reference, m_audit_delta, m_audit_event, m_audit_item, m_audit_prop_value, m_audit_ref_value, m_case_wi, m_case_wi_reference, m_connector_target_system, m_ext_item, m_focus_photo, m_focus_policy_situation, m_object, m_object_ext_boolean, m_object_ext_date, m_object_ext_long, m_object_ext_poly, m_object_ext_reference, m_object_ext_string, m_object_subtype, m_object_text_info, m_operation_execution, m_org_closure, m_org_org_type, m_reference, m_service_type, m_shadow, m_task, m_task_dependent, m_user_employee_type, m_user_organization, m_user_organizational_unit, m_abstract_role, m_case, m_connector, m_connector_host, m_focus, m_form, m_function_library, m_generic_object, m_global_metadata, m_lookup_table, m_lookup_table_row, m_node, m_object_collection, m_object_template, m_org, m_report, m_report_output, m_resource, m_role, m_security_policy, m_sequence, m_service, m_system_configuration, m_trigger, m_user, m_value_policy]
midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:41,519 [] [main] INFO (com.evolveum.midpoint.repo.sql.schemacheck.SchemaChecker): Couldn't find the following midPoint tables: [m_archetype]
midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:41,534 [] [main] WARN (com.evolveum.midpoint.common.CachedResourceBundleMessageSource): ResourceBundle [Midpoint] not found for MessageSource: Can't find bundle for base name Midpoint, locale en_US
midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:41,534 [] [main] WARN (com.evolveum.midpoint.common.CachedResourceBundleMessageSource): ResourceBundle [schema] not found for MessageSource: Can't find bundle for base name schema, locale en_US

==> midpoint_server_1  | midpoint;midpoint.log;demo;;2019-04-04 00:14:41,639 [] [main] ERROR (com.evolveum.midpoint.repo.sql.schemacheck.SchemaChecker):

midpoint;console;demo;;*******************************************************************************
midpoint_server_1  | midpoint;console;demo;;***                                                                         ***
midpoint_server_1  | midpoint;console;demo;;***       Couldn't start midPoint because of a database schema issue.       ***
midpoint_server_1  | midpoint;console;demo;;***                                                                         ***
midpoint_server_1  | midpoint;console;demo;;*******************************************************************************
midpoint_server_1  | midpoint;console;demo;;
midpoint_server_1  | midpoint;console;demo;;Database schema is not compatible with the executing code; however, an upgrade path is available.
midpoint_server_1  | midpoint;console;demo;;
midpoint_server_1  | midpoint;console;demo;;Current version is: 3.9
midpoint_server_1  | midpoint;console;demo;;Required version is: 4.0
midpoint;console;demo;;*******************************************************************************
midpoint_server_1  | midpoint;console;demo;;***                                                                         ***
midpoint_server_1  | midpoint;console;demo;;***       Couldn't start midPoint because of a database schema issue.       ***
midpoint_server_1  | midpoint;console;demo;;***                                                                         ***
midpoint_server_1  | midpoint;console;demo;;*******************************************************************************
midpoint_server_1  | midpoint;console;demo;;
midpoint_server_1  | midpoint;console;demo;;Database schema is not compatible with the executing code; however, an upgrade path is available.
midpoint_server_1  | midpoint;console;demo;;
midpoint_server_1  | midpoint;console;demo;;Current version is: 3.9
midpoint_server_1  | midpoint;console;demo;;Required version is: 4.0
```

- - -
_2018-06-22 15:21 Pour SoW table into SoW Template_

```
@gGd/immutables/pdf/Consulting Agreement.Consultant EVO draft.docx  <= edit this
SoWTasks.ods  <= incorporate this
../ProposalReSoW-TIER-midPoint-container.ods                        <= reference this
https://docs.google.com/document/d/1PQuMamR-Nrzq9OMjCJ19Fw1hcdTim1W3mcIUt0z9oxs/edit?usp=sharing <= SoW notes

@gGd/immutables/pdf/Addendum to Evolveum Partnership Agreement.docx
                .../Evolveum Partnership agreement v1.5 update.pdf

 ../pdf/Internet2-Levvel.IO-Draft-20161013WK.odf
```

- - -
_2018-06-12 16:27 Live demo of schema extension_

https://wiki.evolveum.com/display/midPoint/Live+Demo#LiveDemo-SchemaExtension

xx eduPerson must have a schema extension .xsd file added under ../midpoint/schema  xx
if openldap has eduPerson in its schema, midPoint will pick it up

- - -
_2018-06-07 10:27  Igor, Paul, Bill, Chris, Keith Zoom session_

```
From William Kaufman to Everyone: (10:03)
https://docs.google.com/document/d/1PQuMamR-Nrzq9OMjCJ19Fw1hcdTim1W3mcIUt0z9oxs/edit?usp=sharing

From Evolveum Sales to Everyone: (10:04)
Shib+SpringSec+Apache?
Shipping more system drivers with containers (JimJ)
Cloud, REST, Exchange, …
Monitoring JMX/SNMP vs modern approaches (Steven)

From Paul Caskey to Everyone: (10:11)
SAML 2.0 Implementation Profile Version 1.0:

https://kantarainitiative.org/confluence/display/fiwg/Working+Drafts?preview=%2F41649836%2F96437097%2FSAML+V2.0+Implementation+Profile+for+Federation+Interoperability+Version+1.0.pdf

From William Kaufman to Everyone: (10:20)
https://spaces.internet2.edu/x/PZaTBg

From Evolveum Sales to Everyone: (10:22)
We are not covering all items in the SoW proposal as stated here: 	https://spaces.internet2.edu/display/TPWG/TIER+midPoint+-+Docker+Reference+Implementation 
Some items are out-of-scope, like messaging, one has to review the SoW and the document and update some of those to make sure we are aligned.
```

- - -
_2018-05-26 15:54  midPoint training LDAP connector config  ~/_notesPlus/mP2OpenLdapConfig.xml_

```
010   <name>OpenLDAP</name>
011   <description>LDAP resource using a ConnId LDAP connector. It contains configuration for use with OpenLDAP servers.</description>

123   <gen155:host>midpoint2.testbed.tier.internet2.edu</gen155:host>
124   <gen155:port>10389</gen155:port>
125   <gen155:bindDn>cn=admin,dc=example,dc=com</gen155:bindDn>
126   <gen155:bindPassword>
127      <t:encryptedData>...

139   <gen155:baseContext>dc=example,dc=com</gen155:baseContext>

1434  <kind>account</kind>
1435  <displayName>Normal Account</displayName>
1436  <default>true</default>...

1480        <attribute id="5">
1481          <c:ref>ri:cn</c:ref>
1482            <displayName>Common Name</displayName>
1483            <limitations>
1484               <minOccurs>0</minOccurs>
1485               <access>
1486                  <read>true</read>
1487                  <add>true</add>
1488                  <modify>true</modify>
1489               </access>
1490            </limitations>
1491            <tolerant>false</tolerant>
1492            <exclusiveStrong>false</exclusiveStrong>
1493            <outbound>
1494               <source>
1495                  <c:path>$user/fullName</c:path>
1496               </source>
1497            </outbound>
1498         </attribute>

1640      <objectType id="2">
1641         <kind>entitlement</kind>
1642         <intent>ldapGroup</intent>
1643         <displayName>LDAP Group</displayName>
1644         <objectClass>ri:groupOfNames</objectClass>
1645         <attribute id="15">
1646            <c:ref>ri:dn</c:ref>
1647            <matchingRule xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3">mr:stringIgnoreCase</matchingRule>
1648            <outbound>
1649               <source>
1650                  <c:path>$focus/identifier</c:path>
1651               </source>
1652              <expression>
1653                  <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
1654                          xsi:type="c:ScriptExpressionEvaluatorType">
1655                     <code>
1656							return 'cn=' + identifier + ',ou=groups,dc=example,dc=com'
1657							</code>
1658                  </script>
1659               </expression>
1660            </outbound>
1661         </attribute>...

1730   <synchronization>
      <objectSynchronization>
         <enabled>true</enabled>
         <correlation>
            <q:description>
	                    Correlation expression is a search query.
	                    Following search queury will look for users that have "name"
	                    equal to the "uid" attribute of the account. Simply speaking,
	                    it will look for match in usernames in the IDM and the resource.
	                    The correlation rule always looks for users, so it will not match
	                    any other object type.
	                </q:description>
            <q:equal>
               <q:path>name</q:path>
               <expression>
                  <path>
								declare namespace ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3";
								$account/attributes/ri:uid
							</path>
               </expression>
            </q:equal>
         </correlation>
         <reaction>
            <situation>linked</situation>
            <synchronize>true</synchronize>
         </reaction>
         <reaction>
            <situation>deleted</situation>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlink</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unlinked</situation>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unmatched</situation>
            <synchronize>true</synchronize>
            <action/>
         </reaction>
      </objectSynchronization>
```

- - -
_2018-05-24 20:55  /home/kh/docker-images/389-ds and /opt/mid101 coexisting; both use port 10389_

```
- stop the trial 389-ds container to free port 10389

[kh@metazome 389-ds]$ sudo docker kill ldap-server
ldap-server

/home/kh/docker-images/389-ds

- now load midPoint container with OpenLDAP

[kh@metazome 389-ds]$ cd /opt/mid101
[kh@metazome mid101]$ sudo docker-compose up
Creating network "mid101_default" with the default driver
Creating mid101_openldap_1 ... done
Creating mid101_postgres_1 ... done
Creating mp-training       ... done
Attaching to mid101_openldap_1, mid101_postgres_1, mp-training
openldap_1     | *** CONTAINER_LOG_LEVEL = 3 (info)
openldap_1     | *** Search service in CONTAINER_SERVICE_DIR = /container/service :
...
mp-training    | 2018-05-25 02:09:29,052 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-databasetable version: 1.4.2.0
mp-training    | 2018-05-25 02:09:29,079 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-ldap version: 1.5.1
mp-training    | 2018-05-25 02:09:33,747 [] [main] INFO (com.evolveum.midpoint.wf.impl.WfHook): Workflow change hook is not registered, because workflows are disabled.
mp-training    | 2018-05-25 02:09:35,009 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization.
mp-training    | 2018-05-25 02:09:35,060 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (version 3)
mp-training    | 2018-05-25 02:09:35,061 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration

[kh@metazome ~]$ sudo docker ps
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                                            NAMES
a5e9b537a890        ubuntu-mid101:2018.A.docker     "/midpoint-entrypoin…"   3 minutes ago       Up 3 minutes        0.0.0.0:18080->8080/tcp                          mp-training
4a64183fc9fa        postgres-mid101:2018.A.docker   "docker-entrypoint.s…"   3 minutes ago       Up 3 minutes        0.0.0.0:15432->5432/tcp                          mid101_postgres_1
3474234bbf6d        openldap-mid101:2018.A.docker   "/container/tool/run"    3 minutes ago       Up 3 minutes        0.0.0.0:10389->389/tcp, 0.0.0.0:10636->636/tcp   mid101_openldap_1
[kh@metazome ~]$
```

browse to cerif.org:18080/midpoint   success

- - -
_2018-04-13 ?_

```
midpoint@mp-training:/$ ls -la /opt/training/midpoint/var

drwxr-xr-x. 11 midpoint midpoint  173 May  1 18:30 .
drwxr-xr-x.  6 midpoint midpoint  141 May  1 21:08 ..
-rw-rw----.  1 midpoint midpoint 1603 Apr 11 16:14 config.xml
drwxrwxr-x.  2 midpoint midpoint    6 Apr 11 16:15 export
drwxrwxr-x.  2 midpoint midpoint   88 May  1 21:08 icf-connectors
drwxrwxr-x.  2 midpoint midpoint    6 Apr 11 16:15 idm-legacy
drwxrwxr-x.  2 midpoint midpoint    6 Apr 11 16:15 import
-rw-rw----.  1 midpoint midpoint  502 Apr 11 16:16 keystore.jceks
drwxrwxr-x.  2 midpoint midpoint    6 Apr 11 16:15 lib
drwxrwxr-x.  2 midpoint midpoint 4096 May  2 10:30 log
drwxrwxr-x.  2 midpoint midpoint    6 Apr 11 16:15 schema
drwxrwxr-x.  2 midpoint midpoint    6 May  1 21:09 tmp
drwxrwxr-x.  3 midpoint midpoint   20 Apr 11 16:15 work
```

- - -
_2018-04-13 15:55  REST API tests from mP2 host_

- Retrieve representation of the user that was created in the Sentrifugo SoR:

```
</t:object>[khazelton@ip-172-31-32-222 ~]$

curl http://midpoint2.testbed.tier.internet2.edu:18080/ws/rest/users/3170d15b-d60-283052113a80  --user  administrator:5ecr3t -H "Content-Type: application/xml" -X GET

<user xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
      xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
      xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
      xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
      oid="3170d15b-d6cf-4e72-9f60-283052113a80"
      version="4">

   <name>EMPP00032</name>

   <metadata>
      <requestTimestamp>2018-04-11T18:13:39.266Z</requestTimestamp>
      <requestorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <createTimestamp>2018-04-11T18:13:39.686Z</createTimestamp>
      <creatorRef oid="00000000-0000-0000-0000-000000000002"
                  relation="org:default"
                  type="c:UserType"/>
      <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
      <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                     relation="org:default"
                     type="c:TaskType"/>
      <modifyTimestamp>2018-04-13T18:56:45.536Z</modifyTimestamp>
      <modifierRef oid="00000000-0000-0000-0000-000000000002"
                   relation="org:default"
                   type="c:UserType"/>
      <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
      <lastProvisioningTimestamp>2018-04-13T18:56:45.535Z</lastProvisioningTimestamp>
   </metadata>

   <operationExecution id="1">
      <timestamp>2018-04-11T18:13:39.838Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>add</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000828</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <taskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
               relation="org:default"
               type="c:TaskType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</channel>
   </operationExecution>

   <operationExecution id="3">
      <timestamp>2018-04-13T18:56:45.841Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000009278</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
      </operation>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.linkShadow</operation>
            <status>success</status>
            <token>1000000000000009279</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
         <resourceOid>d0811790-1d80-11e4-86b2-3c970e467874</resourceOid>
         <resourceName>OpenLDAP</resourceName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>

   <linkRef oid="fa85efe7-4189-4919-bb0d-d57173394b6b"
            relation="org:default"
            type="c:ShadowType"/>

   <assignment id="2">
      <metadata>
         <requestTimestamp>2018-04-13T18:56:45.343Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-13T18:56:45.536Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
      </metadata>

      <targetRef oid="00000000-0000-0000-0000-000000000008"
                 relation="org:default"
                 type="c:RoleType"/>

      <activation>
         <effectiveStatus>enabled</effectiveStatus>
      </activation>
   </assignment>

   <activation>
      <effectiveStatus>enabled</effectiveStatus>
      <enableTimestamp>2018-04-11T18:13:39.266Z</enableTimestamp>
   </activation>

   <iteration>0</iteration>
   <iterationToken/>

   <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                      relation="org:default"
                      type="c:RoleType"/>

   <fullName>Ethan Kromhout</fullName>
   <givenName>Ethan</givenName>
   <familyName>Kromhout</familyName>
   <title>Developer</title>
   <emailAddress>ethan32@unc.edu</emailAddress>
   <telephoneNumber>9194450056</telephoneNumber>
   <organizationalUnit>TIER</organizationalUnit>
   <credentials>
      <password>
         <metadata>
            <createTimestamp>2018-04-11T18:13:39.266Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
            <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                           relation="org:default"
                           type="c:TaskType"/>
         </metadata>
         <value>
            <t:encryptedData>
               <t:encryptionMethod>
                  <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
               </t:encryptionMethod>
               <t:keyInfo>
                  <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
               </t:keyInfo>
               <t:cipherData>
                  <t:cipherValue>LNtLjBEHyDxnFrM8c/4lrIDeN+OAaaDfdCsw+dcCOxg=</t:cipherValue>
               </t:cipherData>
            </t:encryptedData>
         </value>
      </password>
   </credentials>


[khazelton@ip-172-31-32-222 ~]$
curl http://midpoint2.testbed.tier.internet2.edu:18080/ws/rest/users  --user  administrator:5ecr3t -H "Content-Type: application/xml" -X GET

<t:object xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:type="apti:ObjectListType">
   <apti:object oid="00000000-0000-0000-0000-000000000002"
                version="20"
                xsi:type="c:UserType">
      <name>administrator</name>
      <metadata>
         <requestTimestamp>2018-04-11T16:16:27.282Z</requestTimestamp>
         <createTimestamp>2018-04-11T16:16:27.506Z</createTimestamp>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
      </metadata>
      <operationExecution id="2">
         <timestamp>2018-04-11T16:16:27.600Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000063</token>
            </executionResult>
            <objectName>administrator</objectName>
         </operation>
         <status>success</status>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</channel>
      </operationExecution>
      <assignment id="1">
         <metadata>
            <requestTimestamp>2018-04-11T16:16:27.282Z</requestTimestamp>
            <createTimestamp>2018-04-11T16:16:27.506Z</createTimestamp>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T16:16:27.308Z</enableTimestamp>
         <lockoutStatus>normal</lockoutStatus>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>midPoint Administrator</fullName>
      <givenName>midPoint</givenName>
      <familyName>Administrator</familyName>
      <credentials>
         <password>
            <failedLogins>0</failedLogins>
            <lastSuccessfulLogin>
               <timestamp>2018-04-13T20:54:19.763Z</timestamp>
               <from>172.31.32.222</from>
            </lastSuccessfulLogin>
            <previousSuccessfulLogin>
               <timestamp>2018-04-13T20:04:12.879Z</timestamp>
               <from>174.230.33.12</from>
            </previousSuccessfulLogin>
            <lastFailedLogin>
               <timestamp>2018-04-12T12:56:38.643Z</timestamp>
               <from>207.210.1.255</from>
            </lastFailedLogin>
            <metadata>
               <createTimestamp>2018-04-11T16:16:27.308Z</createTimestamp>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>WMiBUS4N3bLie7wLQJAvOGWjp6VQNtWL4AsOLjs2rIM=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                version="28"
                xsi:type="c:UserType">
      <name>khazelton</name>
      <description>Associate Admin</description>
      <metadata>
         <requestTimestamp>2018-04-11T16:52:54.723Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T16:52:54.894Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         <modifyTimestamp>2018-04-12T18:26:11.887Z</modifyTimestamp>
         <modifierRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
         <lastProvisioningTimestamp>2018-04-12T18:26:11.887Z</lastProvisioningTimestamp>
      </metadata>
      <lifecycleState>active</lifecycleState>
      <operationExecution id="1">
         <timestamp>2018-04-11T16:52:54.957Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000385</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-11T16:53:40.588Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000491</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="5">
         <timestamp>2018-04-12T17:58:30.901Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000003298</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="6">
         <timestamp>2018-04-12T18:26:12.085Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000004194</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-11T16:53:40.427Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-11T16:53:40.496Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <assignment id="4">
         <metadata>
            <requestTimestamp>2018-04-12T17:58:26.828Z</requestTimestamp>
            <requestorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-12T17:58:30.722Z</createTimestamp>
            <creatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000008"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T16:52:54.761Z</enableTimestamp>
         <lockoutStatus>normal</lockoutStatus>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                         relation="org:default"
                         type="c:RoleType"/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Keith Hazelton</fullName>
      <givenName>Keith</givenName>
      <familyName>Hazelton</familyName>
      <emailAddress>khazelton@gmail.com</emailAddress>
      <telephoneNumber>6084694523</telephoneNumber>
      <credentials>
         <password>
            <failedLogins>0</failedLogins>
            <lastSuccessfulLogin>
               <timestamp>2018-04-12T23:13:36.628Z</timestamp>
               <from>207.210.1.255</from>
            </lastSuccessfulLogin>
            <previousSuccessfulLogin>
               <timestamp>2018-04-12T23:13:23.403Z</timestamp>
               <from>207.210.1.255</from>
            </previousSuccessfulLogin>
            <lastFailedLogin>
               <timestamp>2018-04-11T16:54:16.424Z</timestamp>
               <from>207.210.1.255</from>
            </lastFailedLogin>
            <metadata>
               <createTimestamp>2018-04-11T16:52:54.761Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>+QLWj6qb3H/EjbfMkBLDaADpVPOY0ITnDpibisoGLHw=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="15487aaf-b43c-4781-91b5-1db3e21c5948"
                version="3"
                xsi:type="c:UserType">
      <name>ekromhout</name>
      <metadata>
         <requestTimestamp>2018-04-11T18:23:29.894Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T18:23:30.046Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         <modifyTimestamp>2018-04-11T18:24:27.954Z</modifyTimestamp>
         <modifierRef oid="00000000-0000-0000-0000-000000000002"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
      </metadata>
      <operationExecution id="1">
         <timestamp>2018-04-11T18:23:30.106Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000942</token>
            </executionResult>
            <objectName>ekromhout</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-11T18:24:28.022Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000001050</token>
            </executionResult>
            <objectName>ekromhout</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-11T18:24:27.895Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-11T18:24:27.954Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T18:23:29.902Z</enableTimestamp>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Ethan Kromhout</fullName>
      <givenName>Ethan</givenName>
      <familyName>Kromhout</familyName>
      <emailAddress>ethan@unc.edu</emailAddress>
      <telephoneNumber>9194450056</telephoneNumber>
      <organizationalUnit>UNC Chapel Hill</organizationalUnit>
      <credentials>
         <password>
            <metadata>
               <createTimestamp>2018-04-11T18:23:29.902Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>Cdsl3lafggwjT0lSrEdtemX5VH5HqB30vuaa3LIeykk=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="3170d15b-d6cf-4e72-9f60-283052113a80"
                version="4"
                xsi:type="c:UserType">
      <name>EMPP00032</name>
      <metadata>
         <requestTimestamp>2018-04-11T18:13:39.266Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T18:13:39.686Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
         <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                        relation="org:default"
                        type="c:TaskType"/>
         <modifyTimestamp>2018-04-13T18:56:45.536Z</modifyTimestamp>
         <modifierRef oid="00000000-0000-0000-0000-000000000002"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
         <lastProvisioningTimestamp>2018-04-13T18:56:45.535Z</lastProvisioningTimestamp>
      </metadata>
      <operationExecution id="1">
         <timestamp>2018-04-11T18:13:39.838Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000828</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <taskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                  relation="org:default"
                  type="c:TaskType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-13T18:56:45.841Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000009278</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
         </operation>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.linkShadow</operation>
               <status>success</status>
               <token>1000000000000009279</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
            <resourceOid>d0811790-1d80-11e4-86b2-3c970e467874</resourceOid>
            <resourceName>OpenLDAP</resourceName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <linkRef oid="fa85efe7-4189-4919-bb0d-d57173394b6b"
               relation="org:default"
               type="c:ShadowType"/>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-13T18:56:45.343Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-13T18:56:45.536Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000008"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T18:13:39.266Z</enableTimestamp>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Ethan Kromhout</fullName>
      <givenName>Ethan</givenName>
      <familyName>Kromhout</familyName>
      <title>Developer</title>
      <emailAddress>ethan32@unc.edu</emailAddress>
      <telephoneNumber>9194450056</telephoneNumber>
      <organizationalUnit>TIER</organizationalUnit>
      <credentials>
         <password>
            <metadata>
               <createTimestamp>2018-04-11T18:13:39.266Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
               <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                              relation="org:default"
                              type="c:TaskType"/>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>LNtLjBEHyDxnFrM8c/4lrIDeN+OAaaDfdCsw+dcCOxg=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
</t:object>
```

- - -
_2018-04-12 14:43  more LDAP_

ldapsearch -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -s sub "objectslass=*"

ldapmodify -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -f olcAccess.ldif
_____________________
h6. 2018-04-12 13:01 More LDAP prep on new EC2

[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101
total 24
drwxr-xr-x. 5 midpoint midpoint  126 Mar 27 17:45 .
drwxr-xr-x. 3 root     root       41 Apr 11 16:13 ..
-rw-r--r--. 1 midpoint midpoint 2195 Feb 18 19:20 docker-compose.yaml
-rw-r--r--. 1 midpoint midpoint  120 Apr  6 17:02 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 8196 Apr  6 17:02 .DS_Store
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 mp-openldap
drwxrwxr-x. 2 midpoint midpoint   85 Apr 11 16:13 mp-postgres
drwxrwxr-x. 4 midpoint midpoint 4096 Mar 27 17:45 mp-training
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap
total 16
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 .
drwxr-xr-x. 5 midpoint midpoint  126 Mar 27 17:45 ..
drwxrwxr-x. 3 midpoint midpoint   54 Apr 11 16:13 bootstrap
-rw-r--r--. 1 midpoint midpoint  120 Feb 18 19:27 Dockerfile
-rw-r--r--. 1 midpoint midpoint  120 Mar 27 17:48 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 6148 Mar 27 17:48 .DS_Store
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap/bootstrap
total 12
drwxrwxr-x. 3 midpoint midpoint   54 Apr 11 16:13 .
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 ..
-rw-r--r--. 1 midpoint midpoint  120 Mar 29 00:16 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 6148 Mar 29 00:16 .DS_Store
drwxrwxr-x. 2 midpoint midpoint  113 Feb 18 19:27 ldif
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap/Dockerfile
-rw-r--r--. 1 midpoint midpoint 120 Feb 18 19:27 /opt/mid101/mp-openldap/Dockerfile
[khazelton@ip-172-31-32-222 ~]$ cat /opt/mid101/mp-openldap/Dockerfile
FROM osixia/openldap
MAINTAINER ivan.noris@evolveum.com

ADD bootstrap /container/service/slapd/assets/config/bootstrap
[khazelton@ip-172-31-32-222 ~]$ ls -la /container
ls: cannot access /container: No such file or directory
[khazelton@ip-172-31-32-222 ~]$ sudo docker exec -it 2ab3a6209c26 /bin/bash

- look at /container/service/slapd/assets/config/bootstrap

root@example:/# ls -la /container

total 0
drwxr-xr-x. 1 root root  51 Apr 11 23:51 .
drwxr-xr-x. 1 root root  90 Apr 11 23:51 ..
drwx------. 1 root root  39 Apr 11 23:51 environment
drwxr-xr-x. 6 root root  90 Apr 11 23:51 run
drwxr-xr-x. 1 root root  51 Apr 11 23:51 service
drwxrwxr-x. 1 root root  24 Mar 15 15:34 service-available
drwxrwxr-x. 2 root root 180 Mar 15 13:28 tool

root@example:/# ls -la /container/service/slapd/assets/config/bootstrap

total 16
drwxrwxr-x. 1 openldap openldap   85 Apr 11 23:50 .
drwxrwxr-x. 1 openldap openldap   53 Dec  5 14:25 ..
-rw-r--r--. 1 openldap openldap  120 Mar 29 00:16 ._.DS_Store
-rw-r--r--. 1 openldap openldap 6148 Mar 29 00:16 .DS_Store
drwxrwxr-x. 1 openldap openldap  246 Apr 11 23:51 ldif
-rw-rw-r--. 1 openldap openldap   75 Dec  5 14:25 README.md
drwxrwxr-x. 1 openldap openldap  105 Apr 11 23:51 schema
root@example:/#

doot@example:/# cat /container/service/slapd/assets/config/bootstrap/README.md

Bootstrap config, for a container started without an existing ldap config.

/container/service/slapd/assets/config/bootstrap/schema/mmc/README.md

Mandriva Management Console (MMC) ldap schemas, delete the forlder if not needed ;)
_____________________
h6. 2018-04-12 11:24  More LDAP prep on old EC2

- from oMbP connect to older EC2 with OpenLDAP installed

ssh kh@demo.testbed.tier.internet2.edu -i ~/.ssh/kh

_____________________
h6. 2018-04-12 08:10  troubleshooting LDAP

ldapadd -D "cn=admin,dc=example,dc=com" -w secret -H ldap://localhost:10389 -f ldif/100-example.ldif

-D "cn=admin,dc=example,dc=com" -w secret
ldapadd -Y EXTERNAL -H ldapi:/// -f admin.ldif

ldapsearch -x -W -D "cn=admin,dc=example,dc=com" -b "" -s base -H ldap://localhost

ldapsearch -D "cn=admin,dc=example,dc=com" -w secret -s sub "objectslass=*"

- PROGRESS (from ec2 host for midPoint Docker images)

[khazelton@ip-172-31-32-222 bootstrap]$ cat ldif/100-example.ldif

dn: ou=people,dc=example,dc=com
changetype: add
objectClass: organizationalUnit
ou: people

dn: ou=groups,dc=example,dc=com
changetype: add
objectClass: organizationalUnit
ou: groups

dn: ou=Administrators,dc=example,dc=com
changetype: add
objectclass: top
objectclass: organizationalunit
ou: Administrators

dn: cn=idm,ou=Administrators,dc=example,dc=com
changetype: add
objectclass: top
objectclass: person
cn: idm
sn: IDM Administrator
description: Special LDAP acccount used by the IDM
  to access the LDAP data.
# password is: secret
userPassword: {SSHA}IHr3vWr2J8CSCrQ6aR2xUD5SP1e+jTPJ

dn: cn=TerraForming,ou=groups,dc=example,dc=com
changetype: add
objectClass: groupOfNames
cn: TerraForming
member: cn=whatever,o=wherever

[khazelton@ip-172-31-32-222 bootstrap]$ ldapadd -D "cn=admin,dc=example,dc=com" -w secret -H ldap://localhost:10389 -f ldif/100-example.ldif

adding new entry "ou=people,dc=example,dc=com"
adding new entry "ou=groups,dc=example,dc=com"
adding new entry "ou=Administrators,dc=example,dc=com"
adding new entry "cn=idm,ou=Administrators,dc=example,dc=com"
adding new entry "cn=TerraForming,ou=groups,dc=example,dc=com"

[khazelton@ip-172-31-32-222 bootstrap]$ ldapsearch -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -s sub "objectslass=*"

# extended LDIF
#
# LDAPv3
# base <> (default) with scope subtree
# filter: objectslass=*
# requesting: ALL
#

# search result
search: 2
result: 32 No such objecth6. 2018-04-11 18:18  problems with openldap container solved by installing docker-ce and rebuilding

| *** Running /container/run/startup/:ssl-tools...
openldap_1     | *** Running /container/run/startup/slapd...
openldap_1     | chown: changing ownership of '/var/lib/ldap': Permission denied
openldap_1     | *** /container/run/startup/slapd failed with status 1
_____________________
h6. 2018-04-11 12:05  get mP running on midpoint2.testbed.tier.internet2.edu

-from oMbP

scp ~/mid101.tar.gz khazelton@midpoint2.testbed.tier.internet2.edu:

ssh -i ~/.ssh/kh_rsa -l khazelton midpoint2.testbed.tier.internet2.edu

_____________________
h6. 2018-04-08 15:49  formula for quick setup of a Linode centos host ready for Docker containers

- create and launch a base Centos 7 linode

- root session via lish console

# disable selinux
vim /etc/sysconfig/selinux
...
SELINUX=disable
...
reboot
...
sestatus

# configure ssh for no password, public key authN, no root ssh, port 58......
cd /etc/ssh
rm /etc/ssh/sshd_config
vim /etc/ssh/sshd_config
[paste contents of sshd_config from oMbP:_notesPlus/sshd_config]
save

service sshd restart

adduser kh
passwd kh
usermod -a -G wheel kh
su kh

cd /home/kh/
mkdir .ssh
chmod 700 .ssh
cd .ssh
vim authorized_keys
[copy/paste oMbP:.ssh/kh_rsa.pub]
chmod 600 .ssh/authorized_keys  <== if not already correct

- exit lish

ssh -p 58.... -i ~/.ssh/kh_rsa -l kh cerif.org

- install docker

sudo yum install docker

[kh@metazome ~]$ sudo systemctl start docker
[kh@metazome ~]$ sudo systemctl enable docker  <== enables restart at boot time
[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

- showing whole process

---------- history
    1  cd /home/kh
    2  mkdir .ssh
    3  chmod 700 .ssh
    4  cd .ssh
    ...
    9  vim authorized_keys
       [copy/paste oMbP:.ssh/kh_rsa.pub]
   ...
   11  chmod 600 authorized_keys
   ...
   18  sudo yum install docker
   19  sudo systemctl start docker
   20  docker -v
   21  sudo systemctl enable docker
   22  sudo systemctl status docker
   ...
   28  sudo yum install epel-release
   29  sudo yum install -y python-pip
   32  sudo pip install --upgrade pip
   33  sudo yum upgrade python*
   30  sudo pip install docker-compose
   ...   test docker install ...
   39  cd ~/
   40  mkdir hiUrth
   41  cd hiUrth
   42  nano docker-compose.yml
   43  cat docker-compose.yml
       my-test:
       image: hello-world
       -----
----------
[kh@metazome hiUrth]$ sudo docker-compose up
[sudo] password for kh:
Pulling my-test (hello-world:)...
Trying to pull repository docker.io/library/hello-world ...
latest: Pulling from docker.io/library/hello-world
ca4f61b1923c: Pull complete
Digest: sha256:97ce6fa4b6cdc0790cda65fe7290b74cfebd9fa0c9b8c38e979330d547d22ce1
Status: Downloaded newer image for docker.io/hello-world:latest
Creating hiurth_my-test_1 ... done
Attaching to hiurth_my-test_1
my-test_1  |
my-test_1  | Hello from Docker!
my-test_1  | This message shows that your installation appears to be working correctly.
my-test_1  |
my-test_1  | To generate this message, Docker took the following steps:
my-test_1  |  1. The Docker client contacted the Docker daemon.
my-test_1  |  2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
my-test_1  |     (amd64)
my-test_1  |  3. The Docker daemon created a new container from that image which runs the
my-test_1  |     executable that produces the output you are currently reading.
my-test_1  |  4. The Docker daemon streamed that output to the Docker client, which sent it
my-test_1  |     to your terminal.
my-test_1  |
my-test_1  | To try something more ambitious, you can run an Ubuntu container with:
my-test_1  |  $ docker run -it ubuntu bash
my-test_1  |
my-test_1  | Share images, automate workflows, and more with a free Docker ID:
my-test_1  |  https://cloud.docker.com/
my-test_1  |
my-test_1  | For more examples and ideas, visit:
my-test_1  |  https://docs.docker.com/engine/userguide/
my-test_1  |
hiurth_my-test_1 exited with code 0

[kh@metazome hiUrth]$ sudo docker run -it ubuntu bash
Unable to find image 'ubuntu:latest' locally
Trying to pull repository docker.io/library/ubuntu ...
latest: Pulling from docker.io/library/ubuntu
22dc81ace0ea: Pull complete
1a8b3c87dba3: Pull complete
91390a1c435a: Pull complete
07844b14977e: Pull complete
b78396653dae: Pull complete
Digest: sha256:e348fbbea0e0a0e73ab0370de151e7800684445c509d46195aef73e090a49bd6
Status: Downloaded newer image for docker.io/ubuntu:latest

root@8c46e788edcd:/# ls -la
total 72
drwxr-xr-x   1 root root 4096 Apr 10 23:36 .
drwxr-xr-x   1 root root 4096 Apr 10 23:36 ..
-rwxr-xr-x   1 root root    0 Apr 10 23:36 .dockerenv
drwxr-xr-x   2 root root 4096 Feb 28 19:14 bin
drwxr-xr-x   2 root root 4096 Apr 12  2016 boot
drwxr-xr-x   5 root root  360 Apr 10 23:36 dev
drwxr-xr-x   1 root root 4096 Apr 10 23:36 etc
drwxr-xr-x   2 root root 4096 Apr 12  2016 home
drwxr-xr-x   8 root root 4096 Sep 13  2015 lib
drwxr-xr-x   2 root root 4096 Feb 28 19:14 lib64
drwxr-xr-x   2 root root 4096 Feb 28 19:13 media
drwxr-xr-x   2 root root 4096 Feb 28 19:13 mnt
drwxr-xr-x   2 root root 4096 Feb 28 19:13 opt
dr-xr-xr-x 141 root root    0 Apr 10 23:36 proc
drwx------   2 root root 4096 Feb 28 19:14 root
drwxr-xr-x   1 root root 4096 Apr 10 23:36 run
drwxr-xr-x   1 root root 4096 Mar  6 22:17 sbin
drwxr-xr-x   2 root root 4096 Feb 28 19:13 srv
dr-xr-xr-x  13 root root    0 Apr 10 23:36 sys
drwxrwxrwt   2 root root 4096 Feb 28 19:14 tmp
drwxr-xr-x   1 root root 4096 Feb 28 19:13 usr
drwxr-xr-x   1 root root 4096 Feb 28 19:14 var

root@8c46e788edcd:/# exit
----------

- move midpoint files into place

Keiths-Office-MacBook-Pro:opt khazelton$ scp -P 58263 mid101.tar.gz kh@cerif.org:

[kh@metazome ~]$ pwd
/home/kh
[kh@metazome ~]$ ls -lt

[kh@metazome ~]$ sudo mv mid101.tar.gz /opt

[kh@metazome ~]$ cd /opt

[kh@metazome opt]$ ls -la
total 221840
drwxr-xr-x.  2 root root      4096 Apr 11 01:11 .
drwxr-xr-x  18 root root      4096 Apr 10 21:29 ..
-rw-r--r--   1 kh   kh   227152941 Apr 11 01:03 mid101.tar.gz

[kh@metazome opt]$ sudo tar xvf mid101.tar.gz

[kh@metazome opt]$ tree
.
├── mid101
│   ├── docker-compose.yaml
│   ├── mp-openldap
│   │   ├── bootstrap
│   │   │   └── ldif
│   │   │       ├── 03-memberOf.ldif
│   │   │       ├── 03-sssvlv.ldif
│   │   │       ├── 100-example.ldif
│   │   │       └── 110-example-idmadmin-aci.ldif
│   │   └── Dockerfile
│   ├── mp-postgres
│   │   ├── 10-create-midpoint.sql
│   │   ├── 20-postgres-3.7-all.sql
│   │   └── Dockerfile
│   └── mp-training
│       ├── config-postgresql.xml
│       ├── custom_connectors
│       │   ├── connector-csv-2.1.99.jar
│       │   └── scriptedsql-connector-1.1.2.0.em3.jar
│       ├── Dockerfile
│       ├── extension-example.xsd
│       ├── mid101-flatfiles [error opening dir]
│       ├── mid101-flatfiles.zip
│       ├── midpoint-3.7.1-SNAPSHOT-dist.tar.gz
│       └── midpoint-entrypoint.sh
└── mid101.tar.gz

8 directories, 18 files

[kh@metazome mid101]$ sudo docker-compose build

Building openldap
Step 1/3 : FROM osixia/openldap
Trying to pull repository docker.io/osixia/openldap ...
latest: Pulling from docker.io/osixia/openldap
2a72cbf407d6: Pull complete
cae303c26086: Pull complete
32d1584efa46: Pull complete
c3f4b8058465: Pull complete
a986821b4b4d: Pull complete
ac57fad97e90: Pull complete
d1e97f43f6f1: Pull complete
31e52d2f2b7f: Pull complete
Digest: sha256:bb6485f1bf63d5b52318d11dcf2285d83285c893eb06a2bbe36460ccb28eb4c8
Status: Downloaded newer image for docker.io/osixia/openldap:latest
 ---> 6fedb3135d7d
Step 2/3 : MAINTAINER ivan.noris@evolveum.com
 ---> Running in 15c01f475577
 ---> 9969d4a28568
Removing intermediate container 15c01f475577
Step 3/3 : ADD bootstrap /container/service/slapd/assets/config/bootstrap
 ---> 6808332a4b47
...
...
Step 6/8 : COPY midpoint-entrypoint.sh /midpoint-entrypoint.sh
 ---> 350e7ceabcb1
Removing intermediate container 47826748f175
Step 7/8 : ENTRYPOINT /midpoint-entrypoint.sh
 ---> Running in 5a0674c25129
 ---> 7be81969282b
Removing intermediate container 5a0674c25129
Step 8/8 : CMD /bin/su -c /usr/bin/java -Xmx2048M -Xms2048M -Dfile.encoding=UTF8 -Dmidpoint.home=/opt/training/midpoint/var -jar /opt/training/midpoint/lib/midpoint.war midpoint
 ---> Running in c7826f14ebfe
 ---> 0a7b14dd951e
Removing intermediate container c7826f14ebfe
Successfully built 0a7b14dd951e

[kh@metazome mid101]$ sudo docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED              SIZE
ubuntu-mid101               2018.A.docker       0a7b14dd951e        27 seconds ago       487 MB
postgres-mid101             2018.A.docker       7005190955ce        55 seconds ago       37.2 MB
openldap-mid101             2018.A.docker       6808332a4b47        About a minute ago   223 MB
docker.io/osixia/openldap   latest              6fedb3135d7d        3 weeks ago          223 MB
docker.io/ubuntu            latest              f975c5035748        5 weeks ago          112 MB
docker.io/ubuntu            xenial              f975c5035748        5 weeks ago          112 MB
docker.io/postgres          9.5-alpine          e61724866da9        5 weeks ago          37.1 MB
docker.io/hello-world       latest              f2a91732366c        4 months ago         1.85 kB

[kh@metazome mid101]$ sudo docker-compose up

Creating network "mid101_default" with the default driver
Creating volume "mid101_midpoint-volume" with default driver
Creating volume "mid101_openldap-conf-volume" with default driver
Creating volume "mid101_pgdata-volume" with default driver
Creating volume "mid101_openldap-cert-volume" with default driver
Creating volume "mid101_openldap-data-volume" with default driver
Creating mid101_openldap_1 ... done
Creating mid101_postgres_1 ... done
Creating mp-training       ... done
Attaching to mid101_postgres_1, mid101_openldap_1, mp-training
...

- Browse to http://cerif.org:18080/midpoint

- successful login to midPoint UI as administrator

- QED: These notes show one how to start w bare CentOS 7.4 and end up with a functioning midPoint application

[kh@metazome mid101]$ sudo docker exec -u midpoint -it 189dbed08195 /bin/bash

midpoint@mp-training:/$ ls -la
total 76
drwxr-xr-x   1 root root 4096 Apr 11 01:21 .
drwxr-xr-x   1 root root 4096 Apr 11 01:21 ..
-rwxr-xr-x   1 root root    0 Apr 11 01:21 .dockerenv
drwxr-xr-x   1 root root 4096 Apr 11 01:20 bin
drwxr-xr-x   2 root root 4096 Apr 12  2016 boot
drwxr-xr-x   5 root root  360 Apr 11 01:22 dev
drwxr-xr-x   1 root root 4096 Apr 11 01:21 etc
drwxr-xr-x   1 root root 4096 Apr 11 01:20 home
drwxr-xr-x   1 root root 4096 Sep 13  2015 lib
drwxr-xr-x   2 root root 4096 Feb 28 19:14 lib64
drwxr-xr-x   2 root root 4096 Feb 28 19:13 media
-rwxr-xr-x   1 root root  810 Feb 18 19:33 midpoint-entrypoint.sh
drwxr-xr-x   2 root root 4096 Feb 28 19:13 mnt
drwxr-xr-x   1 root root 4096 Apr 11 01:20 opt
dr-xr-xr-x 168 root root    0 Apr 11 01:22 proc
drwx------   2 root root 4096 Feb 28 19:14 root
drwxr-xr-x   1 root root 4096 Apr 11 01:20 run
drwxr-xr-x   1 root root 4096 Mar  6 22:17 sbin
drwxr-xr-x   2 root root 4096 Feb 28 19:13 srv
dr-xr-xr-x  13 root root    0 Apr 10 23:37 sys
drwxrwxrwt   1 root root 4096 Apr 11 01:43 tmp
drwxr-xr-x   1 root root 4096 Feb 28 19:13 usr
drwxr-xr-x   1 root root 4096 Feb 28 19:14 var

midpoint@mp-training:/$ cat opt/training/midpoint/var/log/midpoint.log

2018-04-11 01:22:08,885 [] [main] INFO (org.springframework.boot.SpringApplication):
                   _ _____              _
             _    | |  _  \     _     _| |_
   ___ ____ (_) __| | |_) |___ (_)___|_   _|
  |  _ ` _ `| |/ _  |  __/  _ \| |  _` | |
  | | | | | | | (_| | |  | (_) | | | | | |_
  |_| |_| |_|_|\____|_|  \____/|_|_| |_|\__|  by Evolveum and partners

  Licensed under the Apache License, Version 2.0 see: http://www.apache.org/licenses/LICENSE-2.0
  Version :  3.7.1-SNAPSHOT
  Sources :  https://github.com/Evolveum/midpoint.git  branch:  support-3.7
  Bug reporting system : http://jira.evolveum.com/
  Product information : http://wiki.evolveum.com/display/midPoint


2018-04-11 01:22:09,037 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Starting MidPointSpringApplication on mp-training with PID 14 (/opt/training/midpoint/lib/midpoint.war started by midpoint in /)
2018-04-11 01:22:09,038 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): No active profile set, falling back to default profiles: default
2018-04-11 01:22:14,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): midpoint.home = /opt/training/midpoint/var/
2018-04-11 01:22:14,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/ already exists. Reusing it.
2018-04-11 01:22:14,216 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/icf-connectors'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/idm-legacy'. Creating.
2018-04-11 01:22:14,219 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/log already exists. Reusing it.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/schema'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/import'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/export'. Creating.
2018-04-11 01:22:14,220 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/tmp'. Creating.
2018-04-11 01:22:14,220 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/lib'. Creating.
2018-04-11 01:22:14,223 [] [main] INFO (com.evolveum.midpoint.init.StartupConfiguration): Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
2018-04-11 01:22:21,756 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.ConfigurablePrismContextFactory): Loading extension schemas from folder '/opt/training/midpoint/var//schema'.
2018-04-11 01:22:36,527 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.prism.crypto.ProtectorImpl): Using file keystore at /opt/training/midpoint/var//keystore.jceks
2018-04-11 01:22:36,552 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Repository factory class name from configuration 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'.
2018-04-11 01:22:36,553 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'
2018-04-11 01:22:36,567 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Initializing SQL repository factory
2018-04-11 01:22:36,591 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository is not running in embedded mode.
2018-04-11 01:22:36,592 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlPerformanceMonitor): SQL Performance Monitor initialized (level = 0).
2018-04-11 01:22:36,592 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository initialization finished.
2018-04-11 01:22:36,593 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.cache.RepositoryCacheFactory'
2018-04-11 01:22:36,948 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Loading datasource.
2018-04-11 01:22:36,948 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Constructing default C3P0 datasource with connection pooling; JDBC URL: jdbc:postgresql://postgres/midpoint
2018-04-11 01:22:41,411 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialization.
2018-04-11 01:22:41,429 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager: Quartz Job Store: JDBC, NOT clustered. Threads: 10
2018-04-11 01:22:41,430 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerConfiguration): Quartz database is at jdbc:postgresql://postgres/midpoint (a JDBC URL)
2018-04-11 01:22:41,465 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.NodeRegistrar): Registering this node in the repository as DefaultNode at mp-training:20001
2018-04-11 01:22:41,911 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Initializing Quartz scheduler (but not starting it yet).
2018-04-11 01:22:42,056 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): ... Quartz scheduler initialized.
2018-04-11 01:22:42,057 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.ExecutionManager): Quartz scheduler execution limits set to: {null=null, DefaultNode=null, *=0} (were: null)
2018-04-11 01:22:42,057 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronizing Quartz job store with midPoint repository.
2018-04-11 01:22:42,123 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronization of midpoint and Quartz task store finished. 0 task(s) existing in midPoint repository successfully processed, resulting in 0 updated Quartz job(s). 0 task(s) removed from Quartz job store. Processing of 0 task(s) failed.
2018-04-11 01:22:42,123 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialized
2018-04-11 01:22:42,150 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.wf.impl.WfConfiguration): Workflows are disabled.
2018-04-11 01:22:42,297 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.audit.impl.LoggerAuditServiceFactory'
2018-04-11 01:22:42,305 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory'
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Initializing Sql audit service factory.
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): SQL repository already initialized.
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Sql audit service factory initialization complete.
2018-04-11 01:22:53,340 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-csv version: 2.1
2018-04-11 01:22:53,460 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-databasetable version: 1.4.2.0
2018-04-11 01:22:53,483 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-ldap version: 1.5.1
2018-04-11 01:22:56,735 [] [main] INFO (com.evolveum.midpoint.wf.impl.WfHook): Workflow change hook is not registered, because workflows are disabled.
2018-04-11 01:22:57,497 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization.
2018-04-11 01:22:57,501 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization finished successfully.
2018-04-11 01:22:57,507 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial object import (if necessary).
2018-04-11 01:22:57,521 [] [main] WARN (com.evolveum.midpoint.init.InitialDataImport): Failed to create temporary directory for initial objects /opt/training/midpoint/var//tmp. Maybe it already exists
2018-04-11 01:22:57,606 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 010-value-policy.xml.
2018-04-11 01:22:57,659 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.653+0000 eid=1523409777653-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000003({http://midpoint.evolveum.com/xml/ns/public/common/common-3}valuePolicy), TO=null, D=[00000000-0000-0000-0000-000000000003:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:57,761 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.761+0000 eid=1523409777761-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000003, targetType={.../common/common-3}ValuePolicyType, targetName=Default Password Policy, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000003:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:57,928 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created valuePolicy:00000000-0000-0000-0000-000000000003(Default Password Policy) as part of initial import
2018-04-11 01:22:57,936 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 015-security-policy.xml.
2018-04-11 01:22:57,963 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.952+0000 eid=1523409777952-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000120({http://midpoint.evolveum.com/xml/ns/public/common/common-3}securityPolicy), TO=null, D=[00000000-0000-0000-0000-000000000120:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:58,022 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.013+0000 eid=1523409778013-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000120, targetType={.../common/common-3}SecurityPolicyType, targetName=Default Security Policy, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000120:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:58,119 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created securityPolicy:00000000-0000-0000-0000-000000000120(Default Security Policy) as part of initial import
2018-04-11 01:22:58,132 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 020-system-configuration.xml.
2018-04-11 01:22:58,151 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.143+0000 eid=1523409778143-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000001({http://midpoint.evolveum.com/xml/ns/public/common/common-3}systemConfiguration), TO=null, D=[00000000-0000-0000-0000-000000000001:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:58,222 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.214+0000 eid=1523409778214-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000001, targetType={.../common/common-3}SystemConfigurationType, targetName=SystemConfiguration, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000001:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:58,289 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (version 0)
2018-04-11 01:22:58,289 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration
2018-04-11 01:22:58,360 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): New logging configuration applied
2018-04-11 01:22:58,365 [] [main] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryServiceImpl): Applying full text search configuration (0 entries)
2018-04-11 01:22:58,429 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created systemConfiguration:00000000-0000-0000-0000-000000000001(SystemConfiguration) as part of initial import
2018-04-11 01:22:58,435 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 030-role-superuser.xml.
2018-04-11 01:22:58,718 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-000000000004(Superuser) as part of initial import
2018-04-11 01:22:58,757 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 040-role-enduser.xml.
2018-04-11 01:22:59,169 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-000000000008(End user) as part of initial import
2018-04-11 01:22:59,178 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 041-role-approver.xml.
2018-04-11 01:22:59,394 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000a(Approver) as part of initial import
2018-04-11 01:22:59,402 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 042-role-reviewer.xml.
2018-04-11 01:22:59,604 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000b(Reviewer) as part of initial import
2018-04-11 01:22:59,612 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 043-role-delegator.xml.
2018-04-11 01:22:59,857 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000c(Delegator) as part of initial import
2018-04-11 01:22:59,866 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 050-user-administrator.xml.
2018-04-11 01:23:00,426 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created user:00000000-0000-0000-0000-000000000002(administrator) as part of initial import
2018-04-11 01:23:00,432 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 060-task-cleanup.xml.
2018-04-11 01:23:00,618 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000005(Cleanup) as part of initial import
2018-04-11 01:23:00,625 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 070-task-validity.xml.
2018-04-11 01:23:00,764 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000006(Validity Scanner) as part of initial import
2018-04-11 01:23:00,770 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 080-task-trigger.xml.
2018-04-11 01:23:00,907 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000007(Trigger Scanner) as part of initial import
2018-04-11 01:23:00,922 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 090-report-audit.xml.
2018-04-11 01:23:01,047 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000009(Audit logs report) as part of initial import
2018-04-11 01:23:01,054 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 100-report-reconciliation.xml.
2018-04-11 01:23:01,150 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000100(Reconciliation report) as part of initial import
2018-04-11 01:23:01,157 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 110-report-user-list.xml.
2018-04-11 01:23:01,294 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000110(Users in MidPoint) as part of initial import
2018-04-11 01:23:01,300 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 130-report-certification-definitions.xml.
2018-04-11 01:23:01,399 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000130(Certification definitions report) as part of initial import
2018-04-11 01:23:01,406 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 140-report-certification-campaigns.xml.
2018-04-11 01:23:01,512 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000140(Certification campaigns report) as part of initial import
2018-04-11 01:23:01,519 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 150-report-certification-cases.xml.
2018-04-11 01:23:01,625 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000150(Certification cases report) as part of initial import
2018-04-11 01:23:01,631 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 160-report-certification-decisions.xml.
2018-04-11 01:23:01,733 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000160(Certification decisions report) as part of initial import
2018-04-11 01:23:01,752 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 200-lookup-languages.xml.
2018-04-11 01:23:01,883 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000200(Languages) as part of initial import
2018-04-11 01:23:01,890 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 210-lookup-locales.xml.
2018-04-11 01:23:02,071 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000210(Locales) as part of initial import
2018-04-11 01:23:02,788 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 220-lookup-timezones.xml.
2018-04-11 01:23:07,961 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000220(Timezones) as part of initial import
2018-04-11 01:23:07,967 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 230-lookup-lifecycle-state.xml.
2018-04-11 01:23:08,066 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000230(Lifecycle States) as part of initial import
2018-04-11 01:23:08,077 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Initial object import finished (23 objects imported, 0 errors)
2018-04-11 01:23:08,081 [] [main] INFO (com.evolveum.midpoint.init.ModelInitialSetup): Model post initialization.
2018-04-11 01:23:08,092 [] [main] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Starting the Quartz scheduler
2018-04-11 01:23:08,092 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.ClusterManager): ClusterManager thread starting.
2018-04-11 01:23:08,104 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Freed 0 triggers from 'acquired' / 'blocked' state.
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Recovering 0 jobs that were in-progress at the time of the last shut-down.
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Recovery complete.
2018-04-11 01:23:08,111 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (currently applied version: 0, new version: 1)
2018-04-11 01:23:08,111 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Removed 0 'complete' triggers.
2018-04-11 01:23:08,112 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Removed 0 stale fired job entries.
2018-04-11 01:23:08,113 [] [main] INFO (org.quartz.core.QuartzScheduler): Scheduler midPointScheduler_$_DefaultNode started.
2018-04-11 01:23:08,175 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): New logging configuration applied
2018-04-11 01:23:08,178 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryServiceImpl): Applying full text search configuration (0 entries)
2018-04-11 01:23:09,821 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:d37d5f34-e548-4513-b7c1-94d26b2575d9(Built-in ManualConnector v1.0.0)
2018-04-11 01:23:10,611 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:1618bd15-d038-4fdd-bc31-51b726344716(ConnId com.evolveum.polygon.connector.ldap.ad.AdLdapConnector v1.5.1)
2018-04-11 01:23:10,633 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:0fe9bbe6-314a-4f29-8b36-da71d6674122(ConnId org.identityconnectors.databasetable.DatabaseTableConnector v1.4.2.0)
2018-04-11 01:23:10,659 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:c4a91325-2e24-4ae8-beb2-db81bed960e9(ConnId com.evolveum.polygon.connector.ldap.LdapConnector v1.5.1)
2018-04-11 01:23:10,684 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:652b4164-e26d-4bfc-9b00-44a08787c3be(ConnId com.evolveum.polygon.connector.ldap.edirectory.EDirectoryLdapConnector v1.5.1)
2018-04-11 01:23:10,705 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:3a17d748-af51-4c5c-8817-699b587b8b65(ConnId com.evolveum.polygon.connector.csv.CsvConnector v2.1)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId org.identityconnectors.databasetable.DatabaseTableConnector v1.4.2.0 (OID:0fe9bbe6-314a-4f29-8b36-da71d6674122)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.LdapConnector v1.5.1 (OID:c4a91325-2e24-4ae8-beb2-db81bed960e9)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.edirectory.EDirectoryLdapConnector v1.5.1 (OID:652b4164-e26d-4bfc-9b00-44a08787c3be)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: Built-in ManualConnector v1.0.0 (OID:d37d5f34-e548-4513-b7c1-94d26b2575d9)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.csv.CsvConnector v2.1 (OID:3a17d748-af51-4c5c-8817-699b587b8b65)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.ad.AdLdapConnector v1.5.1 (OID:1618bd15-d038-4fdd-bc31-51b726344716)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.init.ModelInitialSetup): Model post initialization finished successfully.
2018-04-11 01:23:11,057 [] [main] INFO (org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter): Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4d591d15: startup date [Wed Apr 11 01:22:09 UTC 2018]; root of context hierarchy
2018-04-11 01:23:12,024 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,024 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,135 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,809 [] [main] INFO (org.apache.coyote.http11.Http11NioProtocol): Initializing ProtocolHandler ["http-nio-8080"]
2018-04-11 01:23:12,843 [] [main] INFO (org.apache.coyote.http11.Http11NioProtocol): Starting ProtocolHandler ["http-nio-8080"]
2018-04-11 01:23:12,846 [] [midPointScheduler_Worker-1] INFO (org.hibernate.dialect.Dialect): HHH000400: Using dialect: com.evolveum.midpoint.repo.sql.util.MidPointPostgreSQLDialect
2018-04-11 01:23:12,847 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceImpl): Starting audit cleanup, deleting up to Thu Jan 11 01:23:12 UTC 2018 (duration '-P3M'), batch size 500.
2018-04-11 01:23:12,859 [] [main] INFO (org.apache.tomcat.util.net.NioSelectorPool): Using a shared selector for servlet write/read
2018-04-11 01:23:12,883 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceImpl): Audit cleanup based on age finished; deleted 0 entries in 0 seconds.
2018-04-11 01:23:12,884 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerQuartzImpl): Starting cleanup for closed tasks deleting up to Sun Mar 11 01:23:12 UTC 2018 (duration '-P1M').
2018-04-11 01:23:12,921 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerQuartzImpl): Task cleanup procedure finished. Successfully deleted 0 tasks; there were problems with deleting 0 tasks.
2018-04-11 01:23:12,970 [] [main] INFO (org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer): Tomcat started on port(s): 8080 (http)
2018-04-11 01:23:12,990 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Started MidPointSpringApplication in 64.854 seconds (JVM running for 66.177)
2018-04-11 01:23:15,273 [] [http-nio-8080-exec-1] INFO (org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]): Initializing Spring FrameworkServlet 'dispatcherServlet'
2018-04-11 01:23:15,273 [] [http-nio-8080-exec-1] INFO (org.springframework.web.servlet.DispatcherServlet): FrameworkServlet 'dispatcherServlet': initialization started
2018-04-11 01:23:15,324 [] [http-nio-8080-exec-1] INFO (org.springframework.web.servlet.DispatcherServlet): FrameworkServlet 'dispatcherServlet': initialization completed in 51 ms
2018-04-11 01:23:18,045 [] [http-nio-8080-exec-6] WARN (ro.isdc.wro.config.factory.ServletContextPropertyWroConfigurationFactory): [WARN] Cannot read properties file stream from default location: /WEB-INF/wro.properties. Using default configuration.
2018-04-11 01:42:51,025 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:51,025 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:51,026 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,962 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,963 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,963 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
_____________________
h6. 2018-04-10 09:21  failed attempt quick setup of a Linode centos host ready for Docker containers, continued:  Docker Swarm

https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-centos-7

- fix failed docker overlay, reload daemon, restart docker

sudo mv /etc/systemd/system/docker.service.d/override.conf /etc/systemd/system/docker.service.d/override.conf.off

Warning: docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.

[kh@metazome ~]$ sudo systemctl daemon-reload

[kh@metazome ~]$ sudo systemctl start docker
[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

sudo cat /etc/systemd/system/docker.service.d/docker.conf
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2376 -H unix://var/run/docker.sock

- Restart the docker service using systemd commands:

sudo systemctl daemon-reload
sudo systemctl restart docker

- Look for the dockerd process and confirm that your -H settings are listed.

- You can confirm that the exec took your override parameters by calling:

ps -ef | grep docker

root     13249     1  1 13:47 ?        00:00:00 /usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock
root     13258 13249  0 13:47 ?        00:00:00 docker-containerd --config /var/run/docker/containerd/containerd.toml
kh       13362 12726  0 13:48 pts/0    00:00:00 grep --color=auto docker
[kh@metazome ~]$



- sudo firewall-cmd --permanent --add-port=2377/tcp
success

sudo systemctl restart firewalld

- check that all ports are open

[kh@metazome ~]$ sudo firewall-cmd --list-ports
_____________________
h6. 2018-04-08 15:49  formula for quick setup of a Linode centos host ready for Docker containers

- create and launch a base Centos 7 linode

- root session via lish console

# disable selinux
vim /etc/sysconfig/selinux
...
SELINUX=disable
...
reboot
...
sestatus

# configure ssh for no password, public key authN, no root ssh, port 58......
cd /etc/ssh
rm /etc/ssh/sshd_config
vim /etc/ssh/sshd_config
[paste contents of sshd_config from oMbP:_notesPlus/sshd_config]
save

service sshd restart

adduser kh
passwd kh
usermod -a -G wheel kh
su kh

cd /home/kh/
mkdir .ssh
chmod 700 .ssh
cd .ssh
vim authorized_keys
[copy/paste oMbP:.ssh/kh_rsa.pub]
chmod 600 .ssh/authorized_keys  <== if not already correct

- exit lish

ssh -p 58.... -i ~/.ssh/kh_rsa -l kh cerif.org

- install docker

sudo yum install docker

[kh@metazome ~]$ sudo systemctl start docker

[kh@metazome ~]$ sudo systemctl enable docker  <== restart at boot time

[kh@metazome ~]$ sudo systemctl status docker

[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

[kh@metazome mid101]$ cat /etc/environment

PATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/kh/.local/bin:/home/kh/bin
export $PATH


----------
- convert to use docker stack in place of docker-compose

- prep to run a docker swarm

Open protocols and ports between the hosts
The following ports must be available. On some systems, these ports are open by default.

TCP port 2377 for cluster management communications
TCP and UDP port 7946 for communication among nodes
UDP port 4789 for overlay network traffic

yum install -y firewalld

- start firewalld / enable on reboot

[kh@metazome mid101]$ sudo systemctl enable firewalld

[kh@metazome mid101]$ sudo service firewalld start

Redirecting to /bin/systemctl start firewalld.service

[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=https
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=ldap
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=slapd
Error: INVALID_SERVICE: 'slapd' not among existing services
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=ldaps
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=58263
Error: INVALID_PORT: bad port (most likely missing protocol), correct syntax is portid[-portid]/protocol
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=58263/tcp
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=5432/tcp
success
Metazome mid101]$ sudo firewall-cmd --permanent --add-port=2375/tcp
success
Metazome mid101]$ sudo firewall-cmd --permanent --add-port=2376/tcp
success

- All necessary ports are open:

sudo systemctl restart firewalld

[kh@metazome ~]$ sudo firewall-cmd --list-ports
58263/tcp 5432/tcp 2375/tcp 2376/tcp
[kh@metazome ~]$ sudo firewall-cmd --list-services
ssh dhcpv6-client https ldap ldaps

[kh@metazome mid101]$ sudo systemctl status firewalld
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2018-04-09 18:47:07 UTC; 1h 51min ago
     Docs: man:firewalld(1)
 Main PID: 30651 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─30651 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid
_____________________
h6. 2018-04-06 15:42  attempt at a smooth install on Showcase host from oMbP:~/mid101

tar -cvzf mid101.tar.gz mid101

a mid101
a mid101/.DS_Store
a mid101/docker-compose.yaml
a mid101/mp-openldap
a mid101/mp-postgres
a mid101/mp-training
a mid101/mp-training/.dockerignore
a mid101/mp-training/.DS_Store
a mid101/mp-training/config-postgresql.xml
a mid101/mp-training/custom_connectors
a mid101/mp-training/Dockerfile
a mid101/mp-training/extension-example.xsd
a mid101/mp-training/mid101-flatfiles
a mid101/mp-training/mid101-flatfiles.zip
a mid101/mp-training/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
a mid101/mp-training/midpoint-entrypoint.sh
a mid101/mp-training/mid101-flatfiles/csv-1-app-1.csv
a mid101/mp-training/mid101-flatfiles/csv-2-app-2.csv
a mid101/mp-training/mid101-flatfiles/csv-3-ldap.csv
a mid101/mp-training/mid101-flatfiles/source.csv
a mid101/mp-training/custom_connectors/connector-csv-2.1.99.jar
a mid101/mp-training/custom_connectors/scriptedsql-connector-1.1.2.0.em3.jar
a mid101/mp-postgres/10-create-midpoint.sql
a mid101/mp-postgres/20-postgres-3.7-all.sql
a mid101/mp-postgres/Dockerfile
a mid101/mp-openldap/.DS_Store
a mid101/mp-openldap/bootstrap
a mid101/mp-openldap/Dockerfile
a mid101/mp-openldap/bootstrap/.DS_Store
a mid101/mp-openldap/bootstrap/ldif
a mid101/mp-openldap/bootstrap/ldif/03-memberOf.ldif
a mid101/mp-openldap/bootstrap/ldif/03-sssvlv.ldif
a mid101/mp-openldap/bootstrap/ldif/100-example.ldif
a mid101/mp-openldap/bootstrap/ldif/110-example-idmadmin-aci.ldif

scp mid101.tar.gz kh@cerif.org:


...

Step 8/8 : CMD /bin/su -c /usr/bin/java -Xmx2048M -Xms2048M -Dfile.encoding=UTF8 -Dmidpoint.home=/opt/training/midpoint/var -jar /opt/training/midpoint/lib/midpoint.war midpoint
 ---> Running in 6a2f61624d0f
 ---> 76874ef42c90
Removing intermediate container 6a2f61624d0f
Successfully built 76874ef42c90

[kh@metazome mid101]$ sudo docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED              SIZE
ubuntu-mid101               2018.A.docker       76874ef42c90        25 seconds ago       487 MB
postgres-mid101             2018.A.docker       b9b167f691eb        About a minute ago   37.2 MB
openldap-mid101             2018.A.docker       af5fc70e276c        About a minute ago   223 MB
<none>                      <none>              956a99509c3a        4 hours ago          260 MB
<none>                      <none>              9f3f8570553a        4 hours ago          37.2 MB
<none>                      <none>              26e1b2cf6a74        4 hours ago          223 MB
docker.io/osixia/openldap   latest              6fedb3135d7d        3 weeks ago          223 MB
docker.io/ubuntu            xenial              f975c5035748        4 weeks ago          112 MB
docker.io/postgres          9.5-alpine          e61724866da9        4 weeks ago          37.1 MB
go-demo                     latest              57ada52d1e0e        4 months ago         16.4 MB
docker.io/alpine            3.4                 dc98aa467aa0        5 months ago         4.81 MB
docker.io/golang            1.6                 63330314bb46        14 months ago        748 MB
docker.io/mongo             3.2.10              fe9198c04d62        17 months ago        342 MB

[kh@metazome mid101]$ sudo docker-compose up

_____________________
h6. 2018-04-06 06:17  Showcase prep

curl.exe --user administrator:entreg007 -H "Content-Type: application/xml" -X GET http://co-op.tech:8080/midpoint/ws/rest/users
_____________________
h6. 2018-03-28 20:00  successfully restarting midPoint containers

KeithsOfficeMBP:~ khazelton$ ls -la ~/opt/mPTrainingMaster
total 50424
drwxr-xr-x  10 khazelton  staff       340 Mar  1 08:08 .
drwxr-xr-x  35 khazelton  staff      1190 Mar 12 20:52 ..
-rw-r--r--@  1 khazelton  staff      6148 Mar 28 21:12 .DS_Store
-rw-r--r--@  1 khazelton  staff    989268 Feb 28 21:03 LABS-MID101.2018.A-docker.pdf
-rw-r--r--@  1 khazelton  staff      1457 Feb 28 21:05 README-MID101.txt
drwx------@  8 khazelton  staff       272 Feb 28 21:22 mid101-docker-labs
-rw-r--r--@  1 khazelton  staff    969199 Feb 28 21:06 mid101-docker-labs.zip
drwx------@  6 khazelton  staff       204 Feb 28 21:08 mid101-flatfiles
-rw-r--r--@  1 khazelton  staff      1530 Feb 28 21:08 mid101-flatfiles.zip
-rw-r--r--@  1 khazelton  staff  23834812 Feb 28 21:09 midpoint-deployment-fundamentals-mid101-slides.pdf

KeithsOfficeMBP:mid101 khazelton$ docker ps

CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
86f716fe0cc8        registry:2.5.0      "/entrypoint.sh /etc…"   8 months ago        Up 2 hours          0.0.0.0:5000->5000/tcp   registry

KeithsOfficeMBP:mid101trainingWeekVersion khazelton$ cd ~/mid101

KeithsOfficeMBP:mid101 khazelton$ tree
.
├── docker-compose.yaml
├── mp-openldap
│   ├── Dockerfile
│   └── bootstrap
│       └── ldif
│           ├── 03-memberOf.ldif
│           ├── 03-sssvlv.ldif
│           ├── 100-example.ldif
│           └── 110-example-idmadmin-aci.ldif
├── mp-postgres
│   ├── 10-create-midpoint.sql
│   ├── 20-postgres-3.7-all.sql
│   └── Dockerfile
└── mp-training
    ├── Dockerfile
    ├── config-postgresql.xml
    ├── custom_connectors
    │   ├── connector-csv-2.1.99.jar
    │   └── scriptedsql-connector-1.1.2.0.em3.jar
    ├── extension-example.xsd
    ├── mid101-flatfiles
    │   ├── csv-1-app-1.csv
    │   ├── csv-2-app-2.csv
    │   ├── csv-3-ldap.csv
    │   └── source.csv
    ├── mid101-flatfiles.zip
    ├── midpoint-3.7.1-SNAPSHOT-dist.tar.gz
    └── midpoint-entrypoint.sh

7 directories, 21 files


docker-compose up

----------
Creating mid101_openldap_1 ... done
Creating mid101_postgres_1 ... done
Creating mp-training       ... done
Attaching to mid101_openldap_1, mid101_postgres_1, mp-training
openldap_1     | *** CONTAINER_LOG_LEVEL = 3 (info)
openldap_1     | *** Search service in CONTAINER_SERVICE_DIR = /container/service :
openldap_1     | *** link /container/service/:ssl-tools/startup.sh to /container/run/startup/:ssl-tools
openldap_1     | *** link /container/service/slapd/startup.sh to /container/run/startup/slapd
openldap_1     | *** link /container/service/slapd/process.sh to /container/run/process/slapd/run
openldap_1     | *** Set environment for startup files
openldap_1     | *** Environment files will be proccessed in this order :
openldap_1     | Caution: previously defined variables will not be overriden.
openldap_1     | /container/environment/99-default/default.startup.yaml
openldap_1     | /container/environment/99-default/default.yaml
openldap_1     |
openldap_1     | To see how this files are processed and environment variables values,
openldap_1     | run this container with '--loglevel debug'
openldap_1     | *** Running /container/run/startup/:ssl-tools...
openldap_1     | *** Running /container/run/startup/slapd...
openldap_1     | Start OpenLDAP...
openldap_1     | Waiting for OpenLDAP to start...
openldap_1     | Add TLS config...
openldap_1     | Disable replication config...
openldap_1     | Stop OpenLDAP...
openldap_1     | Configure ldap client TLS configuration...
openldap_1     | First start is done...
openldap_1     | *** Set environment for container process
openldap_1     | *** Remove file /container/environment/99-default/default.startup.yaml
openldap_1     | *** Environment files will be proccessed in this order :
openldap_1     | Caution: previously defined variables will not be overriden.
openldap_1     | /container/environment/99-default/default.yaml
openldap_1     |
openldap_1     | To see how this files are processed and environment variables values,
openldap_1     | run this container with '--loglevel debug'
openldap_1     | *** Running /container/run/process/slapd/run...
postgres_1     | LOG:  database system was shut down at 2018-03-01 02:34:41 UTC
postgres_1     | LOG:  MultiXact member wraparound protections are now enabled
postgres_1     | LOG:  database system is ready to accept connections
postgres_1     | LOG:  autovacuum launcher started
mp-training    | ENTRYPOINT: will use /tmp/midpoint-dist/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
openldap_1     | 5abc39c9 @(#) $OpenLDAP: slapd  (Aug 10 2017 19:12:46) $
openldap_1     | 	Debian OpenLDAP Maintainers <pkg-openldap-devel@lists.alioth.debian.org>
openldap_1     | TLS: warning: ignoring dhfile
openldap_1     | 5abc39c9 slapd starting
mp-training    | ENTRYPOINT: uncompressed /tmp/midpoint-dist/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
mp-training    | ENTRYPOINT: starting java
mp-training    | 00:56:46,949 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
mp-training    | 00:56:46,951 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
mp-training    | 00:56:46,951 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [jar:file:/opt/training/midpoint/lib/midpoint.war!/WEB-INF/classes!/logback.xml]
mp-training    | 00:56:47,036 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@28c97a5 - URL [jar:file:/opt/training/midpoint/lib/midpoint.war!/WEB-INF/classes!/logback.xml] is not of type file
mp-training    | 00:56:47,312 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
mp-training    | 00:56:47,334 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
mp-training    | 00:56:47,361 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [CONSOLE]
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - This appender no longer admits a layout as a sub-component, set an encoder instead.
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - To ensure compatibility, wrapping your layout in LayoutWrappingEncoder.
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - See also http://logback.qos.ch/codes.html#layoutInsteadOfEncoder for details
mp-training    | 00:56:47,625 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
mp-training    | 00:56:47,636 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [MIDPOINT_LOG]
mp-training    | 00:56:47,642 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
mp-training    | 00:56:47,720 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - No compression will be used
mp-training    | 00:56:47,722 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - Will use the pattern /opt/training/midpoint/var/log/midpoint-%d{yyyy-MM-dd}.%i.log for the active file
mp-training    | 00:56:47,730 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - The date pattern is 'yyyy-MM-dd' from file name pattern '/opt/training/midpoint/var/log/midpoint-%d{yyyy-MM-dd}.%i.log'.
mp-training    | 00:56:47,730 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - Roll-over at midnight.
mp-training    | 00:56:47,742 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - Setting initial period to Thu Mar 01 02:34:07 UTC 2018
mp-training    | 00:56:47,742 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
mp-training    | 00:56:47,742 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
mp-training    | 00:56:47,748 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - Cleaning on start up
mp-training    | 00:56:47,771 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - first clean up after appender initialization
mp-training    | 00:56:47,772 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - Multiple periods, i.e. 32 periods, seem to have elapsed. This is expected at application start.
mp-training    | 00:56:47,776 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_LOG] - Active log file name: /opt/training/midpoint/var/log/midpoint.log
mp-training    | 00:56:47,776 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_LOG] - File property is set to [/opt/training/midpoint/var/log/midpoint.log]
mp-training    | 00:56:47,778 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
mp-training    | 00:56:47,778 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [MIDPOINT_PROFILE_LOG]
mp-training    | 00:56:47,779 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
mp-training    | 00:56:47,782 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1174361318 - No compression will be used
mp-training    | 00:56:47,782 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1174361318 - Will use the pattern /opt/training/midpoint/var/log/midpoint-profile-%d{yyyy-MM-dd}.%i.log for the active file
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - The date pattern is 'yyyy-MM-dd' from file name pattern '/opt/training/midpoint/var/log/midpoint-profile-%d{yyyy-MM-dd}.%i.log'.
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - Roll-over at midnight.
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - Setting initial period to Sun Feb 18 20:07:57 UTC 2018
mp-training    | 00:56:47,783 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
mp-training    | 00:56:47,783 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
mp-training    | 00:56:47,785 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_PROFILE_LOG] - Active log file name: /opt/training/midpoint/var/log/midpoint-profile.log
mp-training    | 00:56:47,785 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_PROFILE_LOG] - File property is set to [/opt/training/midpoint/var/log/midpoint-profile.log]
mp-training    | 00:56:47,787 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.springframework.boot.SpringApplication] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [ro.isdc.wro.extensions.processor.css.Less4jProcessor] to ERROR
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] to OFF
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.batch.internal.BatchingBatch] to OFF
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl] to WARN
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [PROFILING] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.evolveum.midpoint] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.evolveum.midpoint.web.util.MidPointProfilingServletFilter] to TRACE
mp-training    | 00:56:47,789 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [MIDPOINT_PROFILE_LOG] to Logger[com.evolveum.midpoint.web.util.MidPointProfilingServletFilter]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to WARN
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [MIDPOINT_LOG] to Logger[ROOT]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [CONSOLE] to Logger[ROOT]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
mp-training    | 00:56:47,792 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@bebdb06 - Registering current configuration as safe fallback point
mp-training    |
mp-training    | 2018-03-29 00:56:50,557 [] [main] INFO (org.springframework.boot.SpringApplication):
mp-training    |                    _ _____              _
mp-training    |              _    | |  _  \     _     _| |_
mp-training    |    ___ ____ (_) __| | |_) |___ (_)___|_   _|
mp-training    |   |  _ ` _ `| |/ _  |  __/  _ \| |  _` | |
mp-training    |   | | | | | | | (_| | |  | (_) | | | | | |_
mp-training    |   |_| |_| |_|_|\____|_|  \____/|_|_| |_|\__|  by Evolveum and partners
mp-training    |
mp-training    |   Licensed under the Apache License, Version 2.0 see: http://www.apache.org/licenses/LICENSE-2.0
mp-training    |   Version :  3.7.1-SNAPSHOT
mp-training    |   Sources :  https://github.com/Evolveum/midpoint.git  branch:  support-3.7
mp-training    |   Bug reporting system : http://jira.evolveum.com/
mp-training    |   Product information : http://wiki.evolveum.com/display/midPoint
mp-training    |
mp-training    |
mp-training    | 2018-03-29 00:56:51,116 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Starting MidPointSpringApplication on mp-training with PID 14 (/opt/training/midpoint/lib/midpoint.war started by midpoint in /)
mp-training    | 2018-03-29 00:56:51,118 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): No active profile set, falling back to default profiles: default
mp-training    | 2018-03-29 00:56:59,212 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): midpoint.home = /opt/training/midpoint/var/
mp-training    | midpoint.home = /opt/training/midpoint/var/
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/ already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/icf-connectors already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/idm-legacy already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,214 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/log already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/schema already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/import already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/export already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/tmp already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/lib already exists. Reusing it.
mp-training    | Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
mp-training    | 2018-03-29 00:56:59,225 [] [main] INFO (com.evolveum.midpoint.init.StartupConfiguration): Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
mp-training    | 2018-03-29 00:57:07,656 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.ConfigurablePrismContextFactory): Loading extension schemas from folder '/opt/training/midpoint/var//schema'.
mp-training    | 2018-03-29 00:57:22,717 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.prism.crypto.ProtectorImpl): Using file keystore at /opt/training/midpoint/var//keystore.jceks
mp-training    | 2018-03-29 00:57:22,787 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Repository factory class name from configuration 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'.
mp-training    | 2018-03-29 00:57:22,791 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'
mp-training    | 2018-03-29 00:57:22,815 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Initializing SQL repository factory
mp-training    | 2018-03-29 00:57:22,877 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository is not running in embedded mode.
mp-training    | 2018-03-29 00:57:22,883 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlPerformanceMonitor): SQL Performance Monitor initialized (level = 0).
mp-training    | 2018-03-29 00:57:22,884 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository initialization finished.
mp-training    | 2018-03-29 00:57:22,885 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.cache.RepositoryCacheFactory'
mp-training    | 2018-03-29 00:57:23,500 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Loading datasource.
mp-training    | 2018-03-29 00:57:23,501 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Constructing default C3P0 datasource with connection pooling; JDBC URL: jdbc:postgresql://postgres/midpoint
mp-training    | 2018-03-29 00:57:31,415 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialization.
mp-training    | 2018-03-29 00:57:31,446 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager: Quartz Job Store: JDBC, NOT clustered. Threads: 10
mp-training    | 2018-03-29 00:57:31,447 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerConfiguration): Quartz database is at jdbc:postgresql://postgres/midpoint (a JDBC URL)
mp-training    | 2018-03-29 00:57:31,527 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.NodeRegistrar): Registering this node in the repository as DefaultNode at mp-training:20001
mp-training    | 2018-03-29 00:57:32,702 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Initializing Quartz scheduler (but not starting it yet).
mp-training    | 2018-03-29 00:57:32,960 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): ... Quartz scheduler initialized.
mp-training    | 2018-03-29 00:57:32,962 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.ExecutionManager): Quartz scheduler execution limits set to: {null=null, DefaultNode=null, *=0} (were: null)
mp-training    | 2018-03-29 00:57:32,963 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronizing Quartz job store with midPoint repository.
mp-training    | 2018-03-29 00:57:34,407 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronization of midpoint and Quartz task store finished. 10 task(s) existing in midPoint repository successfully processed, resulting in 1 updated Quartz job(s). 0 task(s) removed from Quartz job store. Processing of 0 task(s) failed.
mp-training    | 2018-03-29 00:57:34,408 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialized
mp-training    | 2018-03-29 00:57:34,469 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.wf.impl.WfConfiguration): Workflows are disabled.
mp-training    | 2018-03-29 00:57:34,732 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.audit.impl.LoggerAuditServiceFactory'
mp-training    | 2018-03-29 00:57:34,752 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory'
mp-training    | 2018-03-29 00:57:34,771 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Initializing Sql audit service factory.
mp-training    | 2018-03-29 00:57:34,775 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): SQL repository already initialized.
mp-training    | 2018-03-29 00:57:34,777 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Sql audit service factory initialization complete.
mp-training    | 2018-03-29 00:57:49,467 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-csv version: 2.1
mp-training    | 2018-03-29 00:57:49,716 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-databasetable version: 1.4.2.0
mp-training    | 2018-03-29 00:57:49,781 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-ldap version: 1.5.1
mp-training    | 2018-03-29 00:57:50,685 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle in JAR: com.evolveum.polygon.connector-csv version: 2.1.99
mp-training    | 2018-03-29 00:57:50,736 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle in JAR: org.forgerock.openicf.connectors.scriptedsql-conne version: 1.1.2.0.em3
mp-training    | 2018-03-29 00:57:55,669 [] [main] INFO (com.evolveum.midpoint.wf.impl.WfHook): Workflow change hook is not registered, because workflows are disabled.
mp-training    | 2018-03-29 00:57:56,910 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization.
mp-training    | 2018-03-29 00:57:57,025 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (version 9)
mp-training    | 2018-03-29 00:57:57,027 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration

postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during commit attempt.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  COMMIT
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  relation "ht_m_audit_event" does not exist at character 16
postgres_1     | STATEMENT:  select id from HT_m_audit_event where id = 1
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
----------

----------
KeithsOfficeMBP:~ khazelton$ docker ps
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                                            NAMES
85d5016ca6de        ubuntu-mid101:2018.A.docker     "/midpoint-entrypoin…"   2 minutes ago       Up 2 minutes        0.0.0.0:18080->8080/tcp                          mp-training
6a1301d2d2aa        postgres-mid101:2018.A.docker   "docker-entrypoint.s…"   2 minutes ago       Up 2 minutes        0.0.0.0:15432->5432/tcp                          mid101_postgres_1
0b2c6b2d0245        openldap-mid101:2018.A.docker   "/container/tool/run"    2 minutes ago       Up 2 minutes        0.0.0.0:10389->389/tcp, 0.0.0.0:10636->636/tcp   mid101_openldap_1
86f716fe0cc8        registry:2.5.0                  "/entrypoint.sh /etc…"   8 months ago        Up 2 hours          0.0.0.0:5000->5000/tcp                           registry

KeithsOfficeMBP:~ khazelton$ sudo docker exec -u midpoint -it 85d5016ca6de /bin/bash
Password:

midpoint@mp-training:/$ whoami
midpoint
midpoint@mp-training:/$ uname -a
Linux mp-training 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
midpoint@mp-training:/$ hostname
mp-training
midpoint@mp-training:/$
----------

browsing to http://localhost:18080/login
  brings up login screen kh窟

data from training week was still there

ssh to midpoint container

----------
midpoint@mp-training:/$ ls -la /opt/training/midpoint
total 56
drwxr-xr-x  6 midpoint midpoint  4096 Mar 29 00:56 .
drwxr-xr-x  4 midpoint midpoint  4096 Feb 18 20:07 ..
-rw-rw-r--  1 midpoint midpoint   758 Dec 14 13:08 INSTALL
-rw-rw-r--  1 midpoint midpoint 11358 Aug  9  2013 LICENSE
-rw-rw-r--  1 midpoint midpoint   758 Jan 18 10:53 NEWS
-rw-rw-r--  1 midpoint midpoint  1282 Dec 14 13:08 NOTICE
-rw-rw-r--  1 midpoint midpoint  1944 Feb  6 14:55 README
-rw-rw-r--  1 midpoint midpoint   100 Dec 14 13:08 RELEASE-NOTES
drwxr-xr-x  2 midpoint midpoint  4096 Feb  6 14:55 bin
drwxrwxr-x  5 midpoint midpoint  4096 Feb 18 20:07 doc
drwxrwxr-x  3 midpoint midpoint  4096 Mar 29 00:56 lib
drwxr-xr-x 11 midpoint midpoint  4096 Feb 18 20:08 var

midpoint@mp-training:/$ ls -la /opt/training/midpoint/var
total 52
drwxr-xr-x 11 midpoint midpoint 4096 Feb 18 20:08 .
drwxr-xr-x  6 midpoint midpoint 4096 Mar 29 00:56 ..
-rw-rw----  1 midpoint midpoint 1603 Feb 18 19:56 config.xml
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 export
drwxrwxr-x  2 midpoint midpoint 4096 Feb 28 16:25 icf-connectors
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 idm-legacy
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 import
-rw-rw----  1 midpoint midpoint  502 Feb 18 20:08 keystore.jceks
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 lib
drwxrwxr-x  2 midpoint midpoint 4096 Mar 29 00:57 log
drwxrwxr-x  2 midpoint midpoint 4096 Feb 26 19:55 schema
drwxrwxr-x  2 midpoint midpoint 4096 Mar 29 00:58 tmp
drwxrwxr-x  3 midpoint midpoint 4096 Feb 18 20:08 work

midpoint@mp-training:/$ cat /opt/training/midpoint/README

midPoint 3.7.x "Darwin" (support branch)
----------------------------------------

General information:

MidPoint is a comprehensive identity management and governance system.
MidPoint can synchronize several identity repositories, manage and
transform data in these repostories to keep them synchronized. MidPoint can
make the data available in unified form, apply and manage policies,
manage object lifecycle, maitain audit trails and many other things.

The most important features of midPoint are:
   - User provisioning and deprovisioning
   - Identity governance
   - Administration GUI
   - Identity repository implemention (SQL)
   - Custom schema extensibility
   - Identity synchronization (liveSync, reconciliation, discovery, import)
   - Support for expressions in synchronization mappings (Groovy, JavaScript, Python)
   - Advanced RBAC support with temporal constraints
   - Identity management process automation (workflow, notifications)
   - Password policies
   - Password reset
   - Organizational structure management
   - Entitlements
   - Support for ConnId and OpenICF connectors
   - Provisioning consistency and error handling
   - Support for security auditing and reporting
   - Workflow
   - Reporting
   - Notifications
   - Local Java APIs, Remote web service interface (SOAP), REST API
   - High availablity (HA) support

For more information please go to:

  http://midpoint.evolveum.com/

For bugtracking system please go to:

  http://jira.evolveum.com/

MidPoint source code is maintained on github:

  https://github.com/Evolveum/midpoint

Latest source code can be obtained from our Git repository using one of the
following repository locations:

  https://github.com/Evolveum/midpoint.git

  git@github.com:Evolveum/midpoint.git

This project is developed under Apache license (version 2.0) You may get copy
of licence in LICENSE file. Please also see NOTICE file for addtional
copyright statements.


_____________________
h6. 2018-03-28 17:49

http://localhost:18080

[mP admin GUI] k窟

- ssh into the docker container
sudo docker exec -u midpoint -it dd98d70f7eeb /bin/bash
_____________________
h6. 2018-03-26 15:45

hazelton@DoIT-95QZKH2 MINGW64 ~/opt/Centos-Dockerfiles-master/rabbitmq/centos7
$ ls -la
total 38
drwxr-xr-x 1 hazelton 1049089     0 Mar  2 05:51 ./
drwxr-xr-x 1 hazelton 1049089     0 Mar  2 05:51 ../
-rw-r--r-- 1 hazelton 1049089    17 Mar  2 05:51 cccp.yml
-rw-r--r-- 1 hazelton 1049089  1769 Mar  2 05:51 Dockerfile
-rw-r--r-- 1 hazelton 1049089 18092 Mar  2 05:51 LICENSE
-rw-r--r-- 1 hazelton 1049089   581 Mar  2 05:51 passwd.template
-rw-r--r-- 1 hazelton 1049089  2408 Mar  2 05:51 README.md
-rwxr-xr-x 1 hazelton 1049089  1207 Mar  2 05:51 run-rabbitmq-server.sh*

_____________________
h6. 2018-03-21 09:20  Radovan Zoom session on midPoint training

W. Ont. U is working on a rewrite of the UI as a Java client.

- mP UI has both end user and mP admin in one because use case
- pages in UI are built with Apache Wicket
- widgets in MyUW
- NEXT training: Sync and Provisioning Generic Synchronization; Approval workflow, Org structure, Policy to manage approval flow, Constraints on org structure etc.
- MB: Could data errors be routed to a reviewer?
- support for Services and Clients as midPoint objects?
- 'Merge Identities' function
- ID Match can be plugged into correlation processes
- abstract scim 2 connector plus a set of connectors for particular scim clients
_____________________
h6. 2017-09-28 12:00  Unicon & midPoint  https://unicon.zoom.us/j/791346420

The following is a new meeting request:
Subject:	midPoint Discussion
Organizer:	"Charise Arrowood"
Time:	Thursday, September 28, 2017, 10:00:00 AM - 11:00:00 AM GMT -07:00 Arizona
Invitees:	szoppi@internet2.edu; keith.hazelton@wisc.edu; mmoayyed@unicon.net
*~*~*~*~*~*~*~*~*~*

Hello,

Here's a meeting invite so we can get together and discuss possible midPoint needs and how Unicon can be of assistance. If this date/time is not workable please send over a suggestion and we'll do our best to be flexible so we can meet soon.

- I2 Campus Success Program
- General working group assistance
- Other

Join from PC, Mac, Linux, iOS or Android: https://unicon.zoom.us/j/791346420

Or iPhone one-tap :
	US: +16465588656,,791346420# or +16699006833,,791346420#
Or Telephone：
	Dial(for higher quality, dial a number based on your current location)：
	US: +1 646 558 8656 or +1 669 900 6833

Meeting ID: 791 346 420

International numbers available: https://unicon.zoom.us/zoomconference?m=1JZt6ZB1TKv1LbC1bAwikgflF_S-ExVK

Thank you, Charise

- I2 Campus Success Program
- General working group assistance
- Other

----------
1) Listen

Charise
John Gasper's been in on discussions w TIER
Misagh Moayyed:

- packaging validation
- I2, alfajango on fed mgr
- GDG BT under Unicon
- Grouper training env. w Paul Caskey just getting started
- AWS managed hosting
- Hosted IdP
- Learning Analytics
- uPortal
- student success

- mP evaluation stage; fairly good rel. w dev team in Slovakia; 1st contact at Java One; contributor, committer status; talked about items Unicon could contribute back; less than a handful of clients that are looking seriously;
  - in comparison to everything else, the better choice; massaging schemas, customization; good starting point on the platform; even if sub-par
  - Grouper/midPoint: MM was after: Exact topic came up in Slovakia; Is a possibility to take adv. of mP to handle groups, manage roles, provisioning, org hierarchies; limited support for roles and organizations; not on a par with Grouper capabilities; Could mP fill some of the gaps; mP as Reg and Prov. could supply same capabilities that Grouper provides at the lighter end; e.g. struggles with the Grouper permissions;
  - mP positioning on IdReg w focus on compliance and GRC
  - we have to find bridges and highways to bring mP and Grouper; grouper groups and authorizations, mP would be a subject source, core identity; would push to some of the same systems; mP would create, provision accounts;
  - MM concerns on mP: Evolveum staff are the core committers, they have pretty tight control of the product and project; platform is tailored to a company audience; very few .edus; Needs customization schemas, customizations, connectors, we'll likely need a lot of changes, they might not jump on it. Platform as it is doesn't lend itself to level of customizatbility you'd like. Their whole approach is if you want it, system would provide it.
  - If bid on shib is 40 hrs, on mP it's 200-300. there isn't anything better; Looked into others: Syncope, ForgeRock, Ping,...; Unicon started their own OpenRegistry branch; Even if the platform is less than ideal, the core developers;

MMoayyed: Excited about Shib UI work; Look forward to prod-ready version of TIER packaging

Campus Success & Unicon: Discussion is all; Holding pattern for now; some others outside that.

2) TPs

   - Unicon Campus Success engagements
   - collab work with API & EntReg WG?
   - EthanK expertise
   √ Deliv. 1) Containerized, packaged version complete w OpenLDAP; Unicon dockerized w OpenLDAP, hooked it up with Shib SP and IdP; version exists;

   - Goals:
     - Ease adoption
     - Simplifying configuration (community defaults)
     √ SCIM 2 connector (Malik)
     √ Event message consumer/publisher connector
   - Assess practicality of mPaaS
   - Integration toolkit, guidebooks
   - Integration consulting
   - Grouper integration (which UI/API for group/priv mgmt?)
   √ Horizontal scaling best practices
      - mP System isn't designed for the 100k user case; assumptions tie it to a RDBMS
   - https://evolveum.com/midpoint/midpoint-guide-about-practical-identity-management/  <== Practical Identity Mgmt. with midPoint, Radovan Semancik

] SoW by TechEx for
  - containerization/packaging of mP/OpenLDAP
  - SCIM 2 connector
  - Event-driven Messaging connector to/from mP
  - To Be Socialized at TechEx
_____________________
h6. 2017-09-20 13:19  per AnnW: Two "campus success" institutions are interested in implementing midPoint
  ssh -i ~/.ssh/kh_rsa -l khazelton midpoint2.testbed.tier.internet2.edu
~/mid101.tar.gz

_____________________
h6. 2018-04-13 15:55  REST API tests from mP2 host

- Retrieve representation of the user that was created in the Sentrifugo SoR:

</t:object>[khazelton@ip-172-31-32-222 ~]$

curl http://midpoint2.testbed.tier.internet2.edu:18080/ws/rest/users/3170d15b-d60-283052113a80  --user  administrator:5ecr3t -H "Content-Type: application/xml" -X GET

<user xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
      xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
      xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
      xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
      oid="3170d15b-d6cf-4e72-9f60-283052113a80"
      version="4">

   <name>EMPP00032</name>

   <metadata>
      <requestTimestamp>2018-04-11T18:13:39.266Z</requestTimestamp>
      <requestorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <createTimestamp>2018-04-11T18:13:39.686Z</createTimestamp>
      <creatorRef oid="00000000-0000-0000-0000-000000000002"
                  relation="org:default"
                  type="c:UserType"/>
      <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
      <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                     relation="org:default"
                     type="c:TaskType"/>
      <modifyTimestamp>2018-04-13T18:56:45.536Z</modifyTimestamp>
      <modifierRef oid="00000000-0000-0000-0000-000000000002"
                   relation="org:default"
                   type="c:UserType"/>
      <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
      <lastProvisioningTimestamp>2018-04-13T18:56:45.535Z</lastProvisioningTimestamp>
   </metadata>

   <operationExecution id="1">
      <timestamp>2018-04-11T18:13:39.838Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>add</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000828</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <taskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
               relation="org:default"
               type="c:TaskType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</channel>
   </operationExecution>

   <operationExecution id="3">
      <timestamp>2018-04-13T18:56:45.841Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000009278</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
      </operation>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:UserType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.linkShadow</operation>
            <status>success</status>
            <token>1000000000000009279</token>
         </executionResult>
         <objectName>EMPP00032</objectName>
         <resourceOid>d0811790-1d80-11e4-86b2-3c970e467874</resourceOid>
         <resourceName>OpenLDAP</resourceName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>

   <linkRef oid="fa85efe7-4189-4919-bb0d-d57173394b6b"
            relation="org:default"
            type="c:ShadowType"/>

   <assignment id="2">
      <metadata>
         <requestTimestamp>2018-04-13T18:56:45.343Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-13T18:56:45.536Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
      </metadata>

      <targetRef oid="00000000-0000-0000-0000-000000000008"
                 relation="org:default"
                 type="c:RoleType"/>

      <activation>
         <effectiveStatus>enabled</effectiveStatus>
      </activation>
   </assignment>

   <activation>
      <effectiveStatus>enabled</effectiveStatus>
      <enableTimestamp>2018-04-11T18:13:39.266Z</enableTimestamp>
   </activation>

   <iteration>0</iteration>
   <iterationToken/>

   <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                      relation="org:default"
                      type="c:RoleType"/>

   <fullName>Ethan Kromhout</fullName>
   <givenName>Ethan</givenName>
   <familyName>Kromhout</familyName>
   <title>Developer</title>
   <emailAddress>ethan32@unc.edu</emailAddress>
   <telephoneNumber>9194450056</telephoneNumber>
   <organizationalUnit>TIER</organizationalUnit>
   <credentials>
      <password>
         <metadata>
            <createTimestamp>2018-04-11T18:13:39.266Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
            <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                           relation="org:default"
                           type="c:TaskType"/>
         </metadata>
         <value>
            <t:encryptedData>
               <t:encryptionMethod>
                  <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
               </t:encryptionMethod>
               <t:keyInfo>
                  <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
               </t:keyInfo>
               <t:cipherData>
                  <t:cipherValue>LNtLjBEHyDxnFrM8c/4lrIDeN+OAaaDfdCsw+dcCOxg=</t:cipherValue>
               </t:cipherData>
            </t:encryptedData>
         </value>
      </password>
   </credentials>


[khazelton@ip-172-31-32-222 ~]$
curl http://midpoint2.testbed.tier.internet2.edu:18080/ws/rest/users  --user  administrator:5ecr3t -H "Content-Type: application/xml" -X GET

<t:object xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:type="apti:ObjectListType">
   <apti:object oid="00000000-0000-0000-0000-000000000002"
                version="20"
                xsi:type="c:UserType">
      <name>administrator</name>
      <metadata>
         <requestTimestamp>2018-04-11T16:16:27.282Z</requestTimestamp>
         <createTimestamp>2018-04-11T16:16:27.506Z</createTimestamp>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
      </metadata>
      <operationExecution id="2">
         <timestamp>2018-04-11T16:16:27.600Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000063</token>
            </executionResult>
            <objectName>administrator</objectName>
         </operation>
         <status>success</status>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</channel>
      </operationExecution>
      <assignment id="1">
         <metadata>
            <requestTimestamp>2018-04-11T16:16:27.282Z</requestTimestamp>
            <createTimestamp>2018-04-11T16:16:27.506Z</createTimestamp>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T16:16:27.308Z</enableTimestamp>
         <lockoutStatus>normal</lockoutStatus>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>midPoint Administrator</fullName>
      <givenName>midPoint</givenName>
      <familyName>Administrator</familyName>
      <credentials>
         <password>
            <failedLogins>0</failedLogins>
            <lastSuccessfulLogin>
               <timestamp>2018-04-13T20:54:19.763Z</timestamp>
               <from>172.31.32.222</from>
            </lastSuccessfulLogin>
            <previousSuccessfulLogin>
               <timestamp>2018-04-13T20:04:12.879Z</timestamp>
               <from>174.230.33.12</from>
            </previousSuccessfulLogin>
            <lastFailedLogin>
               <timestamp>2018-04-12T12:56:38.643Z</timestamp>
               <from>207.210.1.255</from>
            </lastFailedLogin>
            <metadata>
               <createTimestamp>2018-04-11T16:16:27.308Z</createTimestamp>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>WMiBUS4N3bLie7wLQJAvOGWjp6VQNtWL4AsOLjs2rIM=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                version="28"
                xsi:type="c:UserType">
      <name>khazelton</name>
      <description>Associate Admin</description>
      <metadata>
         <requestTimestamp>2018-04-11T16:52:54.723Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T16:52:54.894Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         <modifyTimestamp>2018-04-12T18:26:11.887Z</modifyTimestamp>
         <modifierRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
         <lastProvisioningTimestamp>2018-04-12T18:26:11.887Z</lastProvisioningTimestamp>
      </metadata>
      <lifecycleState>active</lifecycleState>
      <operationExecution id="1">
         <timestamp>2018-04-11T16:52:54.957Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000385</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-11T16:53:40.588Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000491</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="5">
         <timestamp>2018-04-12T17:58:30.901Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000003298</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="6">
         <timestamp>2018-04-12T18:26:12.085Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000004194</token>
            </executionResult>
            <objectName>khazelton</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-11T16:53:40.427Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-11T16:53:40.496Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <assignment id="4">
         <metadata>
            <requestTimestamp>2018-04-12T17:58:26.828Z</requestTimestamp>
            <requestorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-12T17:58:30.722Z</createTimestamp>
            <creatorRef oid="03e61c0c-939d-4e81-9db8-0707afa18a20"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000008"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T16:52:54.761Z</enableTimestamp>
         <lockoutStatus>normal</lockoutStatus>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                         relation="org:default"
                         type="c:RoleType"/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Keith Hazelton</fullName>
      <givenName>Keith</givenName>
      <familyName>Hazelton</familyName>
      <emailAddress>khazelton@gmail.com</emailAddress>
      <telephoneNumber>6084694523</telephoneNumber>
      <credentials>
         <password>
            <failedLogins>0</failedLogins>
            <lastSuccessfulLogin>
               <timestamp>2018-04-12T23:13:36.628Z</timestamp>
               <from>207.210.1.255</from>
            </lastSuccessfulLogin>
            <previousSuccessfulLogin>
               <timestamp>2018-04-12T23:13:23.403Z</timestamp>
               <from>207.210.1.255</from>
            </previousSuccessfulLogin>
            <lastFailedLogin>
               <timestamp>2018-04-11T16:54:16.424Z</timestamp>
               <from>207.210.1.255</from>
            </lastFailedLogin>
            <metadata>
               <createTimestamp>2018-04-11T16:52:54.761Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>+QLWj6qb3H/EjbfMkBLDaADpVPOY0ITnDpibisoGLHw=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="15487aaf-b43c-4781-91b5-1db3e21c5948"
                version="3"
                xsi:type="c:UserType">
      <name>ekromhout</name>
      <metadata>
         <requestTimestamp>2018-04-11T18:23:29.894Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T18:23:30.046Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         <modifyTimestamp>2018-04-11T18:24:27.954Z</modifyTimestamp>
         <modifierRef oid="00000000-0000-0000-0000-000000000002"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
      </metadata>
      <operationExecution id="1">
         <timestamp>2018-04-11T18:23:30.106Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000942</token>
            </executionResult>
            <objectName>ekromhout</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-11T18:24:28.022Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000001050</token>
            </executionResult>
            <objectName>ekromhout</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-11T18:24:27.895Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-11T18:24:27.954Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000004"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <administrativeStatus>enabled</administrativeStatus>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T18:23:29.902Z</enableTimestamp>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000004"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Ethan Kromhout</fullName>
      <givenName>Ethan</givenName>
      <familyName>Kromhout</familyName>
      <emailAddress>ethan@unc.edu</emailAddress>
      <telephoneNumber>9194450056</telephoneNumber>
      <organizationalUnit>UNC Chapel Hill</organizationalUnit>
      <credentials>
         <password>
            <metadata>
               <createTimestamp>2018-04-11T18:23:29.902Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>Cdsl3lafggwjT0lSrEdtemX5VH5HqB30vuaa3LIeykk=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
   <apti:object oid="3170d15b-d6cf-4e72-9f60-283052113a80"
                version="4"
                xsi:type="c:UserType">
      <name>EMPP00032</name>
      <metadata>
         <requestTimestamp>2018-04-11T18:13:39.266Z</requestTimestamp>
         <requestorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <createTimestamp>2018-04-11T18:13:39.686Z</createTimestamp>
         <creatorRef oid="00000000-0000-0000-0000-000000000002"
                     relation="org:default"
                     type="c:UserType"/>
         <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
         <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                        relation="org:default"
                        type="c:TaskType"/>
         <modifyTimestamp>2018-04-13T18:56:45.536Z</modifyTimestamp>
         <modifierRef oid="00000000-0000-0000-0000-000000000002"
                      relation="org:default"
                      type="c:UserType"/>
         <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
         <lastProvisioningTimestamp>2018-04-13T18:56:45.535Z</lastProvisioningTimestamp>
      </metadata>
      <operationExecution id="1">
         <timestamp>2018-04-11T18:13:39.838Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>add</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000000828</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <taskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                  relation="org:default"
                  type="c:TaskType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</channel>
      </operationExecution>
      <operationExecution id="3">
         <timestamp>2018-04-13T18:56:45.841Z</timestamp>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
               <status>success</status>
               <token>1000000000000009278</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
         </operation>
         <operation>
            <objectDelta>
               <t:changeType>modify</t:changeType>
               <t:objectType>c:UserType</t:objectType>
            </objectDelta>
            <executionResult>
               <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.linkShadow</operation>
               <status>success</status>
               <token>1000000000000009279</token>
            </executionResult>
            <objectName>EMPP00032</objectName>
            <resourceOid>d0811790-1d80-11e4-86b2-3c970e467874</resourceOid>
            <resourceName>OpenLDAP</resourceName>
         </operation>
         <status>success</status>
         <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                       relation="org:default"
                       type="c:UserType"/>
         <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
      </operationExecution>
      <linkRef oid="fa85efe7-4189-4919-bb0d-d57173394b6b"
               relation="org:default"
               type="c:ShadowType"/>
      <assignment id="2">
         <metadata>
            <requestTimestamp>2018-04-13T18:56:45.343Z</requestTimestamp>
            <requestorRef oid="00000000-0000-0000-0000-000000000002"
                          relation="org:default"
                          type="c:UserType"/>
            <createTimestamp>2018-04-13T18:56:45.536Z</createTimestamp>
            <creatorRef oid="00000000-0000-0000-0000-000000000002"
                        relation="org:default"
                        type="c:UserType"/>
            <createChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</createChannel>
         </metadata>
         <targetRef oid="00000000-0000-0000-0000-000000000008"
                    relation="org:default"
                    type="c:RoleType"/>
         <activation>
            <effectiveStatus>enabled</effectiveStatus>
         </activation>
      </assignment>
      <activation>
         <effectiveStatus>enabled</effectiveStatus>
         <enableTimestamp>2018-04-11T18:13:39.266Z</enableTimestamp>
      </activation>
      <iteration>0</iteration>
      <iterationToken/>
      <roleMembershipRef oid="00000000-0000-0000-0000-000000000008"
                         relation="org:default"
                         type="c:RoleType"/>
      <fullName>Ethan Kromhout</fullName>
      <givenName>Ethan</givenName>
      <familyName>Kromhout</familyName>
      <title>Developer</title>
      <emailAddress>ethan32@unc.edu</emailAddress>
      <telephoneNumber>9194450056</telephoneNumber>
      <organizationalUnit>TIER</organizationalUnit>
      <credentials>
         <password>
            <metadata>
               <createTimestamp>2018-04-11T18:13:39.266Z</createTimestamp>
               <creatorRef oid="00000000-0000-0000-0000-000000000002"
                           relation="org:default"
                           type="c:UserType"/>
               <createChannel>http://midpoint.evolveum.com/xml/ns/public/provisioning/channels-3#import</createChannel>
               <createTaskRef oid="a0a29210-a6fb-4a2b-8e40-e4555f978ac9"
                              relation="org:default"
                              type="c:TaskType"/>
            </metadata>
            <value>
               <t:encryptedData>
                  <t:encryptionMethod>
                     <t:algorithm>http://www.w3.org/2001/04/xmlenc#aes128-cbc</t:algorithm>
                  </t:encryptionMethod>
                  <t:keyInfo>
                     <t:keyName>VVUxEtWRp7umq/CrV34PGgh2Lws=</t:keyName>
                  </t:keyInfo>
                  <t:cipherData>
                     <t:cipherValue>LNtLjBEHyDxnFrM8c/4lrIDeN+OAaaDfdCsw+dcCOxg=</t:cipherValue>
                  </t:cipherData>
               </t:encryptedData>
            </value>
         </password>
      </credentials>
   </apti:object>
</t:object>
_____________________
h6. 2018-04-12 14:43  more LDAP

ldapsearch -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -s sub "objectslass=*"

ldapmodify -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -f olcAccess.ldif
_____________________
h6. 2018-04-12 13:01 More LDAP prep on new EC2

[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101
total 24
drwxr-xr-x. 5 midpoint midpoint  126 Mar 27 17:45 .
drwxr-xr-x. 3 root     root       41 Apr 11 16:13 ..
-rw-r--r--. 1 midpoint midpoint 2195 Feb 18 19:20 docker-compose.yaml
-rw-r--r--. 1 midpoint midpoint  120 Apr  6 17:02 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 8196 Apr  6 17:02 .DS_Store
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 mp-openldap
drwxrwxr-x. 2 midpoint midpoint   85 Apr 11 16:13 mp-postgres
drwxrwxr-x. 4 midpoint midpoint 4096 Mar 27 17:45 mp-training
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap
total 16
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 .
drwxr-xr-x. 5 midpoint midpoint  126 Mar 27 17:45 ..
drwxrwxr-x. 3 midpoint midpoint   54 Apr 11 16:13 bootstrap
-rw-r--r--. 1 midpoint midpoint  120 Feb 18 19:27 Dockerfile
-rw-r--r--. 1 midpoint midpoint  120 Mar 27 17:48 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 6148 Mar 27 17:48 .DS_Store
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap/bootstrap
total 12
drwxrwxr-x. 3 midpoint midpoint   54 Apr 11 16:13 .
drwxrwxr-x. 3 midpoint midpoint   77 Apr 11 16:13 ..
-rw-r--r--. 1 midpoint midpoint  120 Mar 29 00:16 ._.DS_Store
-rw-r--r--. 1 midpoint midpoint 6148 Mar 29 00:16 .DS_Store
drwxrwxr-x. 2 midpoint midpoint  113 Feb 18 19:27 ldif
[khazelton@ip-172-31-32-222 ~]$ ls -la /opt/mid101/mp-openldap/Dockerfile
-rw-r--r--. 1 midpoint midpoint 120 Feb 18 19:27 /opt/mid101/mp-openldap/Dockerfile
[khazelton@ip-172-31-32-222 ~]$ cat /opt/mid101/mp-openldap/Dockerfile
FROM osixia/openldap
MAINTAINER ivan.noris@evolveum.com

ADD bootstrap /container/service/slapd/assets/config/bootstrap
[khazelton@ip-172-31-32-222 ~]$ ls -la /container
ls: cannot access /container: No such file or directory
[khazelton@ip-172-31-32-222 ~]$ sudo docker exec -it 2ab3a6209c26 /bin/bash

- look at /container/service/slapd/assets/config/bootstrap

root@example:/# ls -la /container

total 0
drwxr-xr-x. 1 root root  51 Apr 11 23:51 .
drwxr-xr-x. 1 root root  90 Apr 11 23:51 ..
drwx------. 1 root root  39 Apr 11 23:51 environment
drwxr-xr-x. 6 root root  90 Apr 11 23:51 run
drwxr-xr-x. 1 root root  51 Apr 11 23:51 service
drwxrwxr-x. 1 root root  24 Mar 15 15:34 service-available
drwxrwxr-x. 2 root root 180 Mar 15 13:28 tool

root@example:/# ls -la /container/service/slapd/assets/config/bootstrap

total 16
drwxrwxr-x. 1 openldap openldap   85 Apr 11 23:50 .
drwxrwxr-x. 1 openldap openldap   53 Dec  5 14:25 ..
-rw-r--r--. 1 openldap openldap  120 Mar 29 00:16 ._.DS_Store
-rw-r--r--. 1 openldap openldap 6148 Mar 29 00:16 .DS_Store
drwxrwxr-x. 1 openldap openldap  246 Apr 11 23:51 ldif
-rw-rw-r--. 1 openldap openldap   75 Dec  5 14:25 README.md
drwxrwxr-x. 1 openldap openldap  105 Apr 11 23:51 schema
root@example:/#

doot@example:/# cat /container/service/slapd/assets/config/bootstrap/README.md

Bootstrap config, for a container started without an existing ldap config.

/container/service/slapd/assets/config/bootstrap/schema/mmc/README.md

Mandriva Management Console (MMC) ldap schemas, delete the forlder if not needed ;)
_____________________
h6. 2018-04-12 11:24  More LDAP prep on old EC2

- from oMbP connect to older EC2 with OpenLDAP installed

ssh kh@demo.testbed.tier.internet2.edu -i ~/.ssh/kh

_____________________
h6. 2018-04-12 08:10  troubleshooting LDAP

ldapadd -D "cn=admin,dc=example,dc=com" -w secret -H ldap://localhost:10389 -f ldif/100-example.ldif

-D "cn=admin,dc=example,dc=com" -w secret
ldapadd -Y EXTERNAL -H ldapi:/// -f admin.ldif

ldapsearch -x -W -D "cn=admin,dc=example,dc=com" -b "" -s base -H ldap://localhost

ldapsearch -D "cn=admin,dc=example,dc=com" -w secret -s sub "objectslass=*"

- PROGRESS (from ec2 host for midPoint Docker images)

[khazelton@ip-172-31-32-222 bootstrap]$ cat ldif/100-example.ldif

dn: ou=people,dc=example,dc=com
changetype: add
objectClass: organizationalUnit
ou: people

dn: ou=groups,dc=example,dc=com
changetype: add
objectClass: organizationalUnit
ou: groups

dn: ou=Administrators,dc=example,dc=com
changetype: add
objectclass: top
objectclass: organizationalunit
ou: Administrators

dn: cn=idm,ou=Administrators,dc=example,dc=com
changetype: add
objectclass: top
objectclass: person
cn: idm
sn: IDM Administrator
description: Special LDAP acccount used by the IDM
  to access the LDAP data.
# password is: secret
userPassword: {SSHA}IHr3vWr2J8CSCrQ6aR2xUD5SP1e+jTPJ

dn: cn=TerraForming,ou=groups,dc=example,dc=com
changetype: add
objectClass: groupOfNames
cn: TerraForming
member: cn=whatever,o=wherever

[khazelton@ip-172-31-32-222 bootstrap]$ ldapadd -D "cn=admin,dc=example,dc=com" -w secret -H ldap://localhost:10389 -f ldif/100-example.ldif

adding new entry "ou=people,dc=example,dc=com"
adding new entry "ou=groups,dc=example,dc=com"
adding new entry "ou=Administrators,dc=example,dc=com"
adding new entry "cn=idm,ou=Administrators,dc=example,dc=com"
adding new entry "cn=TerraForming,ou=groups,dc=example,dc=com"

[khazelton@ip-172-31-32-222 bootstrap]$ ldapsearch -D "cn=idm,ou=Administrators,dc=example,dc=com" -H ldap://localhost:10389 -w secret -s sub "objectslass=*"

# extended LDIF
#
# LDAPv3
# base <> (default) with scope subtree
# filter: objectslass=*
# requesting: ALL
#

# search result
search: 2
result: 32 No such objecth6. 2018-04-11 18:18  problems with openldap container solved by installing docker-ce and rebuilding

| *** Running /container/run/startup/:ssl-tools...
openldap_1     | *** Running /container/run/startup/slapd...
openldap_1     | chown: changing ownership of '/var/lib/ldap': Permission denied
openldap_1     | *** /container/run/startup/slapd failed with status 1
_____________________
h6. 2018-04-11 12:05  get mP running on midpoint2.testbed.tier.internet2.edu

-from oMbP

scp ~/mid101.tar.gz khazelton@midpoint2.testbed.tier.internet2.edu:

ssh -i ~/.ssh/kh_rsa -l khazelton midpoint2.testbed.tier.internet2.edu

_____________________
h6. 2018-04-08 15:49  formula for quick setup of a Linode centos host ready for Docker containers

- create and launch a base Centos 7 linode

- root session via lish console

# disable selinux
vim /etc/sysconfig/selinux
...
SELINUX=disable
...
reboot
...
sestatus

# configure ssh for no password, public key authN, no root ssh, port 58......
cd /etc/ssh
rm /etc/ssh/sshd_config
vim /etc/ssh/sshd_config
[paste contents of sshd_config from oMbP:_notesPlus/sshd_config]
save

service sshd restart

adduser kh
passwd kh
usermod -a -G wheel kh
su kh

cd /home/kh/
mkdir .ssh
chmod 700 .ssh
cd .ssh
vim authorized_keys
[copy/paste oMbP:.ssh/kh_rsa.pub]
chmod 600 .ssh/authorized_keys  <== if not already correct

- exit lish

ssh -p 58.... -i ~/.ssh/kh_rsa -l kh cerif.org

- install docker

sudo yum install docker

[kh@metazome ~]$ sudo systemctl start docker
[kh@metazome ~]$ sudo systemctl enable docker  <== enables restart at boot time
[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

- showing whole process

---------- history
    1  cd /home/kh
    2  mkdir .ssh
    3  chmod 700 .ssh
    4  cd .ssh
    ...
    9  vim authorized_keys
       [copy/paste oMbP:.ssh/kh_rsa.pub]
   ...
   11  chmod 600 authorized_keys
   ...
   18  sudo yum install docker
   19  sudo systemctl start docker
   20  docker -v
   21  sudo systemctl enable docker
   22  sudo systemctl status docker
   ...
   28  sudo yum install epel-release
   29  sudo yum install -y python-pip
   32  sudo pip install --upgrade pip
   33  sudo yum upgrade python*
   30  sudo pip install docker-compose
   ...   test docker install ...
   39  cd ~/
   40  mkdir hiUrth
   41  cd hiUrth
   42  nano docker-compose.yml
   43  cat docker-compose.yml
       my-test:
       image: hello-world
       -----
----------
[kh@metazome hiUrth]$ sudo docker-compose up
[sudo] password for kh:
Pulling my-test (hello-world:)...
Trying to pull repository docker.io/library/hello-world ...
latest: Pulling from docker.io/library/hello-world
ca4f61b1923c: Pull complete
Digest: sha256:97ce6fa4b6cdc0790cda65fe7290b74cfebd9fa0c9b8c38e979330d547d22ce1
Status: Downloaded newer image for docker.io/hello-world:latest
Creating hiurth_my-test_1 ... done
Attaching to hiurth_my-test_1
my-test_1  |
my-test_1  | Hello from Docker!
my-test_1  | This message shows that your installation appears to be working correctly.
my-test_1  |
my-test_1  | To generate this message, Docker took the following steps:
my-test_1  |  1. The Docker client contacted the Docker daemon.
my-test_1  |  2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
my-test_1  |     (amd64)
my-test_1  |  3. The Docker daemon created a new container from that image which runs the
my-test_1  |     executable that produces the output you are currently reading.
my-test_1  |  4. The Docker daemon streamed that output to the Docker client, which sent it
my-test_1  |     to your terminal.
my-test_1  |
my-test_1  | To try something more ambitious, you can run an Ubuntu container with:
my-test_1  |  $ docker run -it ubuntu bash
my-test_1  |
my-test_1  | Share images, automate workflows, and more with a free Docker ID:
my-test_1  |  https://cloud.docker.com/
my-test_1  |
my-test_1  | For more examples and ideas, visit:
my-test_1  |  https://docs.docker.com/engine/userguide/
my-test_1  |
hiurth_my-test_1 exited with code 0

[kh@metazome hiUrth]$ sudo docker run -it ubuntu bash
Unable to find image 'ubuntu:latest' locally
Trying to pull repository docker.io/library/ubuntu ...
latest: Pulling from docker.io/library/ubuntu
22dc81ace0ea: Pull complete
1a8b3c87dba3: Pull complete
91390a1c435a: Pull complete
07844b14977e: Pull complete
b78396653dae: Pull complete
Digest: sha256:e348fbbea0e0a0e73ab0370de151e7800684445c509d46195aef73e090a49bd6
Status: Downloaded newer image for docker.io/ubuntu:latest

root@8c46e788edcd:/# ls -la
total 72
drwxr-xr-x   1 root root 4096 Apr 10 23:36 .
drwxr-xr-x   1 root root 4096 Apr 10 23:36 ..
-rwxr-xr-x   1 root root    0 Apr 10 23:36 .dockerenv
drwxr-xr-x   2 root root 4096 Feb 28 19:14 bin
drwxr-xr-x   2 root root 4096 Apr 12  2016 boot
drwxr-xr-x   5 root root  360 Apr 10 23:36 dev
drwxr-xr-x   1 root root 4096 Apr 10 23:36 etc
drwxr-xr-x   2 root root 4096 Apr 12  2016 home
drwxr-xr-x   8 root root 4096 Sep 13  2015 lib
drwxr-xr-x   2 root root 4096 Feb 28 19:14 lib64
drwxr-xr-x   2 root root 4096 Feb 28 19:13 media
drwxr-xr-x   2 root root 4096 Feb 28 19:13 mnt
drwxr-xr-x   2 root root 4096 Feb 28 19:13 opt
dr-xr-xr-x 141 root root    0 Apr 10 23:36 proc
drwx------   2 root root 4096 Feb 28 19:14 root
drwxr-xr-x   1 root root 4096 Apr 10 23:36 run
drwxr-xr-x   1 root root 4096 Mar  6 22:17 sbin
drwxr-xr-x   2 root root 4096 Feb 28 19:13 srv
dr-xr-xr-x  13 root root    0 Apr 10 23:36 sys
drwxrwxrwt   2 root root 4096 Feb 28 19:14 tmp
drwxr-xr-x   1 root root 4096 Feb 28 19:13 usr
drwxr-xr-x   1 root root 4096 Feb 28 19:14 var

root@8c46e788edcd:/# exit
----------

- move midpoint files into place

Keiths-Office-MacBook-Pro:opt khazelton$ scp -P 58263 mid101.tar.gz kh@cerif.org:

[kh@metazome ~]$ pwd
/home/kh
[kh@metazome ~]$ ls -lt

[kh@metazome ~]$ sudo mv mid101.tar.gz /opt

[kh@metazome ~]$ cd /opt

[kh@metazome opt]$ ls -la
total 221840
drwxr-xr-x.  2 root root      4096 Apr 11 01:11 .
drwxr-xr-x  18 root root      4096 Apr 10 21:29 ..
-rw-r--r--   1 kh   kh   227152941 Apr 11 01:03 mid101.tar.gz

[kh@metazome opt]$ sudo tar xvf mid101.tar.gz

[kh@metazome opt]$ tree
.
├── mid101
│   ├── docker-compose.yaml
│   ├── mp-openldap
│   │   ├── bootstrap
│   │   │   └── ldif
│   │   │       ├── 03-memberOf.ldif
│   │   │       ├── 03-sssvlv.ldif
│   │   │       ├── 100-example.ldif
│   │   │       └── 110-example-idmadmin-aci.ldif
│   │   └── Dockerfile
│   ├── mp-postgres
│   │   ├── 10-create-midpoint.sql
│   │   ├── 20-postgres-3.7-all.sql
│   │   └── Dockerfile
│   └── mp-training
│       ├── config-postgresql.xml
│       ├── custom_connectors
│       │   ├── connector-csv-2.1.99.jar
│       │   └── scriptedsql-connector-1.1.2.0.em3.jar
│       ├── Dockerfile
│       ├── extension-example.xsd
│       ├── mid101-flatfiles [error opening dir]
│       ├── mid101-flatfiles.zip
│       ├── midpoint-3.7.1-SNAPSHOT-dist.tar.gz
│       └── midpoint-entrypoint.sh
└── mid101.tar.gz

8 directories, 18 files

[kh@metazome mid101]$ sudo docker-compose build

Building openldap
Step 1/3 : FROM osixia/openldap
Trying to pull repository docker.io/osixia/openldap ...
latest: Pulling from docker.io/osixia/openldap
2a72cbf407d6: Pull complete
cae303c26086: Pull complete
32d1584efa46: Pull complete
c3f4b8058465: Pull complete
a986821b4b4d: Pull complete
ac57fad97e90: Pull complete
d1e97f43f6f1: Pull complete
31e52d2f2b7f: Pull complete
Digest: sha256:bb6485f1bf63d5b52318d11dcf2285d83285c893eb06a2bbe36460ccb28eb4c8
Status: Downloaded newer image for docker.io/osixia/openldap:latest
 ---> 6fedb3135d7d
Step 2/3 : MAINTAINER ivan.noris@evolveum.com
 ---> Running in 15c01f475577
 ---> 9969d4a28568
Removing intermediate container 15c01f475577
Step 3/3 : ADD bootstrap /container/service/slapd/assets/config/bootstrap
 ---> 6808332a4b47
...
...
Step 6/8 : COPY midpoint-entrypoint.sh /midpoint-entrypoint.sh
 ---> 350e7ceabcb1
Removing intermediate container 47826748f175
Step 7/8 : ENTRYPOINT /midpoint-entrypoint.sh
 ---> Running in 5a0674c25129
 ---> 7be81969282b
Removing intermediate container 5a0674c25129
Step 8/8 : CMD /bin/su -c /usr/bin/java -Xmx2048M -Xms2048M -Dfile.encoding=UTF8 -Dmidpoint.home=/opt/training/midpoint/var -jar /opt/training/midpoint/lib/midpoint.war midpoint
 ---> Running in c7826f14ebfe
 ---> 0a7b14dd951e
Removing intermediate container c7826f14ebfe
Successfully built 0a7b14dd951e

[kh@metazome mid101]$ sudo docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED              SIZE
ubuntu-mid101               2018.A.docker       0a7b14dd951e        27 seconds ago       487 MB
postgres-mid101             2018.A.docker       7005190955ce        55 seconds ago       37.2 MB
openldap-mid101             2018.A.docker       6808332a4b47        About a minute ago   223 MB
docker.io/osixia/openldap   latest              6fedb3135d7d        3 weeks ago          223 MB
docker.io/ubuntu            latest              f975c5035748        5 weeks ago          112 MB
docker.io/ubuntu            xenial              f975c5035748        5 weeks ago          112 MB
docker.io/postgres          9.5-alpine          e61724866da9        5 weeks ago          37.1 MB
docker.io/hello-world       latest              f2a91732366c        4 months ago         1.85 kB

[kh@metazome mid101]$ sudo docker-compose up

Creating network "mid101_default" with the default driver
Creating volume "mid101_midpoint-volume" with default driver
Creating volume "mid101_openldap-conf-volume" with default driver
Creating volume "mid101_pgdata-volume" with default driver
Creating volume "mid101_openldap-cert-volume" with default driver
Creating volume "mid101_openldap-data-volume" with default driver
Creating mid101_openldap_1 ... done
Creating mid101_postgres_1 ... done
Creating mp-training       ... done
Attaching to mid101_postgres_1, mid101_openldap_1, mp-training
...

- Browse to http://cerif.org:18080/midpoint

- successful login to midPoint UI as administrator

- QED: These notes show one how to start w bare CentOS 7.4 and end up with a functioning midPoint application

[kh@metazome mid101]$ sudo docker exec -u midpoint -it 189dbed08195 /bin/bash

midpoint@mp-training:/$ ls -la
total 76
drwxr-xr-x   1 root root 4096 Apr 11 01:21 .
drwxr-xr-x   1 root root 4096 Apr 11 01:21 ..
-rwxr-xr-x   1 root root    0 Apr 11 01:21 .dockerenv
drwxr-xr-x   1 root root 4096 Apr 11 01:20 bin
drwxr-xr-x   2 root root 4096 Apr 12  2016 boot
drwxr-xr-x   5 root root  360 Apr 11 01:22 dev
drwxr-xr-x   1 root root 4096 Apr 11 01:21 etc
drwxr-xr-x   1 root root 4096 Apr 11 01:20 home
drwxr-xr-x   1 root root 4096 Sep 13  2015 lib
drwxr-xr-x   2 root root 4096 Feb 28 19:14 lib64
drwxr-xr-x   2 root root 4096 Feb 28 19:13 media
-rwxr-xr-x   1 root root  810 Feb 18 19:33 midpoint-entrypoint.sh
drwxr-xr-x   2 root root 4096 Feb 28 19:13 mnt
drwxr-xr-x   1 root root 4096 Apr 11 01:20 opt
dr-xr-xr-x 168 root root    0 Apr 11 01:22 proc
drwx------   2 root root 4096 Feb 28 19:14 root
drwxr-xr-x   1 root root 4096 Apr 11 01:20 run
drwxr-xr-x   1 root root 4096 Mar  6 22:17 sbin
drwxr-xr-x   2 root root 4096 Feb 28 19:13 srv
dr-xr-xr-x  13 root root    0 Apr 10 23:37 sys
drwxrwxrwt   1 root root 4096 Apr 11 01:43 tmp
drwxr-xr-x   1 root root 4096 Feb 28 19:13 usr
drwxr-xr-x   1 root root 4096 Feb 28 19:14 var

midpoint@mp-training:/$ cat opt/training/midpoint/var/log/midpoint.log

2018-04-11 01:22:08,885 [] [main] INFO (org.springframework.boot.SpringApplication):
                   _ _____              _
             _    | |  _  \     _     _| |_
   ___ ____ (_) __| | |_) |___ (_)___|_   _|
  |  _ ` _ `| |/ _  |  __/  _ \| |  _` | |
  | | | | | | | (_| | |  | (_) | | | | | |_
  |_| |_| |_|_|\____|_|  \____/|_|_| |_|\__|  by Evolveum and partners

  Licensed under the Apache License, Version 2.0 see: http://www.apache.org/licenses/LICENSE-2.0
  Version :  3.7.1-SNAPSHOT
  Sources :  https://github.com/Evolveum/midpoint.git  branch:  support-3.7
  Bug reporting system : http://jira.evolveum.com/
  Product information : http://wiki.evolveum.com/display/midPoint


2018-04-11 01:22:09,037 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Starting MidPointSpringApplication on mp-training with PID 14 (/opt/training/midpoint/lib/midpoint.war started by midpoint in /)
2018-04-11 01:22:09,038 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): No active profile set, falling back to default profiles: default
2018-04-11 01:22:14,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): midpoint.home = /opt/training/midpoint/var/
2018-04-11 01:22:14,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/ already exists. Reusing it.
2018-04-11 01:22:14,216 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/icf-connectors'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/idm-legacy'. Creating.
2018-04-11 01:22:14,219 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/log already exists. Reusing it.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/schema'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/import'. Creating.
2018-04-11 01:22:14,219 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/export'. Creating.
2018-04-11 01:22:14,220 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/tmp'. Creating.
2018-04-11 01:22:14,220 [] [main] WARN (com.evolveum.midpoint.init.ApplicationHomeSetup): Missing midPoint home directory '/opt/training/midpoint/var/lib'. Creating.
2018-04-11 01:22:14,223 [] [main] INFO (com.evolveum.midpoint.init.StartupConfiguration): Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
2018-04-11 01:22:21,756 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.ConfigurablePrismContextFactory): Loading extension schemas from folder '/opt/training/midpoint/var//schema'.
2018-04-11 01:22:36,527 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.prism.crypto.ProtectorImpl): Using file keystore at /opt/training/midpoint/var//keystore.jceks
2018-04-11 01:22:36,552 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Repository factory class name from configuration 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'.
2018-04-11 01:22:36,553 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'
2018-04-11 01:22:36,567 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Initializing SQL repository factory
2018-04-11 01:22:36,591 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository is not running in embedded mode.
2018-04-11 01:22:36,592 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlPerformanceMonitor): SQL Performance Monitor initialized (level = 0).
2018-04-11 01:22:36,592 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository initialization finished.
2018-04-11 01:22:36,593 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.cache.RepositoryCacheFactory'
2018-04-11 01:22:36,948 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Loading datasource.
2018-04-11 01:22:36,948 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Constructing default C3P0 datasource with connection pooling; JDBC URL: jdbc:postgresql://postgres/midpoint
2018-04-11 01:22:41,411 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialization.
2018-04-11 01:22:41,429 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager: Quartz Job Store: JDBC, NOT clustered. Threads: 10
2018-04-11 01:22:41,430 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerConfiguration): Quartz database is at jdbc:postgresql://postgres/midpoint (a JDBC URL)
2018-04-11 01:22:41,465 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.NodeRegistrar): Registering this node in the repository as DefaultNode at mp-training:20001
2018-04-11 01:22:41,911 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Initializing Quartz scheduler (but not starting it yet).
2018-04-11 01:22:42,056 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): ... Quartz scheduler initialized.
2018-04-11 01:22:42,057 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.ExecutionManager): Quartz scheduler execution limits set to: {null=null, DefaultNode=null, *=0} (were: null)
2018-04-11 01:22:42,057 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronizing Quartz job store with midPoint repository.
2018-04-11 01:22:42,123 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronization of midpoint and Quartz task store finished. 0 task(s) existing in midPoint repository successfully processed, resulting in 0 updated Quartz job(s). 0 task(s) removed from Quartz job store. Processing of 0 task(s) failed.
2018-04-11 01:22:42,123 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialized
2018-04-11 01:22:42,150 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.wf.impl.WfConfiguration): Workflows are disabled.
2018-04-11 01:22:42,297 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.audit.impl.LoggerAuditServiceFactory'
2018-04-11 01:22:42,305 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory'
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Initializing Sql audit service factory.
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): SQL repository already initialized.
2018-04-11 01:22:42,313 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Sql audit service factory initialization complete.
2018-04-11 01:22:53,340 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-csv version: 2.1
2018-04-11 01:22:53,460 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-databasetable version: 1.4.2.0
2018-04-11 01:22:53,483 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-ldap version: 1.5.1
2018-04-11 01:22:56,735 [] [main] INFO (com.evolveum.midpoint.wf.impl.WfHook): Workflow change hook is not registered, because workflows are disabled.
2018-04-11 01:22:57,497 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization.
2018-04-11 01:22:57,501 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization finished successfully.
2018-04-11 01:22:57,507 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial object import (if necessary).
2018-04-11 01:22:57,521 [] [main] WARN (com.evolveum.midpoint.init.InitialDataImport): Failed to create temporary directory for initial objects /opt/training/midpoint/var//tmp. Maybe it already exists
2018-04-11 01:22:57,606 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 010-value-policy.xml.
2018-04-11 01:22:57,659 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.653+0000 eid=1523409777653-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000003({http://midpoint.evolveum.com/xml/ns/public/common/common-3}valuePolicy), TO=null, D=[00000000-0000-0000-0000-000000000003:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:57,761 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.761+0000 eid=1523409777761-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000003, targetType={.../common/common-3}ValuePolicyType, targetName=Default Password Policy, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000003:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:57,928 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created valuePolicy:00000000-0000-0000-0000-000000000003(Default Password Policy) as part of initial import
2018-04-11 01:22:57,936 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 015-security-policy.xml.
2018-04-11 01:22:57,963 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:57.952+0000 eid=1523409777952-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000120({http://midpoint.evolveum.com/xml/ns/public/common/common-3}securityPolicy), TO=null, D=[00000000-0000-0000-0000-000000000120:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:58,022 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.013+0000 eid=1523409778013-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000120, targetType={.../common/common-3}SecurityPolicyType, targetName=Default Security Policy, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000120:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:58,119 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created securityPolicy:00000000-0000-0000-0000-000000000120(Default Security Policy) as part of initial import
2018-04-11 01:22:58,132 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 020-system-configuration.xml.
2018-04-11 01:22:58,151 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.143+0000 eid=1523409778143-0-1, et=ADD_OBJECT, es=REQUEST, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=ObjectType:00000000-0000-0000-0000-000000000001({http://midpoint.evolveum.com/xml/ns/public/common/common-3}systemConfiguration), TO=null, D=[00000000-0000-0000-0000-000000000001:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=null, p=null, m=
2018-04-11 01:22:58,222 [] [main] INFO (com.evolveum.midpoint.audit.log): 2018-04-11T01:22:58.214+0000 eid=1523409778214-0-1, et=ADD_OBJECT, es=EXECUTION, sid=1523409777508-0-1, tid=1523409777508-0-1, toid=null, hid=null, nid=DefaultNode, raddr=null, I=null, T=PRV(oid=00000000-0000-0000-0000-000000000001, targetType={.../common/common-3}SystemConfigurationType, targetName=SystemConfiguration, relation={.../common/org-3}default), TO=null, D=[00000000-0000-0000-0000-000000000001:ADD], ch=http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#init, o=HANDLED_ERROR, p=null, m=Object of type 'SystemConfigurationType' with oid '00000000-0000-0000-0000-000000000001' was not found.
2018-04-11 01:22:58,289 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (version 0)
2018-04-11 01:22:58,289 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration
2018-04-11 01:22:58,360 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): New logging configuration applied
2018-04-11 01:22:58,365 [] [main] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryServiceImpl): Applying full text search configuration (0 entries)
2018-04-11 01:22:58,429 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created systemConfiguration:00000000-0000-0000-0000-000000000001(SystemConfiguration) as part of initial import
2018-04-11 01:22:58,435 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 030-role-superuser.xml.
2018-04-11 01:22:58,718 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-000000000004(Superuser) as part of initial import
2018-04-11 01:22:58,757 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 040-role-enduser.xml.
2018-04-11 01:22:59,169 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-000000000008(End user) as part of initial import
2018-04-11 01:22:59,178 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 041-role-approver.xml.
2018-04-11 01:22:59,394 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000a(Approver) as part of initial import
2018-04-11 01:22:59,402 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 042-role-reviewer.xml.
2018-04-11 01:22:59,604 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000b(Reviewer) as part of initial import
2018-04-11 01:22:59,612 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 043-role-delegator.xml.
2018-04-11 01:22:59,857 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created role:00000000-0000-0000-0000-00000000000c(Delegator) as part of initial import
2018-04-11 01:22:59,866 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 050-user-administrator.xml.
2018-04-11 01:23:00,426 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created user:00000000-0000-0000-0000-000000000002(administrator) as part of initial import
2018-04-11 01:23:00,432 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 060-task-cleanup.xml.
2018-04-11 01:23:00,618 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000005(Cleanup) as part of initial import
2018-04-11 01:23:00,625 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 070-task-validity.xml.
2018-04-11 01:23:00,764 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000006(Validity Scanner) as part of initial import
2018-04-11 01:23:00,770 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 080-task-trigger.xml.
2018-04-11 01:23:00,907 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created task:00000000-0000-0000-0000-000000000007(Trigger Scanner) as part of initial import
2018-04-11 01:23:00,922 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 090-report-audit.xml.
2018-04-11 01:23:01,047 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000009(Audit logs report) as part of initial import
2018-04-11 01:23:01,054 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 100-report-reconciliation.xml.
2018-04-11 01:23:01,150 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000100(Reconciliation report) as part of initial import
2018-04-11 01:23:01,157 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 110-report-user-list.xml.
2018-04-11 01:23:01,294 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000110(Users in MidPoint) as part of initial import
2018-04-11 01:23:01,300 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 130-report-certification-definitions.xml.
2018-04-11 01:23:01,399 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000130(Certification definitions report) as part of initial import
2018-04-11 01:23:01,406 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 140-report-certification-campaigns.xml.
2018-04-11 01:23:01,512 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000140(Certification campaigns report) as part of initial import
2018-04-11 01:23:01,519 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 150-report-certification-cases.xml.
2018-04-11 01:23:01,625 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000150(Certification cases report) as part of initial import
2018-04-11 01:23:01,631 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 160-report-certification-decisions.xml.
2018-04-11 01:23:01,733 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created report:00000000-0000-0000-0000-000000000160(Certification decisions report) as part of initial import
2018-04-11 01:23:01,752 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 200-lookup-languages.xml.
2018-04-11 01:23:01,883 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000200(Languages) as part of initial import
2018-04-11 01:23:01,890 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 210-lookup-locales.xml.
2018-04-11 01:23:02,071 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000210(Locales) as part of initial import
2018-04-11 01:23:02,788 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 220-lookup-timezones.xml.
2018-04-11 01:23:07,961 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000220(Timezones) as part of initial import
2018-04-11 01:23:07,967 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Starting initial import of file 230-lookup-lifecycle-state.xml.
2018-04-11 01:23:08,066 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Created lookupTable:00000000-0000-0000-0000-000000000230(Lifecycle States) as part of initial import
2018-04-11 01:23:08,077 [] [main] INFO (com.evolveum.midpoint.init.InitialDataImport): Initial object import finished (23 objects imported, 0 errors)
2018-04-11 01:23:08,081 [] [main] INFO (com.evolveum.midpoint.init.ModelInitialSetup): Model post initialization.
2018-04-11 01:23:08,092 [] [main] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Starting the Quartz scheduler
2018-04-11 01:23:08,092 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.ClusterManager): ClusterManager thread starting.
2018-04-11 01:23:08,104 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Freed 0 triggers from 'acquired' / 'blocked' state.
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Recovering 0 jobs that were in-progress at the time of the last shut-down.
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Recovery complete.
2018-04-11 01:23:08,111 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (currently applied version: 0, new version: 1)
2018-04-11 01:23:08,111 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration
2018-04-11 01:23:08,111 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Removed 0 'complete' triggers.
2018-04-11 01:23:08,112 [] [main] INFO (org.quartz.impl.jdbcjobstore.JobStoreTX): Removed 0 stale fired job entries.
2018-04-11 01:23:08,113 [] [main] INFO (org.quartz.core.QuartzScheduler): Scheduler midPointScheduler_$_DefaultNode started.
2018-04-11 01:23:08,175 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): New logging configuration applied
2018-04-11 01:23:08,178 [] [ClusterManagerThread] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryServiceImpl): Applying full text search configuration (0 entries)
2018-04-11 01:23:09,821 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:d37d5f34-e548-4513-b7c1-94d26b2575d9(Built-in ManualConnector v1.0.0)
2018-04-11 01:23:10,611 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:1618bd15-d038-4fdd-bc31-51b726344716(ConnId com.evolveum.polygon.connector.ldap.ad.AdLdapConnector v1.5.1)
2018-04-11 01:23:10,633 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:0fe9bbe6-314a-4f29-8b36-da71d6674122(ConnId org.identityconnectors.databasetable.DatabaseTableConnector v1.4.2.0)
2018-04-11 01:23:10,659 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:c4a91325-2e24-4ae8-beb2-db81bed960e9(ConnId com.evolveum.polygon.connector.ldap.LdapConnector v1.5.1)
2018-04-11 01:23:10,684 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:652b4164-e26d-4bfc-9b00-44a08787c3be(ConnId com.evolveum.polygon.connector.ldap.edirectory.EDirectoryLdapConnector v1.5.1)
2018-04-11 01:23:10,705 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ConnectorManager): Discovered new connector connector:3a17d748-af51-4c5c-8817-699b587b8b65(ConnId com.evolveum.polygon.connector.csv.CsvConnector v2.1)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId org.identityconnectors.databasetable.DatabaseTableConnector v1.4.2.0 (OID:0fe9bbe6-314a-4f29-8b36-da71d6674122)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.LdapConnector v1.5.1 (OID:c4a91325-2e24-4ae8-beb2-db81bed960e9)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.edirectory.EDirectoryLdapConnector v1.5.1 (OID:652b4164-e26d-4bfc-9b00-44a08787c3be)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: Built-in ManualConnector v1.0.0 (OID:d37d5f34-e548-4513-b7c1-94d26b2575d9)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.csv.CsvConnector v2.1 (OID:3a17d748-af51-4c5c-8817-699b587b8b65)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.provisioning.impl.ProvisioningServiceImpl): Discovered local connector {}connector: ConnId com.evolveum.polygon.connector.ldap.ad.AdLdapConnector v1.5.1 (OID:1618bd15-d038-4fdd-bc31-51b726344716)
2018-04-11 01:23:10,706 [] [main] INFO (com.evolveum.midpoint.init.ModelInitialSetup): Model post initialization finished successfully.
2018-04-11 01:23:11,057 [] [main] INFO (org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter): Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4d591d15: startup date [Wed Apr 11 01:22:09 UTC 2018]; root of context hierarchy
2018-04-11 01:23:12,024 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,024 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,135 [] [main] INFO (org.springframework.web.servlet.handler.SimpleUrlHandlerMapping): Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2018-04-11 01:23:12,809 [] [main] INFO (org.apache.coyote.http11.Http11NioProtocol): Initializing ProtocolHandler ["http-nio-8080"]
2018-04-11 01:23:12,843 [] [main] INFO (org.apache.coyote.http11.Http11NioProtocol): Starting ProtocolHandler ["http-nio-8080"]
2018-04-11 01:23:12,846 [] [midPointScheduler_Worker-1] INFO (org.hibernate.dialect.Dialect): HHH000400: Using dialect: com.evolveum.midpoint.repo.sql.util.MidPointPostgreSQLDialect
2018-04-11 01:23:12,847 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceImpl): Starting audit cleanup, deleting up to Thu Jan 11 01:23:12 UTC 2018 (duration '-P3M'), batch size 500.
2018-04-11 01:23:12,859 [] [main] INFO (org.apache.tomcat.util.net.NioSelectorPool): Using a shared selector for servlet write/read
2018-04-11 01:23:12,883 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceImpl): Audit cleanup based on age finished; deleted 0 entries in 0 seconds.
2018-04-11 01:23:12,884 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerQuartzImpl): Starting cleanup for closed tasks deleting up to Sun Mar 11 01:23:12 UTC 2018 (duration '-P1M').
2018-04-11 01:23:12,921 [] [midPointScheduler_Worker-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerQuartzImpl): Task cleanup procedure finished. Successfully deleted 0 tasks; there were problems with deleting 0 tasks.
2018-04-11 01:23:12,970 [] [main] INFO (org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer): Tomcat started on port(s): 8080 (http)
2018-04-11 01:23:12,990 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Started MidPointSpringApplication in 64.854 seconds (JVM running for 66.177)
2018-04-11 01:23:15,273 [] [http-nio-8080-exec-1] INFO (org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/]): Initializing Spring FrameworkServlet 'dispatcherServlet'
2018-04-11 01:23:15,273 [] [http-nio-8080-exec-1] INFO (org.springframework.web.servlet.DispatcherServlet): FrameworkServlet 'dispatcherServlet': initialization started
2018-04-11 01:23:15,324 [] [http-nio-8080-exec-1] INFO (org.springframework.web.servlet.DispatcherServlet): FrameworkServlet 'dispatcherServlet': initialization completed in 51 ms
2018-04-11 01:23:18,045 [] [http-nio-8080-exec-6] WARN (ro.isdc.wro.config.factory.ServletContextPropertyWroConfigurationFactory): [WARN] Cannot read properties file stream from default location: /WEB-INF/wro.properties. Using default configuration.
2018-04-11 01:42:51,025 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:51,025 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:51,026 [] [http-nio-8080-exec-4] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:42:59,758 [] [http-nio-8080-exec-8] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,962 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,963 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
2018-04-11 01:43:27,963 [] [http-nio-8080-exec-5] WARN (org.apache.wicket.Localizer): Tried to retrieve a localized string for a component that has not yet been added to the page. This can sometimes lead to an invalid or no localized resource returned. Make sure you are not calling Component#getString() inside your Component's constructor. Offending component: [DashboardSearchPanel [Component id = searchPanel]]
_____________________
h6. 2018-04-10 09:21  failed attempt quick setup of a Linode centos host ready for Docker containers, continued:  Docker Swarm

https://www.digitalocean.com/community/tutorials/how-to-create-a-cluster-of-docker-containers-with-docker-swarm-and-digitalocean-on-centos-7

- fix failed docker overlay, reload daemon, restart docker

sudo mv /etc/systemd/system/docker.service.d/override.conf /etc/systemd/system/docker.service.d/override.conf.off

Warning: docker.service changed on disk. Run 'systemctl daemon-reload' to reload units.

[kh@metazome ~]$ sudo systemctl daemon-reload

[kh@metazome ~]$ sudo systemctl start docker
[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

sudo cat /etc/systemd/system/docker.service.d/docker.conf
[Service]
ExecStart=
ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2376 -H unix://var/run/docker.sock

- Restart the docker service using systemd commands:

sudo systemctl daemon-reload
sudo systemctl restart docker

- Look for the dockerd process and confirm that your -H settings are listed.

- You can confirm that the exec took your override parameters by calling:

ps -ef | grep docker

root     13249     1  1 13:47 ?        00:00:00 /usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock
root     13258 13249  0 13:47 ?        00:00:00 docker-containerd --config /var/run/docker/containerd/containerd.toml
kh       13362 12726  0 13:48 pts/0    00:00:00 grep --color=auto docker
[kh@metazome ~]$



- sudo firewall-cmd --permanent --add-port=2377/tcp
success

sudo systemctl restart firewalld

- check that all ports are open

[kh@metazome ~]$ sudo firewall-cmd --list-ports
_____________________
h6. 2018-04-08 15:49  formula for quick setup of a Linode centos host ready for Docker containers

- create and launch a base Centos 7 linode

- root session via lish console

# disable selinux
vim /etc/sysconfig/selinux
...
SELINUX=disable
...
reboot
...
sestatus

# configure ssh for no password, public key authN, no root ssh, port 58......
cd /etc/ssh
rm /etc/ssh/sshd_config
vim /etc/ssh/sshd_config
[paste contents of sshd_config from oMbP:_notesPlus/sshd_config]
save

service sshd restart

adduser kh
passwd kh
usermod -a -G wheel kh
su kh

cd /home/kh/
mkdir .ssh
chmod 700 .ssh
cd .ssh
vim authorized_keys
[copy/paste oMbP:.ssh/kh_rsa.pub]
chmod 600 .ssh/authorized_keys  <== if not already correct

- exit lish

ssh -p 58.... -i ~/.ssh/kh_rsa -l kh cerif.org

- install docker

sudo yum install docker

[kh@metazome ~]$ sudo systemctl start docker

[kh@metazome ~]$ sudo systemctl enable docker  <== restart at boot time

[kh@metazome ~]$ sudo systemctl status docker

[kh@metazome ~]$ sudo systemctl status docker

● docker.service - Docker Application Container Engine
   Loaded: loaded (/usr/lib/systemd/system/docker.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-04-10 13:28:34 UTC; 19s ago
     Docs: https://docs.docker.com
 Main PID: 12795 (dockerd)
   Memory: 39.0M
   CGroup: /system.slice/docker.service
           ├─12795 /usr/bin/dockerd
           └─12804 docker-containerd --config /var/run/docker/containerd/containerd.toml

Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423008944Z" level=warning msg="Your kernel d...vice"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.423552276Z" level=info msg="Loading containe...art."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.424904680Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.425886718Z" level=warning msg="Running modpr...us 1"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.788873891Z" level=info msg="Default bridge (...ress"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.945608218Z" level=info msg="Loading containe...one."
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984186247Z" level=info msg="Docker daemon" c....0-ce
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.984277170Z" level=info msg="Daemon has compl...tion"
Apr 10 13:28:34 metazome.info dockerd[12795]: time="2018-04-10T13:28:34.991272383Z" level=info msg="API listen on /v...sock"
Apr 10 13:28:34 metazome.info systemd[1]: Started Docker Application Container Engine.
Hint: Some lines were ellipsized, use -l to show in full.

[kh@metazome mid101]$ cat /etc/environment

PATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/kh/.local/bin:/home/kh/bin
export $PATH


----------
- convert to use docker stack in place of docker-compose

- prep to run a docker swarm

Open protocols and ports between the hosts
The following ports must be available. On some systems, these ports are open by default.

TCP port 2377 for cluster management communications
TCP and UDP port 7946 for communication among nodes
UDP port 4789 for overlay network traffic

yum install -y firewalld

- start firewalld / enable on reboot

[kh@metazome mid101]$ sudo systemctl enable firewalld

[kh@metazome mid101]$ sudo service firewalld start

Redirecting to /bin/systemctl start firewalld.service

[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=https
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=ldap
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=slapd
Error: INVALID_SERVICE: 'slapd' not among existing services
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-service=ldaps
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=58263
Error: INVALID_PORT: bad port (most likely missing protocol), correct syntax is portid[-portid]/protocol
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=58263/tcp
success
[kh@metazome mid101]$ sudo firewall-cmd --permanent --add-port=5432/tcp
success
Metazome mid101]$ sudo firewall-cmd --permanent --add-port=2375/tcp
success
Metazome mid101]$ sudo firewall-cmd --permanent --add-port=2376/tcp
success

- All necessary ports are open:

sudo systemctl restart firewalld

[kh@metazome ~]$ sudo firewall-cmd --list-ports
58263/tcp 5432/tcp 2375/tcp 2376/tcp
[kh@metazome ~]$ sudo firewall-cmd --list-services
ssh dhcpv6-client https ldap ldaps

[kh@metazome mid101]$ sudo systemctl status firewalld
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2018-04-09 18:47:07 UTC; 1h 51min ago
     Docs: man:firewalld(1)
 Main PID: 30651 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─30651 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid
_____________________
h6. 2018-04-06 15:42  attempt at a smooth install on Showcase host from oMbP:~/mid101

tar -cvzf mid101.tar.gz mid101

a mid101
a mid101/.DS_Store
a mid101/docker-compose.yaml
a mid101/mp-openldap
a mid101/mp-postgres
a mid101/mp-training
a mid101/mp-training/.dockerignore
a mid101/mp-training/.DS_Store
a mid101/mp-training/config-postgresql.xml
a mid101/mp-training/custom_connectors
a mid101/mp-training/Dockerfile
a mid101/mp-training/extension-example.xsd
a mid101/mp-training/mid101-flatfiles
a mid101/mp-training/mid101-flatfiles.zip
a mid101/mp-training/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
a mid101/mp-training/midpoint-entrypoint.sh
a mid101/mp-training/mid101-flatfiles/csv-1-app-1.csv
a mid101/mp-training/mid101-flatfiles/csv-2-app-2.csv
a mid101/mp-training/mid101-flatfiles/csv-3-ldap.csv
a mid101/mp-training/mid101-flatfiles/source.csv
a mid101/mp-training/custom_connectors/connector-csv-2.1.99.jar
a mid101/mp-training/custom_connectors/scriptedsql-connector-1.1.2.0.em3.jar
a mid101/mp-postgres/10-create-midpoint.sql
a mid101/mp-postgres/20-postgres-3.7-all.sql
a mid101/mp-postgres/Dockerfile
a mid101/mp-openldap/.DS_Store
a mid101/mp-openldap/bootstrap
a mid101/mp-openldap/Dockerfile
a mid101/mp-openldap/bootstrap/.DS_Store
a mid101/mp-openldap/bootstrap/ldif
a mid101/mp-openldap/bootstrap/ldif/03-memberOf.ldif
a mid101/mp-openldap/bootstrap/ldif/03-sssvlv.ldif
a mid101/mp-openldap/bootstrap/ldif/100-example.ldif
a mid101/mp-openldap/bootstrap/ldif/110-example-idmadmin-aci.ldif

scp mid101.tar.gz kh@cerif.org:


...

Step 8/8 : CMD /bin/su -c /usr/bin/java -Xmx2048M -Xms2048M -Dfile.encoding=UTF8 -Dmidpoint.home=/opt/training/midpoint/var -jar /opt/training/midpoint/lib/midpoint.war midpoint
 ---> Running in 6a2f61624d0f
 ---> 76874ef42c90
Removing intermediate container 6a2f61624d0f
Successfully built 76874ef42c90

[kh@metazome mid101]$ sudo docker images
REPOSITORY                  TAG                 IMAGE ID            CREATED              SIZE
ubuntu-mid101               2018.A.docker       76874ef42c90        25 seconds ago       487 MB
postgres-mid101             2018.A.docker       b9b167f691eb        About a minute ago   37.2 MB
openldap-mid101             2018.A.docker       af5fc70e276c        About a minute ago   223 MB
<none>                      <none>              956a99509c3a        4 hours ago          260 MB
<none>                      <none>              9f3f8570553a        4 hours ago          37.2 MB
<none>                      <none>              26e1b2cf6a74        4 hours ago          223 MB
docker.io/osixia/openldap   latest              6fedb3135d7d        3 weeks ago          223 MB
docker.io/ubuntu            xenial              f975c5035748        4 weeks ago          112 MB
docker.io/postgres          9.5-alpine          e61724866da9        4 weeks ago          37.1 MB
go-demo                     latest              57ada52d1e0e        4 months ago         16.4 MB
docker.io/alpine            3.4                 dc98aa467aa0        5 months ago         4.81 MB
docker.io/golang            1.6                 63330314bb46        14 months ago        748 MB
docker.io/mongo             3.2.10              fe9198c04d62        17 months ago        342 MB

[kh@metazome mid101]$ sudo docker-compose up

_____________________
h6. 2018-04-06 06:17  Showcase prep

curl.exe --user administrator:entreg007 -H "Content-Type: application/xml" -X GET http://co-op.tech:8080/midpoint/ws/rest/users
_____________________
h6. 2018-03-28 20:00  successfully restarting midPoint containers

KeithsOfficeMBP:~ khazelton$ ls -la ~/opt/mPTrainingMaster
total 50424
drwxr-xr-x  10 khazelton  staff       340 Mar  1 08:08 .
drwxr-xr-x  35 khazelton  staff      1190 Mar 12 20:52 ..
-rw-r--r--@  1 khazelton  staff      6148 Mar 28 21:12 .DS_Store
-rw-r--r--@  1 khazelton  staff    989268 Feb 28 21:03 LABS-MID101.2018.A-docker.pdf
-rw-r--r--@  1 khazelton  staff      1457 Feb 28 21:05 README-MID101.txt
drwx------@  8 khazelton  staff       272 Feb 28 21:22 mid101-docker-labs
-rw-r--r--@  1 khazelton  staff    969199 Feb 28 21:06 mid101-docker-labs.zip
drwx------@  6 khazelton  staff       204 Feb 28 21:08 mid101-flatfiles
-rw-r--r--@  1 khazelton  staff      1530 Feb 28 21:08 mid101-flatfiles.zip
-rw-r--r--@  1 khazelton  staff  23834812 Feb 28 21:09 midpoint-deployment-fundamentals-mid101-slides.pdf

KeithsOfficeMBP:mid101 khazelton$ docker ps

CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
86f716fe0cc8        registry:2.5.0      "/entrypoint.sh /etc…"   8 months ago        Up 2 hours          0.0.0.0:5000->5000/tcp   registry

KeithsOfficeMBP:mid101trainingWeekVersion khazelton$ cd ~/mid101

KeithsOfficeMBP:mid101 khazelton$ tree
.
├── docker-compose.yaml
├── mp-openldap
│   ├── Dockerfile
│   └── bootstrap
│       └── ldif
│           ├── 03-memberOf.ldif
│           ├── 03-sssvlv.ldif
│           ├── 100-example.ldif
│           └── 110-example-idmadmin-aci.ldif
├── mp-postgres
│   ├── 10-create-midpoint.sql
│   ├── 20-postgres-3.7-all.sql
│   └── Dockerfile
└── mp-training
    ├── Dockerfile
    ├── config-postgresql.xml
    ├── custom_connectors
    │   ├── connector-csv-2.1.99.jar
    │   └── scriptedsql-connector-1.1.2.0.em3.jar
    ├── extension-example.xsd
    ├── mid101-flatfiles
    │   ├── csv-1-app-1.csv
    │   ├── csv-2-app-2.csv
    │   ├── csv-3-ldap.csv
    │   └── source.csv
    ├── mid101-flatfiles.zip
    ├── midpoint-3.7.1-SNAPSHOT-dist.tar.gz
    └── midpoint-entrypoint.sh

7 directories, 21 files


docker-compose up

----------
Creating mid101_openldap_1 ... done
Creating mid101_postgres_1 ... done
Creating mp-training       ... done
Attaching to mid101_openldap_1, mid101_postgres_1, mp-training
openldap_1     | *** CONTAINER_LOG_LEVEL = 3 (info)
openldap_1     | *** Search service in CONTAINER_SERVICE_DIR = /container/service :
openldap_1     | *** link /container/service/:ssl-tools/startup.sh to /container/run/startup/:ssl-tools
openldap_1     | *** link /container/service/slapd/startup.sh to /container/run/startup/slapd
openldap_1     | *** link /container/service/slapd/process.sh to /container/run/process/slapd/run
openldap_1     | *** Set environment for startup files
openldap_1     | *** Environment files will be proccessed in this order :
openldap_1     | Caution: previously defined variables will not be overriden.
openldap_1     | /container/environment/99-default/default.startup.yaml
openldap_1     | /container/environment/99-default/default.yaml
openldap_1     |
openldap_1     | To see how this files are processed and environment variables values,
openldap_1     | run this container with '--loglevel debug'
openldap_1     | *** Running /container/run/startup/:ssl-tools...
openldap_1     | *** Running /container/run/startup/slapd...
openldap_1     | Start OpenLDAP...
openldap_1     | Waiting for OpenLDAP to start...
openldap_1     | Add TLS config...
openldap_1     | Disable replication config...
openldap_1     | Stop OpenLDAP...
openldap_1     | Configure ldap client TLS configuration...
openldap_1     | First start is done...
openldap_1     | *** Set environment for container process
openldap_1     | *** Remove file /container/environment/99-default/default.startup.yaml
openldap_1     | *** Environment files will be proccessed in this order :
openldap_1     | Caution: previously defined variables will not be overriden.
openldap_1     | /container/environment/99-default/default.yaml
openldap_1     |
openldap_1     | To see how this files are processed and environment variables values,
openldap_1     | run this container with '--loglevel debug'
openldap_1     | *** Running /container/run/process/slapd/run...
postgres_1     | LOG:  database system was shut down at 2018-03-01 02:34:41 UTC
postgres_1     | LOG:  MultiXact member wraparound protections are now enabled
postgres_1     | LOG:  database system is ready to accept connections
postgres_1     | LOG:  autovacuum launcher started
mp-training    | ENTRYPOINT: will use /tmp/midpoint-dist/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
openldap_1     | 5abc39c9 @(#) $OpenLDAP: slapd  (Aug 10 2017 19:12:46) $
openldap_1     | 	Debian OpenLDAP Maintainers <pkg-openldap-devel@lists.alioth.debian.org>
openldap_1     | TLS: warning: ignoring dhfile
openldap_1     | 5abc39c9 slapd starting
mp-training    | ENTRYPOINT: uncompressed /tmp/midpoint-dist/midpoint-3.7.1-SNAPSHOT-dist.tar.gz
mp-training    | ENTRYPOINT: starting java
mp-training    | 00:56:46,949 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
mp-training    | 00:56:46,951 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
mp-training    | 00:56:46,951 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [jar:file:/opt/training/midpoint/lib/midpoint.war!/WEB-INF/classes!/logback.xml]
mp-training    | 00:56:47,036 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@28c97a5 - URL [jar:file:/opt/training/midpoint/lib/midpoint.war!/WEB-INF/classes!/logback.xml] is not of type file
mp-training    | 00:56:47,312 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
mp-training    | 00:56:47,334 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
mp-training    | 00:56:47,361 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [CONSOLE]
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - This appender no longer admits a layout as a sub-component, set an encoder instead.
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - To ensure compatibility, wrapping your layout in LayoutWrappingEncoder.
mp-training    | 00:56:47,623 |-WARN in ch.qos.logback.core.ConsoleAppender[CONSOLE] - See also http://logback.qos.ch/codes.html#layoutInsteadOfEncoder for details
mp-training    | 00:56:47,625 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
mp-training    | 00:56:47,636 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [MIDPOINT_LOG]
mp-training    | 00:56:47,642 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
mp-training    | 00:56:47,720 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - No compression will be used
mp-training    | 00:56:47,722 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - Will use the pattern /opt/training/midpoint/var/log/midpoint-%d{yyyy-MM-dd}.%i.log for the active file
mp-training    | 00:56:47,730 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - The date pattern is 'yyyy-MM-dd' from file name pattern '/opt/training/midpoint/var/log/midpoint-%d{yyyy-MM-dd}.%i.log'.
mp-training    | 00:56:47,730 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - Roll-over at midnight.
mp-training    | 00:56:47,742 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - Setting initial period to Thu Mar 01 02:34:07 UTC 2018
mp-training    | 00:56:47,742 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
mp-training    | 00:56:47,742 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@6d5380c2 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
mp-training    | 00:56:47,748 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1717159510 - Cleaning on start up
mp-training    | 00:56:47,771 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - first clean up after appender initialization
mp-training    | 00:56:47,772 |-INFO in c.q.l.core.rolling.helper.TimeBasedArchiveRemover - Multiple periods, i.e. 32 periods, seem to have elapsed. This is expected at application start.
mp-training    | 00:56:47,776 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_LOG] - Active log file name: /opt/training/midpoint/var/log/midpoint.log
mp-training    | 00:56:47,776 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_LOG] - File property is set to [/opt/training/midpoint/var/log/midpoint.log]
mp-training    | 00:56:47,778 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
mp-training    | 00:56:47,778 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [MIDPOINT_PROFILE_LOG]
mp-training    | 00:56:47,779 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
mp-training    | 00:56:47,782 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1174361318 - No compression will be used
mp-training    | 00:56:47,782 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy@1174361318 - Will use the pattern /opt/training/midpoint/var/log/midpoint-profile-%d{yyyy-MM-dd}.%i.log for the active file
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - The date pattern is 'yyyy-MM-dd' from file name pattern '/opt/training/midpoint/var/log/midpoint-profile-%d{yyyy-MM-dd}.%i.log'.
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - Roll-over at midnight.
mp-training    | 00:56:47,783 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - Setting initial period to Sun Feb 18 20:07:57 UTC 2018
mp-training    | 00:56:47,783 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - SizeAndTimeBasedFNATP is deprecated. Use SizeAndTimeBasedRollingPolicy instead
mp-training    | 00:56:47,783 |-WARN in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@2328c243 - For more information see http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedRollingPolicy
mp-training    | 00:56:47,785 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_PROFILE_LOG] - Active log file name: /opt/training/midpoint/var/log/midpoint-profile.log
mp-training    | 00:56:47,785 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[MIDPOINT_PROFILE_LOG] - File property is set to [/opt/training/midpoint/var/log/midpoint-profile.log]
mp-training    | 00:56:47,787 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.springframework.boot.SpringApplication] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [ro.isdc.wro.extensions.processor.css.Less4jProcessor] to ERROR
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] to OFF
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.batch.internal.BatchingBatch] to OFF
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl] to WARN
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [PROFILING] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.evolveum.midpoint] to INFO
mp-training    | 00:56:47,788 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.evolveum.midpoint.web.util.MidPointProfilingServletFilter] to TRACE
mp-training    | 00:56:47,789 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [MIDPOINT_PROFILE_LOG] to Logger[com.evolveum.midpoint.web.util.MidPointProfilingServletFilter]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to WARN
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [MIDPOINT_LOG] to Logger[ROOT]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [CONSOLE] to Logger[ROOT]
mp-training    | 00:56:47,790 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
mp-training    | 00:56:47,792 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@bebdb06 - Registering current configuration as safe fallback point
mp-training    |
mp-training    | 2018-03-29 00:56:50,557 [] [main] INFO (org.springframework.boot.SpringApplication):
mp-training    |                    _ _____              _
mp-training    |              _    | |  _  \     _     _| |_
mp-training    |    ___ ____ (_) __| | |_) |___ (_)___|_   _|
mp-training    |   |  _ ` _ `| |/ _  |  __/  _ \| |  _` | |
mp-training    |   | | | | | | | (_| | |  | (_) | | | | | |_
mp-training    |   |_| |_| |_|_|\____|_|  \____/|_|_| |_|\__|  by Evolveum and partners
mp-training    |
mp-training    |   Licensed under the Apache License, Version 2.0 see: http://www.apache.org/licenses/LICENSE-2.0
mp-training    |   Version :  3.7.1-SNAPSHOT
mp-training    |   Sources :  https://github.com/Evolveum/midpoint.git  branch:  support-3.7
mp-training    |   Bug reporting system : http://jira.evolveum.com/
mp-training    |   Product information : http://wiki.evolveum.com/display/midPoint
mp-training    |
mp-training    |
mp-training    | 2018-03-29 00:56:51,116 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): Starting MidPointSpringApplication on mp-training with PID 14 (/opt/training/midpoint/lib/midpoint.war started by midpoint in /)
mp-training    | 2018-03-29 00:56:51,118 [] [main] INFO (com.evolveum.midpoint.web.boot.MidPointSpringApplication): No active profile set, falling back to default profiles: default
mp-training    | 2018-03-29 00:56:59,212 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): midpoint.home = /opt/training/midpoint/var/
mp-training    | midpoint.home = /opt/training/midpoint/var/
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/ already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/icf-connectors already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,213 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/idm-legacy already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,214 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/log already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/schema already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,215 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/import already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/export already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/tmp already exists. Reusing it.
mp-training    | 2018-03-29 00:56:59,216 [] [main] INFO (com.evolveum.midpoint.init.ApplicationHomeSetup): Directory /opt/training/midpoint/var/lib already exists. Reusing it.
mp-training    | Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
mp-training    | 2018-03-29 00:56:59,225 [] [main] INFO (com.evolveum.midpoint.init.StartupConfiguration): Loading midPoint configuration from file /opt/training/midpoint/var/config.xml
mp-training    | 2018-03-29 00:57:07,656 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.ConfigurablePrismContextFactory): Loading extension schemas from folder '/opt/training/midpoint/var//schema'.
mp-training    | 2018-03-29 00:57:22,717 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.prism.crypto.ProtectorImpl): Using file keystore at /opt/training/midpoint/var//keystore.jceks
mp-training    | 2018-03-29 00:57:22,787 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Repository factory class name from configuration 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'.
mp-training    | 2018-03-29 00:57:22,791 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.sql.SqlRepositoryFactory'
mp-training    | 2018-03-29 00:57:22,815 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Initializing SQL repository factory
mp-training    | 2018-03-29 00:57:22,877 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository is not running in embedded mode.
mp-training    | 2018-03-29 00:57:22,883 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlPerformanceMonitor): SQL Performance Monitor initialized (level = 0).
mp-training    | 2018-03-29 00:57:22,884 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): Repository initialization finished.
mp-training    | 2018-03-29 00:57:22,885 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.RepositoryFactory): Getting factory bean 'com.evolveum.midpoint.repo.cache.RepositoryCacheFactory'
mp-training    | 2018-03-29 00:57:23,500 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Loading datasource.
mp-training    | 2018-03-29 00:57:23,501 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.DataSourceFactory): Constructing default C3P0 datasource with connection pooling; JDBC URL: jdbc:postgresql://postgres/midpoint
mp-training    | 2018-03-29 00:57:31,415 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialization.
mp-training    | 2018-03-29 00:57:31,446 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager: Quartz Job Store: JDBC, NOT clustered. Threads: 10
mp-training    | 2018-03-29 00:57:31,447 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.TaskManagerConfiguration): Quartz database is at jdbc:postgresql://postgres/midpoint (a JDBC URL)
mp-training    | 2018-03-29 00:57:31,527 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.cluster.NodeRegistrar): Registering this node in the repository as DefaultNode at mp-training:20001
mp-training    | 2018-03-29 00:57:32,702 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): Initializing Quartz scheduler (but not starting it yet).
mp-training    | 2018-03-29 00:57:32,960 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.LocalNodeManager): ... Quartz scheduler initialized.
mp-training    | 2018-03-29 00:57:32,962 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.ExecutionManager): Quartz scheduler execution limits set to: {null=null, DefaultNode=null, *=0} (were: null)
mp-training    | 2018-03-29 00:57:32,963 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronizing Quartz job store with midPoint repository.
mp-training    | 2018-03-29 00:57:34,407 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.execution.TaskSynchronizer): Synchronization of midpoint and Quartz task store finished. 10 task(s) existing in midPoint repository successfully processed, resulting in 1 updated Quartz job(s). 0 task(s) removed from Quartz job store. Processing of 0 task(s) failed.
mp-training    | 2018-03-29 00:57:34,408 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.task.quartzimpl.Initializer): Task Manager initialized
mp-training    | 2018-03-29 00:57:34,469 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.wf.impl.WfConfiguration): Workflows are disabled.
mp-training    | 2018-03-29 00:57:34,732 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.audit.impl.LoggerAuditServiceFactory'
mp-training    | 2018-03-29 00:57:34,752 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.init.AuditFactory): Getting factory 'com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory'
mp-training    | 2018-03-29 00:57:34,771 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Initializing Sql audit service factory.
mp-training    | 2018-03-29 00:57:34,775 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlRepositoryFactory): SQL repository already initialized.
mp-training    | 2018-03-29 00:57:34,777 [] [localhost-startStop-1] INFO (com.evolveum.midpoint.repo.sql.SqlAuditServiceFactory): Sql audit service factory initialization complete.
mp-training    | 2018-03-29 00:57:49,467 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-csv version: 2.1
mp-training    | 2018-03-29 00:57:49,716 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-databasetable version: 1.4.2.0
mp-training    | 2018-03-29 00:57:49,781 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle on CLASSPATH: com.evolveum.polygon.connector-ldap version: 1.5.1
mp-training    | 2018-03-29 00:57:50,685 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle in JAR: com.evolveum.polygon.connector-csv version: 2.1.99
mp-training    | 2018-03-29 00:57:50,736 [] [main] INFO (com.evolveum.midpoint.provisioning.ucf.impl.connid.ConnectorFactoryConnIdImpl): Discovered ICF bundle in JAR: org.forgerock.openicf.connectors.scriptedsql-conne version: 1.1.2.0.em3
mp-training    | 2018-03-29 00:57:55,669 [] [main] INFO (com.evolveum.midpoint.wf.impl.WfHook): Workflow change hook is not registered, because workflows are disabled.
mp-training    | 2018-03-29 00:57:56,910 [] [main] INFO (com.evolveum.midpoint.init.RepoInitialSetup): Repository post initialization.
mp-training    | 2018-03-29 00:57:57,025 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Applying logging configuration (version 9)
mp-training    | 2018-03-29 00:57:57,027 [] [main] INFO (com.evolveum.midpoint.common.LoggingConfigurationManager): Resetting current logging configuration

postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during commit attempt.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  COMMIT
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  relation "ht_m_audit_event" does not exist at character 16
postgres_1     | STATEMENT:  select id from HT_m_audit_event where id = 1
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  update m_task set binding=$1, canRunOnNode=$2, category=$3, completionTimestamp=$4, executionStatus=$5, handlerUri=$6, lastRunFinishTimestamp=$7, lastRunStartTimestamp=$8, name_norm=$9, name_orig=$10, node=$11, objectRef_relation=$12, objectRef_targetOid=$13, objectRef_type=$14, ownerRef_relation=$15, ownerRef_targetOid=$16, ownerRef_type=$17, parent=$18, recurrence=$19, status=$20, taskIdentifier=$21, threadStopAction=$22, waitingReason=$23, wfEndTimestamp=$24, wfObjectRef_relation=$25, wfObjectRef_targetOid=$26, wfObjectRef_type=$27, wfProcessInstanceId=$28, wfRequesterRef_relation=$29, wfRequesterRef_targetOid=$30, wfRequesterRef_type=$31, wfStartTimestamp=$32, wfTargetRef_relation=$33, wfTargetRef_targetOid=$34, wfTargetRef_type=$35 where oid=$36
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_date (dynamicDef, eType, valueType, eName, owner_oid, ownerType, dateValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
postgres_1     | ERROR:  could not serialize access due to read/write dependencies among transactions
postgres_1     | DETAIL:  Reason code: Canceled on identification as a pivot, during write.
postgres_1     | HINT:  The transaction might succeed if retried.
postgres_1     | STATEMENT:  insert into m_object_ext_string (dynamicDef, eType, valueType, eName, owner_oid, ownerType, stringValue) values ($1, $2, $3, $4, $5, $6, $7)
----------

----------
KeithsOfficeMBP:~ khazelton$ docker ps
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                                            NAMES
85d5016ca6de        ubuntu-mid101:2018.A.docker     "/midpoint-entrypoin…"   2 minutes ago       Up 2 minutes        0.0.0.0:18080->8080/tcp                          mp-training
6a1301d2d2aa        postgres-mid101:2018.A.docker   "docker-entrypoint.s…"   2 minutes ago       Up 2 minutes        0.0.0.0:15432->5432/tcp                          mid101_postgres_1
0b2c6b2d0245        openldap-mid101:2018.A.docker   "/container/tool/run"    2 minutes ago       Up 2 minutes        0.0.0.0:10389->389/tcp, 0.0.0.0:10636->636/tcp   mid101_openldap_1
86f716fe0cc8        registry:2.5.0                  "/entrypoint.sh /etc…"   8 months ago        Up 2 hours          0.0.0.0:5000->5000/tcp                           registry

KeithsOfficeMBP:~ khazelton$ sudo docker exec -u midpoint -it 85d5016ca6de /bin/bash
Password:

midpoint@mp-training:/$ whoami
midpoint
midpoint@mp-training:/$ uname -a
Linux mp-training 4.9.87-linuxkit-aufs #1 SMP Wed Mar 14 15:12:16 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
midpoint@mp-training:/$ hostname
mp-training
midpoint@mp-training:/$
----------

browsing to http://localhost:18080/login
  brings up login screen kh窟

data from training week was still there

ssh to midpoint container

----------
midpoint@mp-training:/$ ls -la /opt/training/midpoint
total 56
drwxr-xr-x  6 midpoint midpoint  4096 Mar 29 00:56 .
drwxr-xr-x  4 midpoint midpoint  4096 Feb 18 20:07 ..
-rw-rw-r--  1 midpoint midpoint   758 Dec 14 13:08 INSTALL
-rw-rw-r--  1 midpoint midpoint 11358 Aug  9  2013 LICENSE
-rw-rw-r--  1 midpoint midpoint   758 Jan 18 10:53 NEWS
-rw-rw-r--  1 midpoint midpoint  1282 Dec 14 13:08 NOTICE
-rw-rw-r--  1 midpoint midpoint  1944 Feb  6 14:55 README
-rw-rw-r--  1 midpoint midpoint   100 Dec 14 13:08 RELEASE-NOTES
drwxr-xr-x  2 midpoint midpoint  4096 Feb  6 14:55 bin
drwxrwxr-x  5 midpoint midpoint  4096 Feb 18 20:07 doc
drwxrwxr-x  3 midpoint midpoint  4096 Mar 29 00:56 lib
drwxr-xr-x 11 midpoint midpoint  4096 Feb 18 20:08 var

midpoint@mp-training:/$ ls -la /opt/training/midpoint/var
total 52
drwxr-xr-x 11 midpoint midpoint 4096 Feb 18 20:08 .
drwxr-xr-x  6 midpoint midpoint 4096 Mar 29 00:56 ..
-rw-rw----  1 midpoint midpoint 1603 Feb 18 19:56 config.xml
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 export
drwxrwxr-x  2 midpoint midpoint 4096 Feb 28 16:25 icf-connectors
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 idm-legacy
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 import
-rw-rw----  1 midpoint midpoint  502 Feb 18 20:08 keystore.jceks
drwxrwxr-x  2 midpoint midpoint 4096 Feb 18 20:08 lib
drwxrwxr-x  2 midpoint midpoint 4096 Mar 29 00:57 log
drwxrwxr-x  2 midpoint midpoint 4096 Feb 26 19:55 schema
drwxrwxr-x  2 midpoint midpoint 4096 Mar 29 00:58 tmp
drwxrwxr-x  3 midpoint midpoint 4096 Feb 18 20:08 work

midpoint@mp-training:/$ cat /opt/training/midpoint/README

midPoint 3.7.x "Darwin" (support branch)
----------------------------------------

General information:

MidPoint is a comprehensive identity management and governance system.
MidPoint can synchronize several identity repositories, manage and
transform data in these repostories to keep them synchronized. MidPoint can
make the data available in unified form, apply and manage policies,
manage object lifecycle, maitain audit trails and many other things.

The most important features of midPoint are:
   - User provisioning and deprovisioning
   - Identity governance
   - Administration GUI
   - Identity repository implemention (SQL)
   - Custom schema extensibility
   - Identity synchronization (liveSync, reconciliation, discovery, import)
   - Support for expressions in synchronization mappings (Groovy, JavaScript, Python)
   - Advanced RBAC support with temporal constraints
   - Identity management process automation (workflow, notifications)
   - Password policies
   - Password reset
   - Organizational structure management
   - Entitlements
   - Support for ConnId and OpenICF connectors
   - Provisioning consistency and error handling
   - Support for security auditing and reporting
   - Workflow
   - Reporting
   - Notifications
   - Local Java APIs, Remote web service interface (SOAP), REST API
   - High availablity (HA) support

For more information please go to:

  http://midpoint.evolveum.com/

For bugtracking system please go to:

  http://jira.evolveum.com/

MidPoint source code is maintained on github:

  https://github.com/Evolveum/midpoint

Latest source code can be obtained from our Git repository using one of the
following repository locations:

  https://github.com/Evolveum/midpoint.git

  git@github.com:Evolveum/midpoint.git

This project is developed under Apache license (version 2.0) You may get copy
of licence in LICENSE file. Please also see NOTICE file for addtional
copyright statements.


_____________________
h6. 2018-03-28 17:49

http://localhost:18080

[mP admin GUI] k窟

- ssh into the docker container
sudo docker exec -u midpoint -it dd98d70f7eeb /bin/bash
_____________________
h6. 2018-03-26 15:45

hazelton@DoIT-95QZKH2 MINGW64 ~/opt/Centos-Dockerfiles-master/rabbitmq/centos7
$ ls -la
total 38
drwxr-xr-x 1 hazelton 1049089     0 Mar  2 05:51 ./
drwxr-xr-x 1 hazelton 1049089     0 Mar  2 05:51 ../
-rw-r--r-- 1 hazelton 1049089    17 Mar  2 05:51 cccp.yml
-rw-r--r-- 1 hazelton 1049089  1769 Mar  2 05:51 Dockerfile
-rw-r--r-- 1 hazelton 1049089 18092 Mar  2 05:51 LICENSE
-rw-r--r-- 1 hazelton 1049089   581 Mar  2 05:51 passwd.template
-rw-r--r-- 1 hazelton 1049089  2408 Mar  2 05:51 README.md
-rwxr-xr-x 1 hazelton 1049089  1207 Mar  2 05:51 run-rabbitmq-server.sh*

_____________________
h6. 2018-03-21 09:20  Radovan Zoom session on midPoint training

W. Ont. U is working on a rewrite of the UI as a Java client.

- mP UI has both end user and mP admin in one because use case
- pages in UI are built with Apache Wicket
- widgets in MyUW
- NEXT training: Sync and Provisioning Generic Synchronization; Approval workflow, Org structure, Policy to manage approval flow, Constraints on org structure etc.
- MB: Could data errors be routed to a reviewer?
- support for Services and Clients as midPoint objects?
- 'Merge Identities' function
- ID Match can be plugged into correlation processes
- abstract scim 2 connector plus a set of connectors for particular scim clients
_____________________
h6. 2017-09-28 12:00  Unicon & midPoint  https://unicon.zoom.us/j/791346420

The following is a new meeting request:
Subject:	midPoint Discussion
Organizer:	"Charise Arrowood"
Time:	Thursday, September 28, 2017, 10:00:00 AM - 11:00:00 AM GMT -07:00 Arizona
Invitees:	szoppi@internet2.edu; keith.hazelton@wisc.edu; mmoayyed@unicon.net
*~*~*~*~*~*~*~*~*~*

Hello,

Here's a meeting invite so we can get together and discuss possible midPoint needs and how Unicon can be of assistance. If this date/time is not workable please send over a suggestion and we'll do our best to be flexible so we can meet soon.

- I2 Campus Success Program
- General working group assistance
- Other

Join from PC, Mac, Linux, iOS or Android: https://unicon.zoom.us/j/791346420

Or iPhone one-tap :
	US: +16465588656,,791346420# or +16699006833,,791346420#
Or Telephone：
	Dial(for higher quality, dial a number based on your current location)：
	US: +1 646 558 8656 or +1 669 900 6833

Meeting ID: 791 346 420

International numbers available: https://unicon.zoom.us/zoomconference?m=1JZt6ZB1TKv1LbC1bAwikgflF_S-ExVK

Thank you, Charise

- I2 Campus Success Program
- General working group assistance
- Other

----------
1) Listen

Charise
John Gasper's been in on discussions w TIER
Misagh Moayyed:

- packaging validation
- I2, alfajango on fed mgr
- GDG BT under Unicon
- Grouper training env. w Paul Caskey just getting started
- AWS managed hosting
- Hosted IdP
- Learning Analytics
- uPortal
- student success

- mP evaluation stage; fairly good rel. w dev team in Slovakia; 1st contact at Java One; contributor, committer status; talked about items Unicon could contribute back; less than a handful of clients that are looking seriously;
  - in comparison to everything else, the better choice; massaging schemas, customization; good starting point on the platform; even if sub-par
  - Grouper/midPoint: MM was after: Exact topic came up in Slovakia; Is a possibility to take adv. of mP to handle groups, manage roles, provisioning, org hierarchies; limited support for roles and organizations; not on a par with Grouper capabilities; Could mP fill some of the gaps; mP as Reg and Prov. could supply same capabilities that Grouper provides at the lighter end; e.g. struggles with the Grouper permissions;
  - mP positioning on IdReg w focus on compliance and GRC
  - we have to find bridges and highways to bring mP and Grouper; grouper groups and authorizations, mP would be a subject source, core identity; would push to some of the same systems; mP would create, provision accounts;
  - MM concerns on mP: Evolveum staff are the core committers, they have pretty tight control of the product and project; platform is tailored to a company audience; very few .edus; Needs customization schemas, customizations, connectors, we'll likely need a lot of changes, they might not jump on it. Platform as it is doesn't lend itself to level of customizatbility you'd like. Their whole approach is if you want it, system would provide it.
  - If bid on shib is 40 hrs, on mP it's 200-300. there isn't anything better; Looked into others: Syncope, ForgeRock, Ping,...; Unicon started their own OpenRegistry branch; Even if the platform is less than ideal, the core developers;

MMoayyed: Excited about Shib UI work; Look forward to prod-ready version of TIER packaging

Campus Success & Unicon: Discussion is all; Holding pattern for now; some others outside that.

2) TPs

   - Unicon Campus Success engagements
   - collab work with API & EntReg WG?
   - EthanK expertise
   √ Deliv. 1) Containerized, packaged version complete w OpenLDAP; Unicon dockerized w OpenLDAP, hooked it up with Shib SP and IdP; version exists;

   - Goals:
     - Ease adoption
     - Simplifying configuration (community defaults)
     √ SCIM 2 connector (Malik)
     √ Event message consumer/publisher connector
   - Assess practicality of mPaaS
   - Integration toolkit, guidebooks
   - Integration consulting
   - Grouper integration (which UI/API for group/priv mgmt?)
   √ Horizontal scaling best practices
      - mP System isn't designed for the 100k user case; assumptions tie it to a RDBMS
   - https://evolveum.com/midpoint/midpoint-guide-about-practical-identity-management/  <== Practical Identity Mgmt. with midPoint, Radovan Semancik

] SoW by TechEx for
  - containerization/packaging of mP/OpenLDAP
  - SCIM 2 connector
  - Event-driven Messaging connector to/from mP
  - To Be Socialized at TechEx
_____________________
h6. 2017-09-20 13:19  per AnnW: Two "campus success" institutions are interested in implementing midPoint
